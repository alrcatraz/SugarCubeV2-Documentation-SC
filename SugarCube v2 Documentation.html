<!DOCTYPE html>
<!-- saved from url=(0056)https://www.motoslave.net/sugarcube/2/docs/#introduction -->
<html class=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>SugarCube v2 Documentation</title>

<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- CORE SCRIPT -->
<script type="text/javascript">!function(e,t,r){"use strict";!function(){if(t.head&&t.addEventListener&&t.querySelector&&Array.prototype.indexOf&&Object.defineProperties&&function(t){try{var r=e[t],o="_scd_"+String(Date.now());r.setItem(o,o);var n=r.getItem(o)===o;return r.removeItem(o),n}catch(e){}return!1}("localStorage")){var r="sugarcube-v2-docs-cfg",o=Object.freeze(Object.defineProperties(Object.create(null),{getConfig:{value:function(e){var t=localStorage.getItem(r);if(t)try{var o=JSON.parse(t);if(null!==o&&"object"==typeof o&&o.hasOwnProperty(e))return o[e]}catch(e){}}},setConfig:{value:function(e,t){var o;try{o=JSON.parse(localStorage.getItem(r))}catch(e){}null!==o&&"object"==typeof o||(o={}),o[e]=t;try{return localStorage.setItem(r,JSON.stringify(o)),!0}catch(e){}return!1}},removeConfig:{value:function(e){var t=localStorage.getItem(r);if(t)try{var o=JSON.parse(t);return null!==o&&"object"==typeof o&&o.hasOwnProperty(e)&&(delete o[e],Object.keys(o).length>0?localStorage.setItem(r,JSON.stringify(o)):localStorage.removeItem(r)),!0}catch(e){}return!1}},clearConfig:{value:function(){return localStorage.removeItem(r),!0}},arrayFrom:{value:function(e){return Array.prototype.slice.call(e)}}}));Object.defineProperty(e,"SCDocs",{value:o})}}(),function(){if("SCDocs"in e){"inherit"===SCDocs.getConfig("codeColor")&&t.documentElement.classList.add("disable-code-color");var r,o,n=((r=t.createElement("style")).setAttribute("id","style-aria-outlines"),r.setAttribute("type","text/css"),t.head.appendChild(r),r),a=function(e){if(e.type!==o){if(o=e.type,n.styleSheet)n.styleSheet.cssText="";else for(;n.firstChild;)n.removeChild(n.firstChild);if("mousedown"===e.type){var r="*:focus{outline:none;}";n.styleSheet?n.styleSheet.cssText+=r:n.appendChild(t.createTextNode(r))}}};t.addEventListener("keydown",a),t.addEventListener("mousedown",a)}}()}(window,window.document);</script><style id="style-aria-outlines" type="text/css">*:focus{outline:none;}</style>

<!-- SC-DOC-ICONS -->
<style type="text/css">@font-face {
	/*
		sc-doc-icons (2020-03-29)

		`sc-doc-icons` is a subset of the Font Awesome font v4.7.0 by Dave Gandy (http://fontawesome.com)
		and is licensed under the SIL OFL 1.1 (http://scripts.sil.org/OFL).
	*/
	font-family: "sc-doc-icons";
	src: url('data:application/octet-stream;base64,d09GRgABAAAAADSIAA8AAAAAWygAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABWAAAADsAAABUIIslek9TLzIAAAGUAAAAQwAAAFY+IEkNY21hcAAAAdgAAAHGAAAF+lx59pdjdnQgAAADoAAAABMAAAAgBtX/BGZwZ20AAAO0AAAFkAAAC3CKkZBZZ2FzcAAACUQAAAAIAAAACAAAABBnbHlmAAAJTAAAJVMAAD52DoFpXWhlYWQAAC6gAAAAMwAAADYY2dQlaGhlYQAALtQAAAAgAAAAJAfCBCtobXR4AAAu9AAAAJMAAAFUDTb/0WxvY2EAAC+IAAAArAAAAKyCYpF1bWF4cAAAMDQAAAAgAAAAIAFlDA9uYW1lAAAwVAAAAY0AAAL9oSsBZHBvc3QAADHkAAACJwAAA207tElLcHJlcAAANAwAAAB6AAAAhuVBK7x4nGNgZGBg4GIwYLBjYHJx8wlh4MtJLMljkGJgYYAAkDwymzEnMz2RgQPGA8qxgGkOIGaDiAIAJjsFSAB4nGNgZNZmnMDAysDAVMW0h4GBoQdCMz5gMGRkAooysDIzYAUBaa4pDA4vGF4EMwf9z2KIYg5imAYUZgTJAQDTQAurAHic7dRXbtQAAIThf4kJLfReQ++99947ZA/NUeYAPPESfjvDLVjps2TL3l3JMwOsBxZ0WQPM/jBj/Pz26my6vsDm6frAr+meYbyeldVVj4xHz4fpuM57B79xkQ1sZJPPbWGJrWxjOzvYyS52s4e97GM/BzjIIQ5zhKMcY5njnOAkpzjNGc5yjvNc4CKX/P0rXOUa17nBTW5xmzvc5R73ecBDHvGYJzzlGc95wUte8Zo3vOUd7/nARz7xmS985Rvf+cFPVpj7Rxf5/1kaD8O/s/n4LtdMb7d8o6TGlKTGB1NjglK+eVJmgJRpIGUuSI3JSpkVUuO/S5kfUiaJlJkiZbpImTNSJo6U2SNlCkmZR1Imk5QZJWVaSZlbUiaYlFkmZapJmW9SJp2UmSdl+knZA1I2gpTdIGVLSNkXUjaHlB0iZZtI2StSNoyUXSM1rkHK/pGyiaTsJCnbScqekrKxpOwuKVtMyj6Tstmk7Dgp207K3pNyAUi5BaRcBVLuAymXgpSbQcr1IOWOkHJRSLktpFwZUu4NKZeHlBtEyjUi5S6RcqFIuVWkXC1S7hcpl4yUm0bKdSPlzpFy8Ui5fa72GuZ/AXT02iUAAHicY2BAAxIQyBz0PwuEARJsA90AeJytVml300YUHXlJnIQsJQstamHExGmwRiZswYAJQbJjIF2crZWgixQ76b7xid/gX/Nk2nPoN35a7xsvJJC053Cak6N3583VzNtlElqS2AvrkZSbL8XU1iaN7DwJ6YZNy1F8KDt7IWWKyd8FURCtltq3HYdERCJQta6wRBD7HlmaZHzoUUbLtqRXTcotPekuW+NBvVXffho6yrE7oaRmM3RoPbIlVRhVokimPVLSpmWo+itJK7y/wsxXzVDCiE4iabwZxtBI3htntMpoNbbjKIpsstwoUiSa4UEUeZTVEufkigkMygfNkPLKpxHlw/yIrNijnFawS7bT/L4vead3OT+xX29RtuRAH8iO7ODsdCVfhFtbYdy0k+0oVBF213dCbNnsVP9mj/KaRgO3KzK90IxgqXyFECs/ocz+IVktnE/5kkejWrKRE0HrZU7sSz6B1uOIKXHNGFnQ3dEJEdT9kjMM9pg+Hvzx3imWCxMCeBzLekclnAgTKWFzNEnaMHJgJWWLKqn1rpg45XVaxFvCfu3a0ZfOaONQd2I8Ww8dWzlRyfFoUqeZTJ3aSc2jKQ2ilHQmeMyvAyg/oklebWM1iZVH0zhmxoREIgIt3EtTQSw7saQpBM2jGb25G6a5di1apMkD9dyj9/TmVri501PaDvSzRn9Wp2I62AvT6WnkL/Fp2uUiRen66Rl+TOJB1gIykS02w5SDB2/9DtLL15YchdcG2O7t8yuofdZE8KQB+xvQHk/VKQlMhZhViFZAYq1rWZbJ1awWqcjUd0OaVr6s0wSKchwXx76Mcf1fMzOWmBK+34nTsyMuPXPtSwjTHHybdT2a16nFcgFxZnlOp1mW7+s0x/IDneZZntfpCEtbp6MsP9RpgeVHOh1jeUELmnTfwZCLMOQCDpAwhKUDQ1hegiEsFQxhuQhDWBZhCMslGMLyYxjCchmGsLysZdXUU0nj2plYBmxCYGKOHrnMReVqKrlUQrtoVGpDnhJulVQUz6p/ZaBePPKGObAWSJfIml8xzpWPRuX41hUtbxo7V8Cx6m8fjvY58VLWi4U/Bf/V1lQlvWLNw5Or8BuGnmwnqjapeHRNl89VPbr+X1RUWAv0G0iFWCjKsmxwZyKEjzqdhmqglUPMbMw8tOt1y5qfw/03MUIWUP34NxQaC9yDTllJWe3grNXX27LcO4NyOBMsSTE38/pW+CIjs9J+kVnKno98HnAFjEpl2GoDrRW82ScxD5neJM8EcVtRNkja2M4EiQ0c84B5850EJmHqqg3kTuGGDfgFYW7BeSdconqjLIfuRezzKKT8W6fiRPaoaIzAs9kbYa/vQspvcQwkNPmlfgxUFaGpGDUV0DRSbqgGX8bZum1Cxg70Iyp2w7Ks4sPHFveVkm0ZhHykiNWjo5/WXqJOqtx+ZhSX752+BcEgNTF/e990cZDKu1rJMkdtA1O3GpVT15pD41WH6uZR9b3j7BM5a5puuiceel/TqtvBxVwssPZtDtJSJhfU9WGFDaLLxaVQ6mU0Se+4BxgWGNDvUIqN/6v62HyeK1WF0XEk307Ut9HnYAz8D9h/R/UD0Pdj6HINLs/3mhOfbvThbJmuohfrp+g3MGutuVm6BtzQdAPiIUetjrjKDXynBnF6pLkc6SHgY90V4gHAJoDF4BPdtYzmUwCj+Yw5PsDnzGHQZA6DLeYw2GbOGsAOcxjsMofBHnMYfMGcdYAvmcMgZA6DiDkMnjAnAHjKHAZfMYfB18xh8A1z7gN8yxwGMXMYJMxhsK/p1jDMLV7QXaC2QVWgA1NPWNzD4lBTZcj+jheG/b1BzP7BIKb+qOn2kPoTLwz1Z4OY+otBTP1V050h9TdeGOrvBjH1D4OY+ky/GMtlBr+MfJcKB5RdbD7n74n3D9vFQLkAAQAB//8AD3icrXsLcFzlleZ//v+++nb37dvdt+/Vo9Vqdbe6JVluCUndbSRZbvySbMvEFsLIxjiCtY1j+RVwgErihASWACE2yxqKcQgJg2GreKQCTIYtahMyReYRZnaHTBJgpmqrJsnuBiYJmdoh2cTB7T3nv1dt2UAgVQPyfd/7n8d/zvnOOX8zYOzcy+IRUWedrFI3EzFTESrjMLnpG+ktc/UIAOPsCOM8wje010084YfxGtu7/ZsdjidUbxk4MUimHAsGQNdyxcpILVmibXetOtQJqiseib08GElFfn8m4kZg8G+tTmj5TDgbOQYtWXgzEvvLxpuRsA367bfrCVMxwPvLWCSl9jQ8r9GDlDTpC7FeVq/H062OFQ0ZuqYKiHwoQuuh7oLnJmyhOsugNgAx8PSal/TJzufeh2z+qSd+vv9jv3iy9wc/aCADnvneDOQez/3oR7nHf374MDzr85J+H04YU86dO/eMMiDCzGAxlPcAu7I+0+FwEDFgYEUjIYWzdIorXJlE+hXGlYNM00GAJuYZ8sKBzTNFVZVZpijqHFMVdTpul5cV862e3RnvTCYThtSIBcWRagYg1VWpedDdldP0uOPWuoaqpfhI0Ys7mt6VK9biI1W85sKeiR0T+MfH33nr2R3QAZl3btNNiGjimB4Bc+tI9zu3Faow0i2OdY/w+PIJvnrbamW0cebMwnPboeMR0zi7gx40+OOGmTi7o3sEqgX+OO2IasbEY/xBlmId9TZiFJA54IfxFhzGm3sdz/HnkQ5aroSUrwJSgdy44jG7kbX77ca/xGLTuD8Nh3A7bXPXxRuxGLjy1H4MDtv2dIzGO/cr/kN+ByuwTL0912rrCs0SAc0J4aQdR1FblnXjDNB89Q/IUUuLQ8sp4OJtz+U/9Ic97Q+De/v8eSx2+nTsiEsHjz0We/eDsTI9IGn6nUig3vOst15kilAk90dUECicWdwJNofKFWw6P9ydH85ratsySDlaKY8bPY+qquCmVEF9DeNmDIZcLzU85IpE1n0j6y64WXjDywCeZLwFPKCT5+nqmy5eTb0ZXHWz9HigkwT8EmdhSz1F5zCLemFzeMCmK8Ncdf3hu4JBu/yhzu6Qg/DHFz/vfzeLnyM7/R2/lL+E3xxjC99kUtGbvhFD2ySOuVD2oB4EhwWmMqGo/oxeOm57veQ/yA9+wJNo0iVnWaZYIDl1ByJaCSNVD2WSdCyhW7Dkam0CRoqlnK7pGpl7GfU7PJThcJdl3BGyrNAdocgzdkuxLeVl8MSIbOzrSo/kCi1Oj27q+tUGV7Y/sXzHVPl+fBDkOxCBdZmRXDZhRgejpg1uqK08k7SzQzmwraGQsl6zjZO50W0o5nNnzz0jPoq6j7EaW8um6ut6QRUhQHXzSaZwwRVxkAmVC3WB6WjyOp9HvhmoaOugaZJvbY5poE2nMsuSbrGYN9T0su7KSHEZ5LQOcFycD9XkSBnyyCNO3OEh5HjIJQlY4KX8+yPVVTAhPHQNuTLH2+gd3jaNBcOUmxMTOy+5czIU3ahoITXTvaLPbc+Pg7zVkkibGSfy2g1/9cbfHNI++d/efuEzM4uvmfDZS2bLN0fDNUUvtmcSqbZIbHW3gzcSubCttaV7Zj7x3aNHv/svtPHnCOxFWWRYma2qj6Of1doSnAsD74GYZBpThabOoyHQBJhXQCoed825WcwXu9xhXW339d7VtIqmfaBpxMk0lkwAshfY49iNn8YccK18Xu5exW0+5k651gnLxU3M2T0pb9D2VX/nWo0XXf6JBXm4gI9J02nqlPgYYxvq63uyXFMtjXNoAa4wZMVgqmYgKxoDrsE84wJQ2+S/dV36b32O6Yo+nUKFFuPFfD6kdgRKjS/VbCp/XsfiIp2rS7TJx0y9ahrPkmYqFdqe0c3J8xqGPUsVuB0vZOgOHjwntya8sz24YP7zEqUt2jYMyjncyfrrva1xG+0U/ThuDy868wt9SLFYkD72YuMUFpRIVaLoayVzXvoJtCM6wQDtRp+z3FPHpNSP4RWHTzSuoH0MnvaV4OtgO9IUYWnUwtr6ZT0ZripuyhKC80kNCVJUppAtoWmhTQkAMcuEgDmcajANrL8v39XWkrB1jUUgohM6QDkuijQZyFpH+0HKq6XkSIku6Foq6Usfnj76VzcsCvUvTJ2EHNEXMHKammp8ylA10wxdb5giHMgSN2en9pOQ99Ojfw07dKGqQm88rhmG5OnXyNO/iRmUcxcbRjw21B5HB7HoLLhKbgKdBYpYkHdgCig7mapG1A3eilKpKOPGUsdwEeEeYgC8IsBFxyBtp1gDchU0eQ7optyAqer6J3HuhiL69UbEgKecVCiXeOfxRC6UcuDpUK6Yu+I8F6+hd1I0TTHOqQZo3H7nrXw+ngDHzudFIu44i/NHvIF8ldgqqSl8J45M1cqIdbpAVRTyhCpX1IPoAJDNBeSNK0BaQ7GwnUzTItqG0fbuSrVbGj+59zwyUAkgDDJL5xLmeAhzFq0+GZfAFPwQX6MQXx2W0WzXmsbgml271sBdxHfjZgla4JXuEdMoGOarbjp8XeOkait1dMEHrgu7FnTgdJx+Vr7zyupdIJ8b6W4MyjfJ7uCfyMHwCL6oaXV0B/Ri2vcZfny8DeerjjbUVy8hn0zqFYMdP4SaBOkVaHYqMJ1PdleTNqkz2YX6RDeuBqANARxaEnq6IVcnCPAcdMzeNAvwCobnN2V4jp/8uwd4Ag8fOzA2y7esfKTxbYkCYDVG7AN7T57ceyATYJJHRIR1s8H6coVIQYh0EMWNOGQB7eQQUwHUWZxeRJMK08nuSj5VWIQmgVUjaZIMbyl5SPIEQrdHXKtguTO3zEBFEhbQBzff98q9PH5CWvcJSeKBjHcBkdffxx8gxbNz3+ATSKONM+dqtq1+BSUEsHnDuupQWVMVtAmSFkOYrKigqAs6BhT8W8D5cgg9sOAGggcOwGdRyMQGh+m5qy6rT6wcG23zCk4ipLYi8ET8XxspIkMTgMAAvJEyz1lcdzo5WhDBh1q15uh4BWPq4j8tb3EEFfhijdIG+lfmlEFMCIQWX45ELD7eoUe4EUpX++eKE9PT0xNFKMbjU/pnjUnN1YqTl7bmsqItGm01Cq3h8tBgqK0AeqtltfFctnV0aMu+ffsur/I4mVpr2rTNRF9Hz9pyS0t5bc+l/YnklVu3Xqm1qf2XXrWqvW91e6zTicVSHXY02pZuTfOsl8ZP2x2pWMzpjKXr/W2rrqrNTxR4z+juYD5+S2yWuUgHK9S7yHejRydYSjelxMiZcza9oi1BAD1Jys7w6iJQL4MEV6R8cM/0jfbznokiv9JpvOWOOY2PpzJ9HW92TKXghMPnMn28WC9og41/zKQab6XwYmqq442OPsDTj6eYr+tvKYWAnhGak0XKd4A8g3JYgI+XJWW4WyQt29qL1Ek7+UPUeXSRwg5UR+hW/kMQ/RoS6nY4bTZoKSJyquOYvJH6IG465EU7ju+N0a3MIo9kc9/mLyOPadZVz1hS4mhuwA7jHIW9wBJ2xGRpaFdkMEJrkWal+UlqPlcqg3R41WF+dySSRPtJmFa785vfOG3RSMJ1E5GoCKtGxjl7STKrK4lf/CKp6tkk/3s8U32d++OrLMeG6gMOOiHEJEF2dGQp3NpG5G7UtRZMnLWc3mWramoZdMWhE5J/kLDbzn4XMkO/0N+HPv7S2U2QGPgpP/v+dJKcnsF4UWbLKF8qgiKxhoJYAwPeYbLiwzK/p+wx7yVXeiqacbe0UJnKIyGVkbIq/ZTMKGvgu8us54o3JsFUVD1uIsR0cismtm2rHXOyocZPw2HoCKdb+DE4viPz42u+qiRsxYwYqiOKnSt21AczCQ3RSRgyZgbBk+nETvx4U5PWAdZP+S16T7GY2XKGVPK9fR3DMt30Jyb6zHzOUlOY9Lo6Uec7jVq1i3w6TUrxRhhpSbvHatu2TazIOUIBM47xVROTmR1w/BhGJqQTfhkzGz/BsHRCS2QG6ztWdBaVhGZETNVyxFevObzpx0grD+EjzM/3+Djmexbz6o6fmjXT74oj070gGQ7iIwKCM+F0+AzFvbcReH3PwmP8k9FMfg+u559m0ff4npeU38P5EaTVVQm+s6EzJn2zhc81IijG4POMLX7vMn4M6TOflyUBoNkmSaIQP4GzzoXLTDk+vmbCLiugjeLtGRNfP3cOeRyD7+E34nWrSU1qiKjplrlsGfz0HrlzYo2I/2rGPGM+SdAyE5YEBnb6M/HnvJc5rLXuRiV/HM7XK6Q7DC2pVngh/8OOeLJxHX6ycV04fA1Nkx7oCacjO8NwovEfcH59JZwxd4bDjdfxcnhnOO2P9R3+oFiLYy3/JgRZcwGzZqm4I3gegQ3t9VCTo+1/5nnEU4i7UkCL85uG58cbr0GvaV6DwiUa4GEk4hqTP9F4vfGaPDThq0TXw5I+tjj+0WD80IcaP52Q4y+CqtCiEIiA/ThsOnwNDt3TeD0QwsMmfKxxrU8V9JJE6AF6MNA9ynq9L2sVqFhzvnjnOVLW3WjXpeaAwVjiyZ0oTuTs9WDEh+n7D4cXdiKXvcivSfdxdNMfSvL69+I2mbdl6x0tMd4sRommdlMVb4m5ni9Hxf1gkor7xSFxW6pxvzuKm1SqF/en+zKTHX2POWNubwo+n3EaJzEsHJCnqdNwF8aG/nTj5tP0sKTjTrGd/zKIvAjx/XqQRLuUo1B0E2y66Ll5SYtEu9679R0DwrLbCx3y030YbxonHQcOpEbdPn/cAuyazPSddsadZcENWJAUu6d7AttDWipIS0bSIjM6qfiLYJPbXVwiF9+yu4LErqvUnAGi4ki59Lnuo42bOwqFDrjrURepoYEdGCXJOE5fajz1KEos0wePIWlIa+N+J/Clt/Gf+fqxdc6k42fiMJdREtW110tVAjp8hxX3oWglrl8wO1A/vRjRH+vpDNjHMZCAcdykYCQtxUP0QTENdwWyI8kg8ehLGkFuOchW1keXIwwmw5Bok9AxZmBUnqDyFCBIRoSpKFJUyhyBlelSKVkqDC8CZUy9iqsA0aXFnQzH9KtG7iwDlIJRpikIi9SqqEbHPuMl45tnjozuny6Xp/ePrr6pV4lr0yrXxr/+0au+dmRKqd/y4NUzD66civfzl85Y7nJ782Z88Cg+P1pB5LtZsbSNW2Dt0Ye//vDRtROXTiWSbDGeEj+XsIn6WB8ItbuDK4LqTxivFDiIzCEEOF9vuwgA9la8vOcjf8fihKOkvl3EAcNDEwLRsqZ7ruSUajCdIHE0F9vX3vC1bfNfH1fUaS2u9N60ZnTflj5enj5weHfP5njSO4MpQH98avzUzFUPH10Nu3C7dmaDZimbVdAqowFnPd2b7eWudaYlmZi6dAJ5W8ynnhFXI08FNsmuqe9Y08210ACCfw9VY2CujzllyNCMkHaQsgKuqfwgZjlC45RdCkpzDiLWxExdm5c5zxK7W7+u2N1d7S5WnIKpdiDTKQuIa107X0/SYqjDGmoT/5eZZqDqqtS1RsVGOq1VSBakYDTUTYX/9SdbHxyfojBmnaH4vLlnd23j50taixJZMEwLZ4C8OnNkE1701MhhPQKF//MnW0/RSy2gCnjgBVRrWL6OoXBzoQ82TpgrohH4r8GVzf65pgRPMqomoqwSQf1mgNUwl5qrX7npUm5ovV2tcXSssr4QYboW0edNQLEYs9Ew1xScAqCxecSJEArBLO0hNMdCEJrePnflzEc2T65fUy/mkkX6L29RCSuoXqXifpWk9gHnMFwqlvKarkr5xf20vhRvVu4o+0IBdpIUEXVR0i03J84fHjd1/1A3G98/g+D5GU2Bn5tGNcjOZTXsqVKo333W6wuVnjbMGbiLrjVupu37HPOhyygBvgI/ffZX5bWryzwpR7smlYaMcw1iDu0iuY6xNex6trt+7VXruGYEkiW/QWLTGAr5IAlU15i+gDAlZFih+ViUI2jjGhjaLqaHw/os0/XwHAvr4ek9u6/ddfX2K2Y+Mr1h8rJVTsHxpWzTlIz7s41Qt+wGfMB5Mt4Vd9Bau4Ym4N9X4lONiGFweIUbRuOuDyV8eL7xopT1ZVLW733c2M3jZ38VcUzT4Xs+QBFKUMuYQXuOL9aYxkE3QuTC+GQID4Who9/WMInQlIMqULznVEOjJhvfyQwjYmxYtbLQ7eYS3Ze2JMjsu0fKYIGL0mgeLCk5D2M8Hlol468bQGdyBEEJmmoi/GUn4/CWtpYvOdkEd9Mt67PuO3/rl0DEpq5tXdMg3OyfmwkJQuMh0zvh1z9PtOyOyRc5ZvTBwT3PyfLIc252Oot/0OPZBMhtL3VG1lHOUH9RzsdHMG8iOfSyOltfX1PBBC2QAwtpocMGoGc6zHShH5bMzy4VhsLnSB7TK8fzw/nc0HlJFC2egWptcR9U30gO3nAGpF1TzV1rloZKVJBfhNvvL4i3ItX8iVw1+hYKItRyAnMq5OYERkEpk0QHesNENqG0RRYP7nqOmli4gc6ens4MzLgB//1xgu9x1pQDxTvBujDmrWNb65cv68vnFEOBySgoaG0IOE0dFMNU5qlQpFGhCG0VjXSXisIKhdgM7Rk5Oxaarq9cUfGKw/HkWDxuh1EkXlelSx1GX0b9JL0pj3x8uOJnUPpisZ4aMFR1VZuW5j9AGOBVeLpxBbw9FVG/oqaNoAg2NZVNwfeRw1dNY0H2VWm7O+OdTfjtN9Wrxh6yXf3VV+Fto01/SIsErb2zVbmHjOwCPEvvmmfP0CWOAm6xvhKrytgZ1M5nWA8bYbl6JzUn0EUdlFV8thMDYURsGB5a3t/WilgrJaM+QpUaJdYuBnrZXsvwoQm8VMTcfwKQMJnxyZ4yQVKM/E/96aGNYsfWlnE7YbRUxymaY/iH8apnFsa9rTsaX+4b7Ye+8R4/8GNgv2rvsxP4rDce771lzSIIWntTX2J00Eis/DOYapzq6OvrgL24bWKAHbJmtJ+tq6/es336MoUpY5jas5GedpvQzSR1yQ9rgNclsD1MGO5w0Lnge3defcXWDVPL+nLZZEKnvHWkmENbH6pS5wLtWkd+HeS3hAbeDOqVksQCJcJB5C3lJCBjwAlfCy4O48xvggM0AkIAXvAxXSqfj83cMsO3Hd0GaUPfZ4aTPZoa2xLV9c2tbSFdsT9tROx27yOara13FdXoMWPGXt0AU91nWF63/6yxuaUtZIj4p1HXsbT3ETWmTzmKEvIfxjx5bHb2ptnZW+i+nUm1D2mWltoC6njUmE7bpn59KDKuavWMammRoVi6PQYRXT7b2pZdrkd0Z8uSR8NjqromHTzaZkMkqNv9Tuzg313EFvWRHkBqqU6LHkdFhKkqzYbexW2iYgX/H252cZe2m5e0n73gPL/0HNHyO7+Spi/iMUzf3/9sSVfPBXtKtpHkFqxJaj1N0gusiZN3yJo4RpDOJFdFwSRvgKmQmPT79kLFiaMymlJ+hUd2v6h4l0m3tiTsaFhVWDd0+/0k168t10pUfUS7H/KoUjyB2tdKuZKOs8Gr8v+ycd++k/sBvje8ftO+fZvWD38P9j2wl+/fMIlHeBW8/fft379Bj+wexIPB3RF94z5+4N4DgIcWXvR7kufO/Ua5mb/EbPR5VVaqF5hKWZPK5tG/KwrM4g4oQwFluraiu8dzJKD3a92+NWPE48uQNpyhw2TcaPZUNhF42IV4nt8WIPJgB0/1X75v7PU1l/ON614nc50c3XXHZOOKqdvnV/DxnXeuh6fpEHaNnn+HLJpOhx546oEhOpm6Y+eEWHHdrQ/cunuEr5i/PbDr/6fcgrw4qIm+eon4w1xwnroUmJTirpmVpjIdqW63uzaiovHGRyY4utaM8OnmKjJRFjlLZDhR5pMjKfOJFHEihfdt2XvL3i19ytDUIdi1Aa8jGffdvmucI1k/uJDloJf1NfQ5y9lqdnl90xiGk26QvQgdKdI5ogwMoZrsSXBFXVjS0dIWO1pLcg3HS5Uql1aGqad/UVcLnSp6oHypeFFnC70MTiQ3CecrbIvLZZwlja1X8pmQ0NsR6EUjQZeK+ltqQdOFEv5c49JowfpXy1ppFaz/DB/Dk4kobHqm2d+ylKSWRnDQbHF9yVDzyBqojVHL+lf5fJRejOIXArkkAyy8rN6DmSQEbUrUFtk8YQvg05xl2t2kqbMYj6lkJEuYqwSrk5a29vjHlxA/8unz7K2e5y81iaOb25t3dmFSvhjnPip7xK1/kCZgnhsPGsGSphzhHMTKZQ5LV0w8fcU9W/jsnU/csU25/DhcvaSjzo/P3HP6nhm5abxyYf/8/HoBg6VYjo3XL6VeGwfZbuPUblNxaoDsUiuKnB1kqEKZNkPZzrZWOxZKmakgQKFHKVNNtfTeNDajyr3vS+tiVPj1+5AslqwPIp+OCIEyGHLdMgFkczIvZNMV+k+676RcrHR+CYYanNcuOl/sybwarBySS5c6/J1/qVOe4OaiNUbu+xwvxiD2WjMP66/3flDgOU95rQlY/RUK4iJORJDXl4J1V69+AD10fOqABOsH6CpoS26C4fOGm8DPvSROIF6/jE2yPfXrVpa5oEKrXkhHMfdmYhJz8WgkakSodEEeBDB3ATjEoiwSikZ2ITYVekjsCoPOmD6LO53NYWDSqYaxZnV94tIV1UrKQcwZR39hyVoGcodRx5Xled0S+Xg+jnPH7+OQMykicscJVhuuULMcnUoX1S4QC1GbF7okvMNE5Vj3UdPJmIcNtZgbbZ3sWNGHqeLesB11jY9nj1HaEj12bdhNh6+F1+bD6RbFuBavNn7d+DLFulGMv/OrPxFOu+FDutKSsODtRsRqcQzjaCSZCX921Q5MGeD0tWbGMa+9lga69rQLIxgoKU6fa5zbD79FfWcpOrSigtPUzaElElRKXdKDQUFtaKlW/YqhS01AhKu1pOxZFWvJCUpdqKEraEkYvGVqjX/QbSNk8kM/4aqpm+IIt4znwxaf/58qD3M3HD37SQuEbcBLKzCrjMJ/N0zLVLRGo8plPeA7Mg8VGLnSrMD6EV+vqbcPDZb7+3qKhVw209biognFqfA8kuawbtM3uv5wrb9FdlNqJb27WXgNqr/dXgwGYBV0gr8H78I9f/D0+GmommeHMJc6bJr8f8j9WatajcdrtfgPDx7MdR082MV78SSOFxtP0R38x61Hxx+9PkZv4gsZehP3V9v0ll37T/Kt3MHGnXhSw4tQDu40MdRu1E2F+mGV/nxb3NAuaBD1Fsc4JRUU3WhxRnOJo64hkKYCWok6NVQlDWywAzDvQI5xEoqxNsvKx0Zb7+/rmOzoh5Ntoxi/rPaTJ9vsWCG2ov2kLMTf37bCzsfs1pNgWKNtK/GdK5+UNfgnr8SrK/Glbdve74bEUvtRj1GWRw2uo+piZwsXSjJBdcOohq5wDegwBCFdRVSoCY2W8JHVgX6QmUxTTG1epYzKDzY6Cxl6CPNMI2psWDleGXZo4XHRyecpk2yu8ywtXecpKwnNdZ7eSBk0x50AkGaLsxe9vZLhHlkyLd45FtEKCNuPyWW7x2Rhhk6m7nvlPvyDTN+48+LuT225b1+djx84fvr4gXFY92IKTvovUY7pv3SMEsdjZistwHj5Qe0eSrhSL66b2H/vnx4/NKqs3vvA5k/tfjHFlsgoxlowxx6rrwgZyC3qU7AMqEKu5uOg+b5X0MplgamYUKnMEFU2eHmUQjG/uJin1CyrfAhuG9+WfMLqD8mhZO2DmeJB/YTW6Gxhz9VDE9WukKIK6oiZaKV9/hTGGChUWrajCK4s6AiJlEOMAN0MxaJt1K/Y2L7pG+F3vYE+XBNcW0A71t79xh/z+e3b60nDMLYYW6Y3bdwwNtqXb99qkJ9AAQ0P1YpQm1Bq7TDsJTOUmnuu3KCYvVxRz2n5kVWcclX8K40UB7gFnpOhHmuNfGGO6tclDe7/6PRoZzg12KhAtJBOu9rtD01pNyRn3NCgHTbC0yGFQ/54oe+hFN+gayKuIMzlOa/l99Yo2NlwNoVQoevzWdXhy3nb7zFsfamh9SuaZrbYMAcnI423l708kvxkV5sWsoVrCpNjtGtJ2vikzhFAK6Ed1RWQPWVFEiZ+GsIpNYxKx9QS596P+Dj/GbNYB8vXs0EHeulqxKCZN1K8YKl30YeUJYkwl7SDL2x2X9gc/reYSZU2jETg/o0sscvTwNchHeC9Z1+96Pid5wtGvmiopd9u9rAlX+/uYcPFRF9IJnzvXbQ9IeIiycJMe07nsJwathJUy96pcrY9mkhE+f+OwubGbt2MiaoVMfDIWVpXITyVqbe32AZTiDm/TUpQcC/hJxlVLyprXVzmokQ9WHcLHTG3Eb7glP/snbcoBxcJ2i45XpqPh/116rKmsHThwvDiQoOLx1uS/F8wQPDNp9HGLcwItOc0QLlQIws/UgL8htxRgHVT8WpN3GlaYIcaN6rcCjeOhsNwD0IB9G1hLfbOy5YRgXtUrXGjPKDe8z14vXFUVSVGOXfu6+IaETs/jqfJ6hgtRwq0oEuNaHqraYOFr6uCtmEayhLqJH4NtWJE6JNwjzygtQVH8Tp8SVN9XviYICtorbvtbQlxoYBWSgERL032JJRtNgmqNZ4LW8SbyhcXPNP2XTz+x/NKatxBDEr++Djy1xxbLtZabNP6Y1/IMo2pBzTULmA7KMjI7cWMf/L8zIBPaarM6xqYa17D/xrndjshQBvkauSl1T0usyhK7wSfruRGEjRXk35vWM4Xal7XgmKSh57ROK9CZFsTK2hIJEkkZN1ocFEvVuOHrnVc1piOx5xg7crT/BmWJLxjvsfvWxJuUf6+BTlHfNNMLQhVw9Nosi/cJ+V+3wvoBvjxs1+jDuAL/vL0F8xg/SxubpNjlInfkolopDmMgsP4pSkm5IADHg5JS6Lea8ikv26rWBuZEGWlhgKgOsO7CHltsKSGUAAR17YVo8VyFCcWUkuD7yaw8Rd9G2PCsSN2JJLJZo2EYaN0RGyjrMN/XzzCfy7p3sQOsI31SUl7DVQ2C7oqJvcBX8e4hnxooL2bGRU1qurqYabre2e2TK7vkbwZVLj60Lx5zau14KcgRVpyRTWU8zdLVEbBu2UoUUVbPlD7oyRzYn6zriPnqWy4t1zuxfjnxAz98l33Hr8Jr+Prra2ptZfzjetTrUpC4GzW9ZuO/xHi7LvyvqxwLTdshzI79u3IhGwMIq7ounfbra8P4Q0nGrGs4QefeHA4FhWaiDr4PTH8apBn7hf/ILYym62lVeUrhjG3XL2y3Jt3MFnMtHJOdXJEF3NU+p8K6iI8yjdUKxlaDuPJOqElnIyY4B7lgo4W/HAKQftKklmRfj+FiEL2/2v+r6gQuMsalueKytDc0TuOzg0Fu1M89GjMeHS3llD3PGrEHg0h5tm9W1Xl1T1qQtstr6p0EXZddstsVSnvPHL3kZ1lpTp7yw5DVJ4MhUXli7r+xYoIh56sCMPU777biC/e0LTFG3Hj7rt16TOeEVWMJQk2yMr1ZcbSVYW0jPjdVaGenkJ/l1xaSBAUcP5YoDsZTl1/WhBAHZEJjmzq8jrUhmpV5Jd/J9O596m9MHrkOIzuumNqy72PVX74aVq+weuHTs22OsnBIZi5Z2b1Si9uKJ9Sd399z8LOrm/fLCuhaw9+/E7qhFz50A3rBZTjy47Wr7h7FjrMuOH/9sRfS8+PsTjLsWHq8IU5V3gUmFj6eyJq6C0wKjPBAgFxRQJxdKfEH/10ENRpzy04qRZXQvBiieBhGdVX0/QMZKtoJ4gUU447VJW2UlUdXVOyBepuVPtBQZ0+cuWtOcTeuVuv3PTPoPyk8bwdXr/bdu21g2Eb/jF8eeO3jX9q/PbycPhyMKAIxuVhGL39stE115/k935szehlt99w552wAZ/dvS5s2+HBtfbfJZOfO3Xqc8mic+sp/vBnCIs08wyDdVENrxMhCGbg1Fxoqk2ux5n3ZyzlFQnp/P5gFnHbYt7QP/qeecPnPzADCuxKrukPo38brg/q4K9Y1g0N5a6z+ZDKQZFrazD7EVGxYXl/cjju5IZTqaRcWVIZKfq/1CD5YgYocCblcyUhPVJ1OC4rMV3URijFMVxETNvEP7jZtX7VAaYGMb7sx2jnc7WOPl5uhz3UHqvNwZEz8gdAuPkWeqrG/9UNtMKYE1t3CBOlUUx3V/RD4yeHgvn0gnhQbGBpNsZ2slP1tlEIqVdNcqYkwxx0MbltGQ+t17jO1/tp0CCmKJgW7UEOkcs9LMSYHpKtdB0U/VoUi8Y1aiIac9RXFxva60P0ilBDB+kdlNLBD35pe93aPud56R6vpa3F8bvQCKNzOtUIUaU6iga16iAUHkLXDfJmLLhQK5U5xXbZeevEu00UXistLZrL/otczrfcPmqXbVdEgGddw7IUN2nfGFtuz9iNm2M32v14YB+NleOeMJWMF7L0sGKYCXh7cKb8hfKN5UsuGfzCwNGBgZmBOwaaZ096saN2whW2FkOiFVNx4+XY0Vhsqw1fde0b7dhMrB8/it+0rJCbpbaZCIXjjeOrB7YODN448IXBSy7Bz9xRnikPHC3f6Z8F8+7TMk812HI2UO9va41ZCl9LBUIGwQ9KLmozLOsrdicRBPkdTo0mXI1CH8olEA36b39Bd9HPDGUP0xWFbH8W/45tu255PQzGqwpVGsTAQ6e4oqsFUz+mhX5Q7f/Yt+/TI3zOpUezz3/x5T391R+EtGNcxcT7yw8NgFoIh181IFxfvm9LhP1/pOgdRAB4nGNgZGBgAGK59zcM4vltvjJwM78AijDcWnbCCUb///o/i6WCOQjI5WBgAokCAIBSDfkAeJxjYGRgYA76n8XAwFL2/+v/rywVDEARFBAKAKHzBvR4nF2PWxnDMAiFczMQJRMQJd37LFRAlSBgSiagGiKgfWwZcJql2cP5gHCAP7E6FwlKD+aode4KReLEh3+NMVbe1RsWzMKnOyT/QLaroqdzqlBwY/AQZk2W8/mrGwvdfXJ/6jNpZk7z1c+tL5LcrXj3m+xsO0gYTOBRPuPKfxx06z359O/+X+NWznr5ls74BZYiU8MAAAAAAABQALYBMAFoAbIB+gIkArADNgOaBBIEXATGBTIFtAX8Bk4G/AdEB7YH9ghKCKAI8gkaCUIJZAmKCcAKAApACnYKugsAC0YLigvyDFwM8g2eDmIO5g9qD/oQXhEgEYYR5BJKEpgTJBNuE7IUChRiFL4VWhWmFigWihccF4YYWhieGMYY7BkKGU4ZeBmsGd4aHBpaGqAa0hsuG/IcdBzYHVAdnh4AHtofOwABAAAAVQBtAAYAAAAAAAIAIAAwAHMAAAB2C3AAAAAAeJx1kN9K40AUh39jq4tWvHBBvPNcSUWaxoAseOVS/HMtS+8EY5omqelMmUwrfQbfwn0GX2ffwzt/SYelCE2Y5DvfnDMzZwAc4h8UVs8lx4oV9hmteAs/8Ntzi/7ec5v8x/M2OnjyvEP/4nkP53j13MFPvHMF1d5lNMGHZ4VjdeJ5Cwfql+cW/Y3nNvnR8zaO1NzzDv2b5z0M1V/PHZyqz4GZLW2R5U66gzOJwiiU56UYqkLHpcRzlxtbybWMjXZpWZogMdMq6Y1M0isSo6uHNJuXsV1X6zxMbVUYLRdBuK7vUp3a2KWjerdqkUXOjWVszVRu/T4ys2aSJi7InZtd9fvr+2MAgxmWsCiQIYeDoEt7xn+EsBmCZ2YIM1dZBTRilDQx5qzIm5mK8TXHmJGmTZlRkgMk/E45n6CHEbn+F43VtA/MzLhOydXsxqxNfsjquqpoYsEF9ws3Zt8xWzcVcXPC0f/eKix4iojWsYO6C9ucWnD7rR/hfdVzE5qEPmhuzdFeoc93Q/9frlmO1QAAAHicbZJXl5swEIV9Ddjgssmm994T0nvvvSebd1kWWLGQdCSxxPn1QWAnL9E53Pk0Gi6DznS6nXYNOv9fG+giQIgIPfQRI8EAQ4wwxhq2YCvWsQ3bsQM7sQu7sQd7sQ/7cQAHcQiHcQRHcQzHcQIncQqncQZncQ7ncQEpLuISLuMKruIaruMGbuIWbuMO7uIe7uMBHuIRHuMJnuIZnuMFXuIVXuMN3uId3uMDPuITPuMLvuIbvmMDPzqhdcQMvKSs0G7R15y60rCumvcokZSJUIvSRgWXpQ1nTOiRl5RyQwWbhlxmauRllRkT55h0XMmUCLf+b7c8T/5mYsHlPGW/XCgUnSdeUqWZTATPZ25SikngSB7Wj40nSs0LYuZrK2i7jQzTYtHPlKmImcZTVcl0yk0sWOY8JMZbeeqVukk0Je1XfI2nQVvksV9X+dg6TXjeOtWwdKrJO9WhS6uA0iohxqjKprSKnCF2Nmy07a5xEYpM61eakAml9SJQWRZQlYcFk2VkZ8SwgVN5LlhanyQrlBGdMTofNtoajto7bDfDqXKrS42ZEFxbbscrSDeZccGkzKNM1A1FBck5jYl1zHA77/9Wqki5jJuoShdmSrrQKuMSL6nvvN9QqesBIItIk9KyelqU7me1TTqp2phVsVOpHyDXq4HJacR+MuoGm0qURfNLwyV602TJpQ5sKcNCKRmwBetZRgydBZrL0I9Fz9TTwFyn8wfP8f+/AHicY/DewXAiKGIjI2Nf5AbGnRwMHAzJBRsZWJ02MTAyaIEYm7mYGDkgLD4GMIvNaRfTAaA0J5DN7rSLwQHCZmZw2ajC2BEYscGhI2Ijc4rLRjUQbxdHAwMji0NHckgESEkkEGzmYWLk0drB+L91A0vvRiYGFwAMdiP0AAA=') format('woff');
}</style>

<!-- CORE STYLES -->
<style id="style-core" type="text/css">a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{border:none;margin:0;padding:0}article,aside,details,figure,footer,header,hgroup,nav,section{display:block}mark,time{display:inline}body{background-color:#fff;color:#111;font-family:Frutiger,"Frutiger Linotype",Univers,"Segoe UI","Myriad Pro",Myriad,"DejaVu Sans Condensed","Liberation Sans","Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px;line-height:1.6;margin:0 0 0 25.5em;max-width:69em;padding:20px}body>:first-child{margin-top:0!important}body>:last-child{margin-bottom:0!important}blockquote,dl,ol,p,pre,table,ul{margin:15px 0}h1,h2,h3,h4,h5,h6{font-weight:700;margin:1.5em 0 .75em;padding:0;position:relative}body>h1[id],body>h2[id],body>h3[id],body>h4[id],body>h5[id],body>h6[id]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}h1{background-color:#ccc;border-radius:3px;font-size:2em;margin:2em -.5em 1em;padding:.5em 0 .5em .5em;position:relative}body>h1:first-of-type{margin-top:0}h2{border-top:2px solid #aaa;font-size:1.71em;padding-top:.75em}h3{border-top:1px dashed #aaa;font-size:1.28em;padding-top:.5em}h4{font-size:1.14em}h5{font-size:1em}h6{color:#777;font-size:1em}h1+h2{border:none;padding-top:0}h1+h3,h2+h3{border:none}h1+p,h2+p,h3+p,h4+p,h5+p,h6+p{margin-top:10px}h1[id]>span>.child,h2[id]>span>.child,h3[id]>span>.child,h4[id]>span>.child,h5[id]>span>.child,h6[id]>span>.child{display:inline-block;margin-left:1.5em}h4>em,h4>i,h5>em,h5>i{font-weight:400}a{color:#26c;text-decoration:none}a:hover{text-decoration:underline}a[href*="-fn"]{font-size:.83em;vertical-align:super}a[href*="-fn"]::before{content:"["}a[href*="-fn"]::after{content:"]"}a.permalink{opacity:.25}a.permalink::before{content:"\e852"}h1>a.permalink{opacity:.1}h1:hover>a.permalink,h1>a.permalink:focus,h2:hover>a.permalink,h2>a.permalink:focus,h3:hover>a.permalink,h3>a.permalink:focus,h4:hover>a.permalink,h4>a.permalink:focus,h5:hover>a.permalink,h5>a.permalink:focus,h6:hover>a.permalink,h6>a.permalink:focus{opacity:1;text-decoration:none}body a code,body a var{color:inherit}ol,ul{margin-left:30px}ol li ol:first-of-type,ol li ul:first-of-type,ol li>:first-child,ul li ol:first-of-type,ul li ul:first-of-type,ul li>:first-child{margin-top:0}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}ol.keys,ol.params,ul.keys,ul.params{list-style:none;margin-left:15px}ol.note,ul.note{margin-left:2em}ol.asnote,ul.asnote{margin-top:0;margin-bottom:0}dl{margin-left:15px}dl dt{font-style:normal;font-weight:700;padding:0;margin:15px 0 5px}dl dt:first-child{padding:0}dl dt>:first-child{margin-top:0}dl dt>:last-child{margin-bottom:0}dl dd{margin:0 15px 15px}dl dd>:first-child{margin-top:0}dl dd>:last-child{margin-bottom:0}dl.keys dt,dl.params dt{margin:0}dl.keys dd,dl.params dd{margin-bottom:0}[role=note]{background-color:#f8f8f8;border:1px solid #ccc;border-left:2em solid #ec0;border-radius:3px;margin:15px;padding:6px 10px;position:relative}[role=note]::before{content:"\e80a";display:block;left:-1.6em;font-family:sc-doc-icons;font-size:1.25em;font-style:normal;font-variant:normal;font-weight:400;line-height:1.3em;position:absolute;speak:none;text-align:center;text-decoration:inherit;text-rendering:auto;text-transform:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1.6em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[role=note].see,[role=note].tip{border-left-color:#7c0}[role=note].tip::before{content:"\e811"}[role=note].see::before{content:"\e84f"}[role=note].warning{border-left-color:#f55}[role=note].warning::before{content:"\e80d"}[role=note]>b:first-child{text-transform:uppercase}[role=note]>b:first-child+div,[role=note]>b:first-child+p{display:inline}[role=note]>div:last-child,[role=note]>p:last-child{margin-bottom:0}code,kbd,pre,samp,var{font-family:Consolas,"Andale Mono WT","Andale Mono","Lucida Console","Lucida Sans Typewriter","DejaVu Sans Mono","Bitstream Vera Sans Mono","Liberation Mono","Nimbus Mono L",Monaco,"Courier New",Courier,monospace}code,kbd,samp,var{background-color:#f8f8f8;border:1px solid #eaeaea;border-radius:3px;color:#9400d3;margin:0;padding:0;white-space:nowrap}pre{background-color:#f8f8f8;border:1px solid #ccc;border-left:4px solid #88f;border-radius:3px;line-height:19px;margin:0 15px;overflow:auto;padding:6px 10px}pre+pre{margin-top:.5em}h1 code,h1 kbd,h1 samp,h1 var,h2 code,h2 kbd,h2 samp,h2 var,pre code,pre kbd,pre samp,pre var,pre>code,pre>kbd,pre>samp,pre>var{background-color:transparent;border:none;color:#111}h1 code,h1 kbd,h1 samp,h1 var,pre>code,pre>kbd,pre>samp,pre>var{margin:0;padding:0;white-space:pre}blockquote{padding:0 30px}blockquote>:first-child{margin-top:0}blockquote>:last-child{margin-bottom:0}hr{clear:both;margin:15px 0;height:0;overflow:hidden;border:none;background:0 0;border-top:1px solid #aaa;padding:0}table{border-collapse:collapse;border-spacing:0;margin:0 15px}table th{font-weight:700}table td,table th{border:1px solid #ccc;padding:3px 7px}table td code{border:none;background-color:transparent}table td p{margin-bottom:0}table td p:first-child{margin-top:0}table td pre{margin:0;padding:0;border:none;background-color:transparent}table tr{border-top:1px solid #ccc;background-color:#fff}table tr:nth-child(2n){background-color:#f8f8f8}img{max-width:100%}abbr,span.info{border-bottom:1px dashed #000;cursor:help;font-variant:none;text-decoration:none}.key,.param,.return{white-space:nowrap}.key>code,.key>var,.param>code,.param>var,.return>code,.return>var,code.key,code.param,code.return,var.key,var.param,var.return{color:#9400d3;font-style:normal;font-weight:700}.key>em,.key>i,.param>em,.param>i,.return>em,.return>i,em.key,em.param,em.return,i.key,i.param,i.return{font-weight:400;font-style:italic;opacity:.66}.list-table{margin-top:0}.status{border:1px solid #ccc;border-radius:3px;float:right;font-size:.83em;padding:0 .4em;white-space:nowrap}.status.warn{border-color:red}.warn{color:red}.deprecated{opacity:.66;text-decoration:line-through}.icon,a.permalink,nav.enhanced>h2>.child-heading::before,nav.enhanced>header>#controls>a#lists-collapse::before,nav.enhanced>header>#controls>a#lists-expand::before,nav.enhanced>header>#controls>button#color-toggle::after{display:inline-block;font-family:sc-doc-icons;font-style:normal;font-variant:normal;font-weight:400;line-height:1em;speak:none;text-align:center;text-decoration:inherit;text-rendering:auto;text-transform:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon.margin-left{margin-left:.25em}.icon.margin-right{margin-right:.25em}.icon.cancel::before{content:"\e804"}.icon.plus::before{content:"\e805"}.icon.trash::before{content:"\e827"}.icon.toggle-off::before{content:"\e830"}.icon.bug::before{content:"\e838"}.icon.magic::before{content:"\e83a"}.icon.play::before{content:"\e842"}.icon.link::before{content:"\e852"}.icon.rocket::before{content:"\e853"}.icon.list::before{content:"\e854"}.multiline{line-height:1.2}.nobr{white-space:nowrap}.displays h1,.displays h2,.displays h3,.displays h4,.displays h5,.displays h6{background-color:inherit;border:none;color:inherit;display:block;font-weight:700;margin:0;padding:0;position:relative}.displays h1{font-size:2em;margin:.67em 0}.displays h2{font-size:1.5em;margin:.83em 0}.displays h3{font-size:1.17em;margin:1em 0}.displays h4{font-size:1em;margin:1.33em 0}.displays h5{font-size:.83em;margin:1.67em 0}.displays h6{font-size:.67em;margin:2.33em 0}.displays hr{display:block;height:1px;border:none;border-top:1px solid #111;margin:1em 0;padding:0}nav{border-right:1px solid #ccc;bottom:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:0;overflow-x:hidden;overflow-y:scroll;padding:1em;position:fixed;top:0;width:25em}nav>header{border-bottom:3px dotted #aaa;padding-bottom:.5em;text-align:center}nav>header>div:not(:last-child){font-size:.75rem;opacity:.66}nav #header-logo{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAYAAAA4TnrqAAAAB3RJTUUH5AMQDQ4vazJd/wAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAN1wAADdcBQiibeAAAAzdJREFUeNrt3M1rGkEUAHDb/jO9tce20B5bUKOiLpqIH/9Gbh4CvQQCnsV6r7d4rh9gY8EYjYk5qQcPBmM8iB6E7E7nyS5Yu36s7uzne/BYFnZ25v2cdZaFXYfDgHF0dPTWgbE5XC7XN6/XW6VYxOPxXNHtV1SRQfL5fH8A6fj4WEilUiQcDguwL+LZHu0VnT0cxbgHlFgsxufzeTKbzch8Pl9sYT8ajfIi2j0cD+0QSURaTQkNjrMT2gKJXm7tXZBsiZZMJl+73e7Yvkjb0OC8pkdTG2kXNOgP+kUkK6FpjWRKNI7j3iwjxeNxTZFMgSYh0VXpwQhI69BgXMtoMG7dkBKJhKGQtqHBuJmjycwkwchI69Dgx2WGZnakDTNNUA3NakjM0GjDTzTrcJJIJCLkcjkymUwsgbSaUBfUd3JyIqHVoX4lD9++Q8N0Ov1oVSQ5tGw2+wh1Q/2KsarVKmk0GrdPT091K0PRS7L+/Px8OxgMyEFYtVptkVZEk5BGoxGBVA1rBe3GSkjMsMyMRpFu5JCYY5kJbRuSZlhGRtsVSXMsI6EpRdINaxltOBw2zICkO5aUzWbzmhZwxxJpOp02DkEyDBZLNDqT7sbj8fWhSIbDUhNNbSTDYh2CxgrJ8FhK0FgjmQZrE5pWSKbDEpNvtVq/KVCVwl3RAnitoMyItch2u13UEgmxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEMsaWOVy2VZYvV5POZbH4zmFRhzHvVxcXJBKpWJprH6/TzKZDAmFQi/iZxJOFb044Ha7P9KGl9DY7/fzZ2dnpFQqWQqr2+0S+CxCIBDgxRl1CXXv/VqKHmissVRH0hONFRZzJD3Q1MbSHElLNLWwOp3Of0g0P+j2+i90TleP/DJasVjUFWsVSRyffkgs0fbFMjwSCzSlWCtIguGRNqAJStF2xTI9khpo27AkpGAwKCH9dDqd7y3zAR8oBoraBW0dlhwSXZXfOawaUNw2tFUs2yEpQZOwbI8k84TjC4UowOoJf9Tn5+ekUChU0+k0PPWQbgF+wXEOjH/QiuKdNpGQXC7XZ9TZjPYDkTDsE38BhSF0jgiMpUIAAAAASUVORK5CYII=");background-repeat:no-repeat;height:75px;margin:0 auto;width:75px}nav h1{background-color:transparent;border:none;border-radius:0;font-size:1.2em;font-weight:700;margin:10px 0 5px;padding:0}nav h2{border:none;border-bottom:1px solid #ccc;font-size:1em;margin:1em 0 .5em;padding-top:0}nav li ol,nav li ul,nav ol,nav ul{margin:0 0 0 15px}nav ul{list-style:none}nav>ol,nav>ul{margin-left:10px}nav>hr{border-top-style:dotted;border-top-width:3px;margin:18px 0 10px}nav>div:last-child{height:5em}nav.enhanced>header>#controls{text-align:right}nav.enhanced>header>#controls>*{margin-right:1.5em}nav.enhanced>header>#controls>:last-child{margin-right:.5em}nav.enhanced>header>#controls>button{background-color:transparent;border:none;color:#26c;cursor:pointer;font:inherit;font-weight:700;padding:0;text-decoration:none;text-transform:none;white-space:nowrap}nav.enhanced>header>#controls>button#color-toggle{float:left}nav.enhanced>header>#controls>button#color-toggle::after{color:green;content:"\00a0\e831"}nav.enhanced>header>#controls>button#color-toggle.disabled::after{color:#8b0000;content:"\00a0\e830"}nav.enhanced>header>#controls>a{cursor:pointer;text-decoration:none}nav.enhanced>header>#controls>a#lists-collapse::before{content:"\e806"}nav.enhanced>header>#controls>a#lists-expand::before{content:"\e805"}nav.enhanced>h2{position:relative}nav.enhanced>h2>.child-heading{margin-left:.25em}nav.enhanced>h2>.child-heading::before{color:#999;content:"\e81a"}nav.enhanced>h2>a.list-toggle{cursor:pointer;display:inline-block;font-family:sc-doc-icons;font-style:normal;font-variant:normal;font-weight:700;height:1.4em;position:absolute;right:.2em;speak:none;text-align:center;text-decoration:none;text-rendering:auto;text-transform:none;-webkit-transition:-webkit-transform 62.5ms linear;transition:-webkit-transform 62.5ms linear;-o-transition:-o-transform 62.5ms linear;transition:transform 62.5ms linear;transition:transform 62.5ms linear,-webkit-transform 62.5ms linear,-o-transform 62.5ms linear;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1.4em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}nav.enhanced>h2>a.list-toggle:hover{text-decoration:none}nav.enhanced>h2>a.list-toggle::before{content:"\e806"}nav.enhanced>h2>a.list-toggle.collapsed::before{content:"\e805"}nav.enhanced>ul.collapsed{display:none}html.disable-code-color .key>code,html.disable-code-color .key>var,html.disable-code-color .param>code,html.disable-code-color .param>var,html.disable-code-color .return>code,html.disable-code-color .return>var,html.disable-code-color code,html.disable-code-color code.key,html.disable-code-color code.param,html.disable-code-color code.return,html.disable-code-color kbd,html.disable-code-color samp,html.disable-code-color var,html.disable-code-color var.key,html.disable-code-color var.param,html.disable-code-color var.return{color:inherit}::-webkit-scrollbar{background-color:#ccc;width:8px}::-webkit-scrollbar-thumb{background-color:#999;border:1px solid #ccc}*{scrollbar-color:#999 #ccc;scrollbar-width:thin}@media screen and (max-width:1280px){body{margin-left:23.5em}nav{width:23em}}@media screen and (max-width:1024px){body{margin-left:22.5em}nav{width:22em}}@media screen and (max-width:800px){body{margin:1em;padding:0}nav{border:none;-webkit-box-sizing:content-box;box-sizing:content-box;overflow:auto;padding:0;position:relative;width:auto}nav>hr{display:none}body>h1{margin-left:-.25em;margin-right:-.25em}}</style>
</head>
<body>
<span id="top"></span>
<!-- ******************************************************************************************* -->
<!-- ***********************************************************************************************
	Table of Contents
************************************************************************************************ -->
<nav role="navigation" class="enhanced">
<header role="banner">
<div id="header-logo"></div>
<h1>SugarCube v2 Documentation</h1>
<div><tt>2.36.1</tt> (<time datetime="2021-12-22T05:50:04Z">2021-12-22</time>)</div>
<div>Find in page: <kbd>CTRL</kbd>+<kbd>F</kbd> or <kbd>F3</kbd></div>
<div id="controls"><button id="color-toggle" title="Disable code color" aria-label="Disable code color" tabindex="0" class="">Code Color</button><a id="lists-collapse" title="Collapse all" aria-label="Collapse all" tabindex="0"></a><a id="lists-expand" title="Expand all" aria-label="Expand all" tabindex="0"></a></div></header>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#introduction">Introduction</a></h2>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#markup">Markup</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-markup" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-naked-variable">Naked Variable</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-link">Link</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-image">Image</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-html-attribute">HTML Attribute</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-line-continuation">Line Continuation</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-heading">Heading</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-style">Style</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-list">List</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-blockquote">Blockquote</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-code">Code</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-horizontal-rule">Horizontal Rule</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-verbatim-text">Verbatim Text</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-verbatim-html">Verbatim HTML</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-custom-style">Custom Style</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-template">Template</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-comment">Comment</a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript">TwineScript</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-twinescript" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-variables">Variables</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-supported-types">Supported Types</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-expressions">Expressions</a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#macros">Macros</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-macros" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-arguments">Macro Arguments</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-variables">Variables Macros</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-capture"><code>&lt;&lt;capture&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-set"><code>&lt;&lt;set&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-unset"><code>&lt;&lt;unset&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-scripting">Scripting Macros</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-run"><code>&lt;&lt;run&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-script"><code>&lt;&lt;script&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-display">Display Macros</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-equal"><code>&lt;&lt;=&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-hyphen"><code>&lt;&lt;-&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-include"><code>&lt;&lt;include&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-nobr"><code>&lt;&lt;nobr&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-print"><code>&lt;&lt;print&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-silently"><code>&lt;&lt;silently&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-type"><code>&lt;&lt;type&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-control">Control Macros</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-if"><code>&lt;&lt;if&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-for"><code>&lt;&lt;for&gt;&gt;</code></a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-break"><code>&lt;&lt;break&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-continue"><code>&lt;&lt;continue&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-switch"><code>&lt;&lt;switch&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive">Interactive Macros</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-button"><code>&lt;&lt;button&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-checkbox"><code>&lt;&lt;checkbox&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-cycle"><code>&lt;&lt;cycle&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-link"><code>&lt;&lt;link&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-linkappend"><code>&lt;&lt;linkappend&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-linkprepend"><code>&lt;&lt;linkprepend&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-linkreplace"><code>&lt;&lt;linkreplace&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-listbox"><code>&lt;&lt;listbox&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-numberbox"><code>&lt;&lt;numberbox&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-radiobutton"><code>&lt;&lt;radiobutton&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-textarea"><code>&lt;&lt;textarea&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-textbox"><code>&lt;&lt;textbox&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-links">Links Macros</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-actions"><code>&lt;&lt;actions&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-back"><code>&lt;&lt;back&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-choice"><code>&lt;&lt;choice&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-return"><code>&lt;&lt;return&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-dom">DOM Macros</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-addclass"><code>&lt;&lt;addclass&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-append"><code>&lt;&lt;append&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-copy"><code>&lt;&lt;copy&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-prepend"><code>&lt;&lt;prepend&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-remove"><code>&lt;&lt;remove&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-removeclass"><code>&lt;&lt;removeclass&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-replace"><code>&lt;&lt;replace&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-toggleclass"><code>&lt;&lt;toggleclass&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-audio">Audio Macros</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-audio"><code>&lt;&lt;audio&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-cacheaudio"><code>&lt;&lt;cacheaudio&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-createaudiogroup"><code>&lt;&lt;createaudiogroup&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-createplaylist"><code>&lt;&lt;createplaylist&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-masteraudio"><code>&lt;&lt;masteraudio&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-playlist"><code>&lt;&lt;playlist&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-removeaudiogroup"><code>&lt;&lt;removeaudiogroup&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-removeplaylist"><code>&lt;&lt;removeplaylist&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-waitforaudio"><code>&lt;&lt;waitforaudio&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-miscellaneous">Miscellaneous Macros</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-done"><code>&lt;&lt;done&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-goto"><code>&lt;&lt;goto&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-repeat"><code>&lt;&lt;repeat&gt;&gt;</code></a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-stop"><code>&lt;&lt;stop&gt;&gt;</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-timed"><code>&lt;&lt;timed&gt;&gt;</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-widget"><code>&lt;&lt;widget&gt;&gt;</code></a></li>
</ul>
</li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#functions">Functions</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-functions" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-clone"><code>clone()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-either"><code>either()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-forget"><code>forget()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-hasvisited"><code>hasVisited()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-lastvisited"><code>lastVisited()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-importscripts"><code>importScripts()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-importstyles"><code>importStyles()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-memorize"><code>memorize()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-passage"><code>passage()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-previous"><code>previous()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-random"><code>random()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-randomfloat"><code>randomFloat()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-recall"><code>recall()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-setpageelement"><code>setPageElement()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-tags"><code>tags()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-temporary"><code>temporary()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-time"><code>time()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-turns"><code>turns()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-variables"><code>variables()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-visited"><code>visited()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-visitedtags"><code>visitedTags()</code></a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#methods">Methods</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-methods" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array">Array Methods</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-concat"><code>&lt;Array&gt;.concat()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-concatunique"><code>&lt;Array&gt;.concatUnique()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-count"><code>&lt;Array&gt;.count()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-countwith"><code>&lt;Array&gt;.countWith()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-delete"><code>&lt;Array&gt;.delete()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-deleteat"><code>&lt;Array&gt;.deleteAt()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-deletewith"><code>&lt;Array&gt;.deleteWith()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-first"><code>&lt;Array&gt;.first()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-flat"><code>&lt;Array&gt;.flat()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-flatmap"><code>&lt;Array&gt;.flatMap()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-includes"><code>&lt;Array&gt;.includes()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-includesall"><code>&lt;Array&gt;.includesAll()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-includesany"><code>&lt;Array&gt;.includesAny()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-last"><code>&lt;Array&gt;.last()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-pluck"><code>&lt;Array&gt;.pluck()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-pluckmany"><code>&lt;Array&gt;.pluckMany()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-pop"><code>&lt;Array&gt;.pop()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-push"><code>&lt;Array&gt;.push()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-pushunique"><code>&lt;Array&gt;.pushUnique()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-random"><code>&lt;Array&gt;.random()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-randommany"><code>&lt;Array&gt;.randomMany()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-shift"><code>&lt;Array&gt;.shift()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-shuffle"><code>&lt;Array&gt;.shuffle()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-unshift"><code>&lt;Array&gt;.unshift()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-unshiftunique"><code>&lt;Array&gt;.unshiftUnique()</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-json">JSON Methods</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-json-method-revivewrapper"><code>JSON.reviveWrapper()</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery">jQuery Methods</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery-prototype-method-ariaclick"><code>&lt;jQuery&gt;.ariaClick()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery-prototype-method-ariadisabled"><code>&lt;jQuery&gt;.ariaDisabled()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery-prototype-method-ariaisdisabled"><code>&lt;jQuery&gt;.ariaIsDisabled()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery-method-wiki"><code>jQuery.wiki()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery-prototype-method-wiki"><code>&lt;jQuery&gt;.wiki()</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-math">Math Methods</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-math-method-clamp"><code>Math.clamp()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-math-method-trunc"><code>Math.trunc()</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-number">Number Methods</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-number-prototype-method-clamp"><code>&lt;Number&gt;.clamp()</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-regexp">RegExp Methods</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-regexp-method-escape"><code>RegExp.escape()</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string">String Methods</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-prototype-method-count"><code>&lt;String&gt;.count()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-prototype-method-first"><code>&lt;String&gt;.first()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-method-format"><code>String.format()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-prototype-method-includes"><code>&lt;String&gt;.includes()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-prototype-method-last"><code>&lt;String&gt;.last()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-prototype-method-tolocaleupperfirst"><code>&lt;String&gt;.toLocaleUpperFirst()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-prototype-method-toupperfirst"><code>&lt;String&gt;.toUpperFirst()</code></a></li>
</ul>
</li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#special-names">Special Names</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-special-names" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passages">Passage Names</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-passagedone"><code>PassageDone</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-passagefooter"><code>PassageFooter</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-passageheader"><code>PassageHeader</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-passageready"><code>PassageReady</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-start"><code>Start</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyauthor"><code>StoryAuthor</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storybanner"><code>StoryBanner</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storycaption"><code>StoryCaption</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storydisplaytitle"><code>StoryDisplayTitle</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyinit"><code>StoryInit</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyinterface"><code>StoryInterface</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storymenu"><code>StoryMenu</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storysettings"><code>StorySettings</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyshare"><code>StoryShare</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storysubtitle"><code>StorySubtitle</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storytitle"><code>StoryTitle</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tags">Tag Names</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-bookmark"><code>bookmark</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-nobr"><code>nobr</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-init"><code>init</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-script"><code>script</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-stylesheet"><code>stylesheet</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-twine-audio"><code>Twine.audio</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-twine-image"><code>Twine.image</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-twine-video"><code>Twine.video</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-twine-vtt"><code>Twine.vtt</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-widget"><code>widget</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variables">Variable Names</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-dollar"><code>$</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-underscore-args"><code>_args</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-underscore-contents"><code>_contents</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-config"><code>Config</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-dialog"><code>Dialog</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-engine"><code>Engine</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-jquery"><code>jQuery</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-l10nstrings"><code>l10nStrings</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-fullscreen"><code>Fullscreen</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-loadscreen"><code>LoadScreen</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-macro"><code>Macro</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-passage"><code>Passage</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-save"><code>Save</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-setting"><code>Setting</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-settings"><code>settings</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-setup"><code>setup</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-simpleaudio"><code>SimpleAudio</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-state"><code>State</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-story"><code>Story</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-template"><code>Template</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-ui"><code>UI</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-uibar"><code>UIBar</code></a></li>
</ul>
</li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#css">CSS</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-css" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#css-passage-conversions">Passage Conversions</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#css-example-selectors">Example Selectors</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#css-warnings">Warnings</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#css-built-ins">Built-in Stylesheets</a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#html">HTML</a></h2>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#events">Events</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-events" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-dialog"><code>Dialog</code> Events</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-dialog-event-dialogclosed"><code>:dialogclosed</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-dialog-event-dialogclosing"><code>:dialogclosing</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-dialog-event-dialogopened"><code>:dialogopened</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-dialog-event-dialogopening"><code>:dialogopening</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation">Navigation Events</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passageinit"><code>:passageinit</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagestart"><code>:passagestart</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagerender"><code>:passagerender</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagedisplay"><code>:passagedisplay</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passageend"><code>:passageend</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-simpleaudio"><code>SimpleAudio</code> Events</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-simpleaudio-event-faded"><code>:faded</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-simpleaudio-event-fading"><code>:fading</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-simpleaudio-event-stopped"><code>:stopped</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-system">System Events</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-system-event-storyready"><code>:storyready</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-system-event-enginerestart"><code>:enginerestart</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-type-macro"><code>&lt;&lt;type&gt;&gt;</code> Events</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-type-macro-event-typingcomplete"><code>:typingcomplete</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-type-macro-event-typingstart"><code>:typingstart</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#events-type-macro-event-typingstop"><code>:typingstop</code></a></li>
</ul>
</li>
</ul>
<hr>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api"><code>Config</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-config-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-audio">Audio Settings</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-audio-pauseonfadetozero"><code>Config.audio.pauseOnFadeToZero</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-audio-preloadmetadata"><code>Config.audio.preloadMetadata</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-history">History Settings</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-history-controls"><code>Config.history.controls</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-history-maxstates"><code>Config.history.maxStates</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-macros">Macros Settings</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-macros-ifassignmenterror"><code>Config.macros.ifAssignmentError</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-macros-maxloopiterations"><code>Config.macros.maxLoopIterations</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-macros-typeskipkey"><code>Config.macros.typeSkipKey</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-macros-typevisitedpassages"><code>Config.macros.typeVisitedPassages</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-navigation">Navigation Settings</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-navigation-override"><code>Config.navigation.override</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-passages">Passages Settings</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-descriptions"><code>Config.passages.descriptions</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-displaytitles"><code>Config.passages.displayTitles</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-nobr"><code>Config.passages.nobr</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-onprocess"><code>Config.passages.onProcess</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-start"><code>Config.passages.start</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-transitionout"><code>Config.passages.transitionOut</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-saves">Saves Settings</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-autoload"><code>Config.saves.autoload</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-autosave"><code>Config.saves.autosave</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-id"><code>Config.saves.id</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-isallowed"><code>Config.saves.isAllowed</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-slots"><code>Config.saves.slots</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-trydiskonmobile"><code>Config.saves.tryDiskOnMobile</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-version"><code>Config.saves.version</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-ui">UI Settings</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-ui-stowbarinitially"><code>Config.ui.stowBarInitially</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-ui-updatestoryelements"><code>Config.ui.updateStoryElements</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-miscellaneous">Miscellaneous Settings</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-addvisitedlinkclass"><code>Config.addVisitedLinkClass</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-cleanupwikifieroutput"><code>Config.cleanupWikifierOutput</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-debug"><code>Config.debug</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-loaddelay"><code>Config.loadDelay</code></a></li>
</ul>
</li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api"><code>Dialog</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-dialog-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-append"><code>Dialog.append()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-body"><code>Dialog.body()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-close"><code>Dialog.close()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-isopen"><code>Dialog.isOpen()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-open"><code>Dialog.open()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-setup"><code>Dialog.setup()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-wiki"><code>Dialog.wiki()</code></a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api"><code>Engine</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-engine-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-getter-lastplay"><code>Engine.lastPlay</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-getter-state"><code>Engine.state</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-backward"><code>Engine.backward()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-forward"><code>Engine.forward()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-go"><code>Engine.go()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-goto"><code>Engine.goTo()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-isidle"><code>Engine.isIdle()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-isplaying"><code>Engine.isPlaying()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-isrendering"><code>Engine.isRendering()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-play"><code>Engine.play()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-restart"><code>Engine.restart()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-show"><code>Engine.show()</code></a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api"><code>Fullscreen</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-fullscreen-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-getter-element"><code>Fullscreen.element</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-isenabled"><code>Fullscreen.isEnabled()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-isfullscreen"><code>Fullscreen.isFullscreen()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-request"><code>Fullscreen.request()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-exit"><code>Fullscreen.exit()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-toggle"><code>Fullscreen.toggle()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-onchange"><code>Fullscreen.onChange()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-offchange"><code>Fullscreen.offChange()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-onerror"><code>Fullscreen.onError()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-offerror"><code>Fullscreen.offError()</code></a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#loadscreen-api"><code>LoadScreen</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-loadscreen-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#loadscreen-api-method-lock"><code>LoadScreen.lock()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#loadscreen-api-method-unlock"><code>LoadScreen.unlock()</code></a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api"><code>Macro</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-macro-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api-method-add"><code>Macro.add()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api-method-delete"><code>Macro.delete()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api-method-get"><code>Macro.get()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api-method-has"><code>Macro.has()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api-method-tags-get"><code>Macro.tags.get()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api-method-tags-has"><code>Macro.tags.has()</code></a></li>
</ul>
<h2><i class="child-heading" aria-hidden="true"></i> <a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api"><code>MacroContext</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-macrocontext-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-args"><code>&lt;MacroContext&gt;.args</code></a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-args-full"><code>&lt;MacroContext&gt;.args.full</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-args-raw"><code>&lt;MacroContext&gt;.args.raw</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-name"><code>&lt;MacroContext&gt;.name</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-output"><code>&lt;MacroContext&gt;.output</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-parent"><code>&lt;MacroContext&gt;.parent</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-parser"><code>&lt;MacroContext&gt;.parser</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-payload"><code>&lt;MacroContext&gt;.payload</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-self"><code>&lt;MacroContext&gt;.self</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-method-contexthas"><code>&lt;MacroContext&gt;.contextHas()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-method-contextselect"><code>&lt;MacroContext&gt;.contextSelect()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-method-contextselectall"><code>&lt;MacroContext&gt;.contextSelectAll()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-method-createshadowwrapper"><code>&lt;MacroContext&gt;.createShadowWrapper()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-method-error"><code>&lt;MacroContext&gt;.error()</code></a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api"><code>Passage</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-passage-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api-prototype-getter-domid"><code>&lt;Passage&gt;.domId</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api-prototype-getter-tags"><code>&lt;Passage&gt;.tags</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api-prototype-getter-text"><code>&lt;Passage&gt;.text</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api-prototype-getter-title"><code>&lt;Passage&gt;.title</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api-prototype-method-description"><code>&lt;Passage&gt;.description()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api-prototype-method-processtext"><code>&lt;Passage&gt;.processText()</code></a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api"><code>Save</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-save-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-save-objects">Save Objects</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-general">General</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-clear"><code>Save.clear()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-get"><code>Save.get()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-ok"><code>Save.ok()</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-slots">Slots</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-getter-slots-length"><code>Save.slots.length</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-count"><code>Save.slots.count()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-delete"><code>Save.slots.delete()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-get"><code>Save.slots.get()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-has"><code>Save.slots.has()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-isempty"><code>Save.slots.isEmpty()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-load"><code>Save.slots.load()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-ok"><code>Save.slots.ok()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-save"><code>Save.slots.save()</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-autosave">Autosave</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-autosave-delete"><code>Save.autosave.delete()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-autosave-get"><code>Save.autosave.get()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-autosave-has"><code>Save.autosave.has()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-autosave-load"><code>Save.autosave.load()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-autosave-ok"><code>Save.autosave.ok()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-autosave-save"><code>Save.autosave.save()</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-disk">Disk</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-export"><code>Save.export()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-import"><code>Save.import()</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-serialization">Serialization</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-serialize"><code>Save.serialize()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-deserialize"><code>Save.deserialize()</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-events">Events</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-onload-add"><code>Save.onLoad.add()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-onload-clear"><code>Save.onLoad.clear()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-onload-delete"><code>Save.onLoad.delete()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-getter-onload-size"><code>Save.onLoad.size</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-onsave-add"><code>Save.onSave.add()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-onsave-clear"><code>Save.onSave.clear()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-onsave-delete"><code>Save.onSave.delete()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-getter-onsave-size"><code>Save.onSave.size</code></a></li>
</ul>
</li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api"><code>Setting</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-setting-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-addheader"><code>Setting.addHeader()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-addtoggle"><code>Setting.addToggle()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-addlist"><code>Setting.addList()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-addrange"><code>Setting.addRange()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-load"><code>Setting.load()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-reset"><code>Setting.reset()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-save"><code>Setting.save()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-object-settings"><code>settings</code></a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api"><code>SimpleAudio</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-simpleaudio-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-general">General</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-load"><code>SimpleAudio.load()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-loadwithscreen"><code>SimpleAudio.loadWithScreen()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-mute"><code>SimpleAudio.mute()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-muteonhidden"><code>SimpleAudio.muteOnHidden()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-select"><code>SimpleAudio.select()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-stop"><code>SimpleAudio.stop()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-unload"><code>SimpleAudio.unload()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-volume"><code>SimpleAudio.volume()</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-tracks">Tracks</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-tracks-add"><code>SimpleAudio.tracks.add()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-tracks-clear"><code>SimpleAudio.tracks.clear()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-tracks-delete"><code>SimpleAudio.tracks.delete()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-tracks-get"><code>SimpleAudio.tracks.get()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-tracks-has"><code>SimpleAudio.tracks.has()</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-groups">Groups</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-groups-add"><code>SimpleAudio.groups.add()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-groups-clear"><code>SimpleAudio.groups.clear()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-groups-delete"><code>SimpleAudio.groups.delete()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-groups-get"><code>SimpleAudio.groups.get()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-groups-has"><code>SimpleAudio.groups.has()</code></a></li>
</ul>
</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-lists">Lists</a>
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-lists-add"><code>SimpleAudio.lists.add()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-lists-clear"><code>SimpleAudio.lists.clear()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-lists-delete"><code>SimpleAudio.lists.delete()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-lists-get"><code>SimpleAudio.lists.get()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-lists-has"><code>SimpleAudio.lists.has()</code></a></li>
</ul>
</li>
</ul>
<h2><i class="child-heading" aria-hidden="true"></i> <a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api"><code>AudioTrack</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-audiotrack-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-clone"><code>&lt;AudioTrack&gt;.clone()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-duration"><code>&lt;AudioTrack&gt;.duration()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-fade"><code>&lt;AudioTrack&gt;.fade()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-fadein"><code>&lt;AudioTrack&gt;.fadeIn()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-fadeout"><code>&lt;AudioTrack&gt;.fadeOut()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-fadestop"><code>&lt;AudioTrack&gt;.fadeStop()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-hasdata"><code>&lt;AudioTrack&gt;.hasData()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-hasmetadata"><code>&lt;AudioTrack&gt;.hasMetadata()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-hasnodata"><code>&lt;AudioTrack&gt;.hasNoData()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-hassomedata"><code>&lt;AudioTrack&gt;.hasSomeData()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-hassource"><code>&lt;AudioTrack&gt;.hasSource()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isended"><code>&lt;AudioTrack&gt;.isEnded()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isfading"><code>&lt;AudioTrack&gt;.isFading()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isfailed"><code>&lt;AudioTrack&gt;.isFailed()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isloading"><code>&lt;AudioTrack&gt;.isLoading()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-ispaused"><code>&lt;AudioTrack&gt;.isPaused()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isplaying"><code>&lt;AudioTrack&gt;.isPlaying()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isseeking"><code>&lt;AudioTrack&gt;.isSeeking()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isstopped"><code>&lt;AudioTrack&gt;.isStopped()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isunavailable"><code>&lt;AudioTrack&gt;.isUnavailable()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isunloaded"><code>&lt;AudioTrack&gt;.isUnloaded()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-load"><code>&lt;AudioTrack&gt;.load()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-loop"><code>&lt;AudioTrack&gt;.loop()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-mute"><code>&lt;AudioTrack&gt;.mute()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-off"><code>&lt;AudioTrack&gt;.off()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-on"><code>&lt;AudioTrack&gt;.on()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-one"><code>&lt;AudioTrack&gt;.one()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-pause"><code>&lt;AudioTrack&gt;.pause()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-play"><code>&lt;AudioTrack&gt;.play()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-playwhenallowed"><code>&lt;AudioTrack&gt;.playWhenAllowed()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-remaining"><code>&lt;AudioTrack&gt;.remaining()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-stop"><code>&lt;AudioTrack&gt;.stop()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-time"><code>&lt;AudioTrack&gt;.time()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-unload"><code>&lt;AudioTrack&gt;.unload()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-volume"><code>&lt;AudioTrack&gt;.volume()</code></a></li>
</ul>
<h2><i class="child-heading" aria-hidden="true"></i> <a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api"><code>AudioRunner</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-audiorunner-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-fade"><code>&lt;AudioRunner&gt;.fade()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-fadein"><code>&lt;AudioRunner&gt;.fadeIn()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-fadeout"><code>&lt;AudioRunner&gt;.fadeOut()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-fadestop"><code>&lt;AudioRunner&gt;.fadeStop()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-load"><code>&lt;AudioRunner&gt;.load()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-loop"><code>&lt;AudioRunner&gt;.loop()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-mute"><code>&lt;AudioRunner&gt;.mute()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-off"><code>&lt;AudioRunner&gt;.off()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-on"><code>&lt;AudioRunner&gt;.on()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-one"><code>&lt;AudioRunner&gt;.one()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-pause"><code>&lt;AudioRunner&gt;.pause()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-play"><code>&lt;AudioRunner&gt;.play()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-playwhenallowed"><code>&lt;AudioRunner&gt;.playWhenAllowed()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-stop"><code>&lt;AudioRunner&gt;.stop()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-time"><code>&lt;AudioRunner&gt;.time()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-unload"><code>&lt;AudioRunner&gt;.unload()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-volume"><code>&lt;AudioRunner&gt;.volume()</code></a></li>
</ul>
<h2><i class="child-heading" aria-hidden="true"></i> <a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api"><code>AudioList</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-audiolist-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-duration"><code>&lt;AudioList&gt;.duration()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-fade"><code>&lt;AudioList&gt;.fade()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-fadein"><code>&lt;AudioList&gt;.fadeIn()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-fadeout"><code>&lt;AudioList&gt;.fadeOut()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-fadestop"><code>&lt;AudioList&gt;.fadeStop()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-isended"><code>&lt;AudioList&gt;.isEnded()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-isfading"><code>&lt;AudioList&gt;.isFading()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-ispaused"><code>&lt;AudioList&gt;.isPaused()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-isplaying"><code>&lt;AudioList&gt;.isPlaying()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-isstopped"><code>&lt;AudioList&gt;.isStopped()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-load"><code>&lt;AudioList&gt;.load()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-loop"><code>&lt;AudioList&gt;.loop()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-mute"><code>&lt;AudioList&gt;.mute()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-pause"><code>&lt;AudioList&gt;.pause()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-play"><code>&lt;AudioList&gt;.play()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-playwhenallowed"><code>&lt;AudioList&gt;.playWhenAllowed()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-remaining"><code>&lt;AudioList&gt;.remaining()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-shuffle"><code>&lt;AudioList&gt;.shuffle()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-skip"><code>&lt;AudioList&gt;.skip()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-stop"><code>&lt;AudioList&gt;.stop()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-time"><code>&lt;AudioList&gt;.time()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-unload"><code>&lt;AudioList&gt;.unload()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-volume"><code>&lt;AudioList&gt;.volume()</code></a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api"><code>State</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-state-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-active"><code>State.active</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-bottom"><code>State.bottom</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-current"><code>State.current</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-length"><code>State.length</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-passage"><code>State.passage</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-size"><code>State.size</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-temporary"><code>State.temporary</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-top"><code>State.top</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-turns"><code>State.turns</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-variables"><code>State.variables</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-getvar"><code>State.getVar()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-has"><code>State.has()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-hasplayed"><code>State.hasPlayed()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-index"><code>State.index()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-isempty"><code>State.isEmpty()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-peek"><code>State.peek()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-size"><code>State.metadata.size</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-clear"><code>State.metadata.clear()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-delete"><code>State.metadata.delete()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-entries"><code>State.metadata.entries()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-get"><code>State.metadata.get()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-has"><code>State.metadata.has()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-keys"><code>State.metadata.keys()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-set"><code>State.metadata.set()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-prng-init"><code>State.prng.init()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-prng-isenabled"><code>State.prng.isEnabled()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-prng-pull"><code>State.prng.pull</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-prng-seed"><code>State.prng.seed</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-random"><code>State.random()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-setvar"><code>State.setVar()</code></a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api"><code>Story</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-story-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-getter-domid"><code>Story.domId</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-getter-ifid"><code>Story.ifId</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-getter-title"><code>Story.title</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-method-get"><code>Story.get()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-method-has"><code>Story.has()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-method-lookup"><code>Story.lookup()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-method-lookupwith"><code>Story.lookupWith()</code></a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#template-api"><code>Template</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-template-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#template-api-getter-size"><code>Template.size</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#template-api-method-add"><code>Template.add()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#template-api-method-delete"><code>Template.delete()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#template-api-method-get"><code>Template.get()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#template-api-method-has"><code>Template.has()</code></a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api"><code>UI</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-ui-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api-method-alert"><code>UI.alert()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api-method-jumpto"><code>UI.jumpto()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api-method-restart"><code>UI.restart()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api-method-saves"><code>UI.saves()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api-method-settings"><code>UI.settings()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api-method-share"><code>UI.share()</code></a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api"><code>UIBar</code> API</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-uibar-api" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-destroy"><code>UIBar.destroy()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-hide"><code>UIBar.hide()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-ishidden"><code>UIBar.isHidden()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-isstowed"><code>UIBar.isStowed()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-show"><code>UIBar.show()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-stow"><code>UIBar.stow()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-unstow"><code>UIBar.unstow()</code></a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-update"><code>UIBar.update()</code></a></li>
</ul>
<hr>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving">Guide: State, Sessions, and Saving</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-guide-state-sessions-and-saving" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving-story-history">Story History</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving-playthrough-session">Playthrough Session</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving-autosave">Autosave</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving-what-happens-when-a-save-is-loaded">What Happens When a Save is Loaded?</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving-refreshing-and-restarting">Refreshing and Restarting</a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-tips">Guide: Tips</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-guide-tips" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-tips-arbitrarily-long-return">Arbitrarily long return</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-tips-non-generic-object-types">Non-generic object types (a.k.a. classes)</a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-media-passages">Guide: Media Passages</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-guide-media-passages" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-media-passages-creation">Creation</a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-harlowe-to-sugarcube">Guide: Harlowe to SugarCube</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-guide-harlowe-to-sugarcube" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-harlowe-to-sugarcube-macro-overview">Macro Overview</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-harlowe-to-sugarcube-specific-macros">Specific Macros</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-harlowe-to-sugarcube-user-input">User Input</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-harlowe-to-sugarcube-data-types">Data Types</a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-test-mode">Guide: Test Mode</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-guide-test-mode" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-test-mode-introduction">Introduction</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-test-mode-enabling">Enabling Test Mode</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-test-mode-debug-bar">Debug Bar</a> (v2.23.0)</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-test-mode-debug-views">Debug Views</a> (v2.22.0)</li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-typescript">Guide: TypeScript</a></h2>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-installation">Guide: Installation</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-guide-installation" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-installation-tweego">Local Install For Tweego</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-installation-twine2">Local Install For Twine&nbsp;2</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-installation-twine2-online">Online Install For Twine&nbsp;2</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-installation-twine1-twee">Local Install For Twine&nbsp;1/Twee</a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates">Guide: Code Updates</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-guide-code-updates" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.30.0">Upgrading to 2.30.0</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.29.0">Upgrading to 2.29.0</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.28.0">Upgrading to 2.28.0</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.20.0">Upgrading to 2.20.0</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.15.0">Upgrading to 2.15.0</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.10.0">Upgrading to 2.10.0</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.8.0">Upgrading to 2.8.0</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.5.0">Upgrading to 2.5.0</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.0.0">Upgrading to 2.0.0</a></li>
</ul>
<h2><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-localization">Guide: Localization</a><a class="list-toggle collapsed" title="Expand section" aria-label="Expand section" tabindex="0"></a></h2>
<ul id="nav-guide-localization" class="collapsed">
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-localization-translation-notes">Translation Notes</a></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-localization-usage">Usage</a></li>
</ul>
<div aria-hidden="true">&nbsp;</div>
</nav>
<!-- NAV ENHANCEMENT -->
<script type="text/javascript">!function(e,t,i){"use strict";!function(){if("SCDocs"in e){var i="navExpanded",a=Object.freeze(Object.defineProperties(Object.create(null),{_array:{value:SCDocs.getConfig(i)||[]},add:{value:function(e){-1===this._array.indexOf(e)&&(this._array.push(e),SCDocs.setConfig(i,this._array))}},delete:{value:function(e){var t=this._array.indexOf(e);-1!==t&&(this._array.splice(t,1),this._array.length>0?SCDocs.setConfig(i,this._array):SCDocs.removeConfig(i))}},has:{value:function(e){return-1!==this._array.indexOf(e)}}})),s=t.querySelector("nav"),r=SCDocs.arrayFrom(s.querySelectorAll("nav>ul")),l=[];r.forEach((function(e){for(var i=e.previousSibling;null!==i&&i.nodeType!==Node.ELEMENT_NODE&&"H2"!==i.nodeName;)i=i.previousSibling;if(i){for(var s=i.firstChild;s&&(s.nodeType!==Node.ELEMENT_NODE||"A"!==s.nodeName);)s=s.nextSibling;var r="nav-"+s.href.replace(/^.*#([^#]+)$/,"$1");e.setAttribute("id",r);var n=function(e,i){var s="Collapse section",r="Expand section",l=function(t){if("click"===t.type||"keypress"===t.type&&(13===t.which||32===t.which)){t.preventDefault();var i=t.target;e.classList.contains("collapsed")?(e.classList.remove("collapsed"),i.classList.remove("collapsed"),i.setAttribute("title",s),i.setAttribute("aria-label",s),a.add(e.id)):(e.classList.add("collapsed"),i.classList.add("collapsed"),i.setAttribute("title",r),i.setAttribute("aria-label",r),a.delete(e.id))}},n=t.createElement("a");return n.classList.add("list-toggle"),i?(n.setAttribute("title",s),n.setAttribute("aria-label",s)):(e.classList.add("collapsed"),n.classList.add("collapsed"),n.setAttribute("title",r),n.setAttribute("aria-label",r)),n.setAttribute("tabindex",0),n.addEventListener("click",l),n.addEventListener("keypress",l),n}(e,a.has(r));l.push(n),i.appendChild(n)}}));var n,c,o,d,u=function(e,i,a){var s=function(i){"click"!==i.type&&("keypress"!==i.type||13!==i.which&&32!==i.which)||(i.preventDefault(),e.forEach((function(e){var i,s;a(e)&&e.dispatchEvent((i="click","function"==typeof Event?s=new Event(i):(s=t.createEvent("Event")).initEvent(i),s))})))},r=i+" all",l=t.createElement("a");return l.setAttribute("id","lists-"+i.toLowerCase()),l.setAttribute("title",r),l.setAttribute("aria-label",r),l.setAttribute("tabindex",0),l.addEventListener("click",s),l.addEventListener("keypress",s),l},b=s.querySelector("nav>header"),p=t.createElement("div");p.setAttribute("id","controls"),p.appendChild((n="Disable code color",c="Enable code color",o=function(e){if("click"===e.type||"keypress"===e.type&&(13===e.which||32===e.which)){e.preventDefault();var i=e.target;i.classList.contains("disabled")?(i.classList.remove("disabled"),i.setAttribute("title",n),i.setAttribute("aria-label",n),SCDocs.removeConfig("codeColor"),t.documentElement.classList.remove("disable-code-color")):(i.classList.add("disabled"),i.setAttribute("title",c),i.setAttribute("aria-label",c),SCDocs.setConfig("codeColor","inherit"),t.documentElement.classList.add("disable-code-color"))}},(d=t.createElement("button")).setAttribute("id","color-toggle"),d.appendChild(t.createTextNode("Code Color")),"inherit"===SCDocs.getConfig("codeColor")?(d.classList.add("disabled"),d.setAttribute("title",c),d.setAttribute("aria-label",c)):(d.setAttribute("title",n),d.setAttribute("aria-label",n)),d.setAttribute("tabindex",0),d.addEventListener("click",o),d.addEventListener("keypress",o),d)),p.appendChild(u(l,"Collapse",(function(e){return!e.classList.contains("collapsed")}))),p.appendChild(u(l,"Expand",(function(e){return e.classList.contains("collapsed")}))),b.appendChild(p),s.classList.add("enhanced")}}()}(window,window.document);</script>

<!-- ***********************************************************************************************
	Introduction
************************************************************************************************ -->
<h1 id="introduction"><a href="https://www.motoslave.net/sugarcube/2/docs/#introduction" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Introduction </span></h1>
<p>This documentation is a reference for <a href="http://www.motoslave.net/sugarcube/">SugarCube</a>, a free (gratis and libre) story format for <a href="http://twinery.org/">Twine/Twee</a>.</p>
<p role="note" class="tip"><b>Tip:</b>
This document is a single page, so you may use your browser's find-in-page functionality<kbd>CTRL</kbd>+<kbd>F</kbd> or <kbd>F3</kbd>to search for specific terms.
</p>
<p role="note"><b>Note:</b>
If you believe that you've found a bug in SugarCube, or simply wish to make a suggestion, you may do so by <a href="https://github.com/tmedwards/sugarcube-2/issues">creating a new issue</a> at its <a href="https://github.com/tmedwards/sugarcube-2">source code repository</a>.
</p>
<hr>
<p>Contributions to this documentation have been graciously made by:</p>
<ul>
<li><strong>Chapel</strong> (<a href="https://twinelab.net/">TwineLab</a>, <a href="https://github.com/ChapelR/">GitHub</a>)</li>
</ul>

<!-- ***********************************************************************************************
	Markup
************************************************************************************************ -->
<h1 id="markup"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Markup </span></h1>
<p role="note"><b>Note:</b>
Except where noted, all markup has been available since <code>v2.0.0</code>.
</p>
<!-- ***************************************************************************
	Naked Variable
**************************************************************************** -->
<h2 id="markup-naked-variable"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-naked-variable" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Naked Variable </span></h2>
<p>In addition to using one of the print macros (<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-print"><code>&lt;&lt;print&gt;&gt;</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-equal"><code>&lt;&lt;=&gt;&gt;</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-hyphen"><code>&lt;&lt;-&gt;&gt;</code></a>) to print the values of TwineScript variables, SugarCube's naked variable markup allows printing them simply by including them within your normal passage texti.e., variables in passage text are interpolated into a string representation of their values.</p>
<p>The following forms are supported by the naked variable markup:</p>
<table>
<thead>
	<tr>
		<th>Type</th>
		<th>Syntax</th>
		<th>Example</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>Simple variable</td>
		<td><pre><code>$variable</code></pre></td>
		<td><pre><code>$name</code></pre></td>
	</tr>
	<tr>
		<td>Property access,<br>dot notation</td>
		<td><pre><code>$variable.property</code></pre></td>
		<td><pre><code>$thing.name</code></pre></td>
	</tr>
	<tr>
		<td>Index/property access,<br>square bracket notation</td>
		<td>
			<pre><code>$variable[numericIndex]</code></pre>
			<pre><code>$variable["property"]</code></pre>
			<pre><code>$variable['property']</code></pre>
			<pre><code>$variable[$indexOrPropertyVariable]</code></pre>
		</td>
		<td>
			<pre><code>$thing[0]</code></pre>
			<pre><code>$thing["name"]</code></pre>
			<pre><code>$thing['name']</code></pre>
			<pre><code>$thing[$member]</code></pre>
		</td>
	</tr>
</tbody>
</table>
<p>If you need to print anything more complexe.g., using a calculation, <code>$variable[_i + 1]</code>, or a method call, <code>$variable.someMethod()</code>then you will still need to use one of the print macros.</p>
<p>For example:</p>
<pre><code>/* Explicitly printing the value of $name via the &lt;&lt;print&gt;&gt; macro */
Well hello there, &lt;&lt;print $name&gt;&gt;.

/* Implicitly printing the value of $name via the naked variable markup */
Well hello there, $name.

/* Assuming $name is set to "Mr. Freeman", both should yield the following */
Well hello there, Mr. Freeman.
</code></pre>
<p>Because variables within your passage text are transformed into their values automatically, if you actually want to output a variable as-isi.e., without interpolation; e.g., for a tutorial, debug output, or whateverthen you'll need to escape it in some fashion.  For example:</p>
<pre><code>/* Using the nowiki markup: """""" (triple double-quotes) */
The variable """$name""" is set to: $name

/* Using the nowiki markup: &lt;nowiki&gt;&lt;/nowiki&gt; */
The variable &lt;nowiki&gt;$name&lt;/nowiki&gt; is set to: $name

/* Using the double dollar-sign markup (which escapes the $-sigil): $$ */
The variable $$name is set to: $name

/* Assuming $name is set to "Mr. Freeman", all of the above should yield the following */
The variable $name is set to: Mr. Freeman
</code></pre>
<p>Additionally, you could use the inline code markup to escape the variable, though it will also wrap the escaped variable within a <code>&lt;code&gt;</code> element, so it's probably best used for examples and tutorials.  For example:</p>
<pre><code>/* Using the inline code markup: {{{}}} (triple curly braces) */
The variable {{{$name}}} is set to: $name

/* Assuming $name is set to "Mr. Freeman", it should yield the following */
The variable &lt;code&gt;$name&lt;/code&gt; is set to: Mr. Freeman
</code></pre>
<!-- ***************************************************************************
	Link
**************************************************************************** -->
<h2 id="markup-link"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-link" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Link </span></h2>
<p>SugarCube's link markup consists of a required <code>Link</code> component and optional <code>Text</code> and <code>Setter</code> components.  The <code>Link</code> and <code>Text</code> components may be either plain text or any valid TwineScript expression, which will be evaluated earlyi.e., when the link is initially processed.  The <code>Setter</code> component, which only works with passage links, must be a valid <a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-expressions">TwineScript expression</a>, of the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-set"><code>&lt;&lt;set&gt;&gt;</code> macro</a> variety, which will be evaluated latei.e., when the link is clicked on.</p>
<p>The <code>Link</code> component value may be the title of a passage or any valid URL to a resource (local or remote).</p>
<p>In addition to the standard pipe separator (<code>|</code>) used to separate the <code>Link</code> and <code>Text</code> components (as seen below), SugarCube also supports the arrow separators (<code>-&gt;</code> &amp; <code>&lt;-</code>).  Particular to the arrow separators, the arrows' direction determines the order of the components, with the arrow always pointing at the <code>Link</code> componenti.e., the right arrow works like the pipe separator, <code>Text-&gt;Link</code>, while the left arrow is reversed, <code>Link&lt;-Text</code>.</p>
<p role="note" class="warning"><b>Warning (Twine&nbsp;2):</b>
Due to how the Twine&nbsp;2 automatic passage creation feature currently works, using any TwineScript expression for the <code>Link</code> component will cause a passage named after the expression to be created that will need to be deleted.  To avoid this problem, it's suggested that you use the separate argument form of the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-link"><code>&lt;&lt;link&gt;&gt;</code> macro</a> in Twine&nbsp;2 when you need to use an expression.
</p>
<table>
<caption>For the following examples assume: <code>$go</code> is <code>"Grocery"</code> and <code>$show</code> is <code>"Go buy milk"</code></caption>
<thead>
	<tr>
		<th>Syntax</th>
		<th>Example</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td><pre><code>[[Link]]</code></pre></td>
		<td class="multiline">
			<pre><code>[[Grocery]]</code></pre>
			<pre><code>[[$go]]</code></pre>
		</td>
	</tr>
	<tr>
		<td><pre><code>[[Text|Link]]</code></pre></td>
		<td class="multiline">
			<pre><code>[[Go buy milk|Grocery]]</code></pre>
			<pre><code>[[$show|$go]]</code></pre>
		</td>
	</tr>
	<tr>
		<td><pre><code>[[Link][Setter]]</code></pre></td>
		<td class="multiline">
			<pre><code>[[Grocery][$bought to "milk"]]</code></pre>
			<pre><code>[[$go][$bought to "milk"]]</code></pre>
		</td>
	</tr>
	<tr>
		<td><pre><code>[[Text|Link][Setter]]</code></pre></td>
		<td class="multiline">
			<pre><code>[[Go buy milk|Grocery][$bought to "milk"]]</code></pre>
			<pre><code>[[$show|$go][$bought to "milk"]]</code></pre>
		</td>
	</tr>
</tbody>
</table>
<!-- ***************************************************************************
	Image
**************************************************************************** -->
<h2 id="markup-image"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-image" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Image </span></h2>
<p>SugarCube's image markup consists of a required <code>Image</code> component and optional <code>Title</code>, <code>Link</code>, and <code>Setter</code> components.  The <code>Image</code>, <code>Title</code>, and <code>Link</code> components may be either plain text or any valid TwineScript expression, which will be evaluated earlyi.e., when the link is initially processed.  The <code>Setter</code> component, which only works with passage links, must be a valid <a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-expressions">TwineScript expression</a>, of the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-set"><code>&lt;&lt;set&gt;&gt;</code> macro</a> variety, which will be evaluated latei.e., when the link is clicked on.</p>
<p>The <code>Image</code> component value may be any valid URL to an image resource (local or remote) or the title of an <a href="http://twinery.org/wiki/image">embedded image passage (Twine&nbsp;1 &amp; Tweego only)</a>.  The <code>Link</code> component value may be the title of a passage or any valid URL to a resource (local or remote).</p>
<p>In addition to the standard pipe separator (<code>|</code>) used to separate the <code>Image</code> and <code>Title</code> components (as seen below), SugarCube also supports the arrow separators (<code>-&gt;</code> &amp; <code>&lt;-</code>).  Particular to the arrow separators, the arrows' direction determines the order of the components, with the arrow always pointing at the <code>Image</code> componenti.e., the right arrow works like the pipe separator, <code>Title-&gt;Image</code>, while the left arrow is reversed, <code>Image&lt;-Title</code>.</p>
<p role="note" class="warning"><b>Warning (Twine&nbsp;2):</b>
Due to how the Twine&nbsp;2 automatic passage creation feature currently works, using any TwineScript expression for the <code>Link</code> component will cause a passage named after the expression to be created that will need to be deleted.  To avoid this problem, it's suggested that you use the separate argument form of the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-link"><code>&lt;&lt;link&gt;&gt;</code> macro</a> in Twine&nbsp;2 when you need to use an expression.
</p>
<table>
<caption>For the following examples assume: <code>$src</code> is <code>home.png</code>, <code>$go</code> is <code>"Home"</code>, and <code>$show</code> is <code>"Go home"</code></caption>
<thead>
	<tr>
		<th>Syntax</th>
		<th>Example</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td><pre><code>[img[Image]]</code></pre></td>
		<td class="multiline">
			<pre><code>[img[home.png]]</code></pre>
			<pre><code>[img[$src]]</code></pre>
		</td>
	</tr>
	<tr>
		<td><pre><code>[img[Image][Link]]</code></pre></td>
		<td class="multiline">
			<pre><code>[img[home.png][Home]]</code></pre>
			<pre><code>[img[$src][$go]]</code></pre>
		</td>
	</tr>
	<tr>
		<td><pre><code>[img[Image][Link][Setter]]</code></pre></td>
		<td class="multiline">
			<pre><code>[img[home.png][Home][$done to true]]</code></pre>
			<pre><code>[img[$src][$go][$done to true]]</code></pre>
		</td>
	</tr>
	<tr>
		<td><pre><code>[img[Title|Image]]</code></pre></td>
		<td class="multiline">
			<pre><code>[img[Go home|home.png]]</code></pre>
			<pre><code>[img[$show|$src]]</code></pre>
		</td>
	</tr>
	<tr>
		<td><pre><code>[img[Title|Image][Link]]</code></pre></td>
		<td class="multiline">
			<pre><code>[img[Go home|home.png][Home]]</code></pre>
			<pre><code>[img[$show|$src][$go]]</code></pre>
		</td>
	</tr>
	<tr>
		<td><pre><code>[img[Title|Image][Link][Setter]]</code></pre></td>
		<td class="multiline">
			<pre><code>[img[Go home|home.png][Home][$done to true]]</code></pre>
			<pre><code>[img[$show|$src][$go][$done to true]]</code></pre>
		</td>
	</tr>
</tbody>
</table>
<h4>Within stylesheets</h4>
<p>A restricted subset of the image markup, allowing only the <code>Image</code> component, may be used within stylesheetsprimarily to allow the easy use of <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-media-passages">image passages</a>.  For example:</p>
<pre><code>/* Using the external image "forest.png" as the &lt;body&gt; background. */
body {
	background-image: [img[forest.png]];
}

/* Using the image passage "lagoon" as the &lt;body&gt; background. */
body {
	background-image: [img[lagoon]];
}
</code></pre>
<!-- ***************************************************************************
	HTML Attribute
**************************************************************************** -->
<h2 id="markup-html-attribute"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-html-attribute" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>HTML Attribute </span></h2>
<p role="note" class="warning"><b>Warning:</b>
None of these features work within the <a href="https://www.motoslave.net/sugarcube/2/docs/#markup-verbatim-html">verbatim HTML markup</a>.
</p>
<!-- *********************************************************************** -->
<h3 id="markup-html-attribute-special"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-html-attribute-special" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Special Attribute </span></h3>
<p>SugarCube provides a few special HTML attributes, which you may add to HTML tags to enable special behaviors.  There are attributes for passage links, media passages, and setters.</p>
<table>
<thead>
	<tr>
		<th>Type</th>
		<th>Attribute</th>
		<th>Example</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>Passage, Link</td>
		<td><pre><code>data-passage</code></pre></td>
		<td>
			<pre><code>&lt;a data-passage="PassageName"&gt;Do the thing&lt;/a&gt;</code></pre>
			<pre><code>&lt;area shape="rect" coords="25,25,75,75" data-passage="PassageName"&gt;</code></pre>
			<pre><code>&lt;button data-passage="PassageName"&gt;Do the thing&lt;/button&gt;</code></pre>
		</td>
	</tr>
	<tr>
		<td>Passage, Audio</td>
		<td><pre><code>data-passage</code></pre></td>
		<td><pre><code>&lt;audio data-passage="AudioPassageName"&gt;</code></pre></td>
	</tr>
	<tr>
		<td>Passage, Image</td>
		<td><pre><code>data-passage</code></pre></td>
		<td><pre><code>&lt;img data-passage="ImagePassageName"&gt;</code></pre></td>
	</tr>
	<tr>
		<td>Passage, Source</td>
		<td><pre><code>data-passage</code></pre></td>
		<td><pre><code>&lt;source data-passage="AudioOrVideoPassageName"&gt;</code></pre></td>
	</tr>
	<tr>
		<td>Passage, Video</td>
		<td><pre><code>data-passage</code></pre></td>
		<td><pre><code>&lt;video data-passage="VideoPassageName"&gt;</code></pre></td>
	</tr>
	<tr>
		<td>Setter</td>
		<td><pre><code>data-setter</code></pre></td>
		<td>
			<pre><code>&lt;a data-passage="PassageName" data-setter="$thing to 'done'"&gt;Do the thing&lt;/a&gt;</code></pre>
			<pre><code>&lt;area shape="rect" coords="25,25,75,75" data-passage="PassageName"
	data-setter="$thing to 'done'"&gt;</code></pre>
			<pre><code>&lt;button data-passage="PassageName" data-setter="$thing to 'done'"&gt;Do the thing&lt;/button&gt;</code></pre>
		</td>
	</tr>
</tbody>
</table>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.24.0</code>: Added <code>data-passage</code> attribute support to <code>&lt;audio&gt;</code>, <code>&lt;source&gt;</code>, and <code>&lt;video&gt;</code> tags.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="markup-html-attribute-directive"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-html-attribute-directive" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Attribute Directive </span></h3>
<p>HTML attributes may be prefixed with directives, special text, which trigger special processing of such attributes.</p>
<dl>
<dt>Evaluation directive: <code>sc-eval:</code>, <code>@</code></dt>
<dd>
	<p>	The evaluation directive causes the attribute's value to be evaluated as TwineScript.  Post-evaluation, the directive will be removed from the attribute's name and the result of the evaluation will be used as the actual value of the attribute.</p>
	<p role="note" class="warning"><b>Warning:</b>
	The evaluation directive is not allowed on the <a href="https://www.motoslave.net/sugarcube/2/docs/#markup-html-attribute-special"><code>data-setter</code> attribute</a>as its function is to evaluate its contents upon activation of its own elementand any such attempt will cause an error.
	</p>
	<table>
	<caption>For the following examples assume: <code>_id</code> is <code>"foo"</code></caption>
	<thead>
		<tr>
			<th>Syntax</th>
			<th>Example</th>
			<th>Rendered As</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><pre><code>sc-eval:<i>attribute-name</i></code></pre></td>
			<td><pre><code>&lt;span sc-eval:id="_id"&gt;&lt;/span&gt;</code></pre></td>
			<td><pre><code>&lt;span id="foo"&gt;&lt;/span&gt;</code></pre></td>
		</tr>
		<tr>
			<td><pre><code>@<i>attribute-name</i></code></pre></td>
			<td><pre><code>&lt;span @id="_id"&gt;&lt;/span&gt;</code></pre></td>
			<td><pre><code>&lt;span id="foo"&gt;&lt;/span&gt;</code></pre></td>
		</tr>
	</tbody>
	</table>
</dd>
</dl>
<h4>History:</h4>
<ul>
<li><code>v2.21.0</code>: Introduced.</li>
<li><code>v2.23.5</code>: Fixed an issue with the evaluation directive where using multiple directives on a single HTML tag would result in some being unprocessed.</li>
</ul>
<!-- ***************************************************************************
	Line Continuation
**************************************************************************** -->
<h2 id="markup-line-continuation"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-line-continuation" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Line Continuation </span></h2>
<p role="note" class="see"><b>See Also:</b>
The various no-break features<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-nobr"><code>&lt;&lt;nobr&gt;&gt;</code> macro</a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-nobr"><code>nobr</code> special tag</a>, and <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-nobr"><code>Config.passages.nobr</code> setting</a>all perform a similar, though slightly different, function.
</p>
<p role="note" class="warning"><b>Warning:</b>
Line continuations, or any markup that relies on line positioning, are incompatible with the no-break features because of how the latter function.
</p>
<p>A backslash (<code>\</code>) that begins or ends a line is the line continuation markup.  Upon processing the backslash, associated line break, and all whitespace between them are removedthus, joining the nearby lines together.  This is mostly useful for controlling whitespace when you want to wrap lines for readability, but not generate extra whitespace upon display, and the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-silently"><code>&lt;&lt;silently&gt;&gt;</code> macro</a> isn't an option because you need to generate output.</p>
<p>For example, all of the following: (n.b., <code></code> represents whitespace that will be removed, <code></code> represents line breaks)</p>
<pre><code>The rain in Spain falls \
mainly on the plain.

The rain in Spain falls \
mainly on the plain.

The rain in Spain falls
\ mainly on the plain.

The rain in Spain falls
\ mainly on the plain.
</code></pre>
<p>Yield the single line in the final output:</p>
<pre><code>The rain in Spain falls mainly on the plain.
</code></pre>
<!-- ***************************************************************************
	Heading
**************************************************************************** -->
<h2 id="markup-heading"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-heading" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Heading </span></h2>
<p>An exclamation point (<code>!</code>) that begins a line defines the heading markup.  It consists of one to six exclamation points, each additional one beyond the first signifying a lesser heading.</p>
<table>
<thead>
	<tr>
		<th>Type</th>
		<th>Syntax &amp; Example</th>
		<th>Rendered As</th>
		<th>Displays As (<em>roughly</em>)</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>Level 1</td>
		<td><pre><code>!Level 1 Heading</code></pre></td>
		<td><pre><code>&lt;h1&gt;Level 1 Heading&lt;/h1&gt;</code></pre></td>
		<td class="displays"><h1>Level 1 Heading</h1></td>
	</tr>
	<tr>
		<td>Level 2</td>
		<td><pre><code>!!Level 2 Heading</code></pre></td>
		<td><pre><code>&lt;h2&gt;Level 2 Heading&lt;/h2&gt;</code></pre></td>
		<td class="displays"><h2>Level 2 Heading</h2></td>
	</tr>
	<tr>
		<td>Level 3</td>
		<td><pre><code>!!!Level 3 Heading</code></pre></td>
		<td><pre><code>&lt;h3&gt;Level 3 Heading&lt;/h3&gt;</code></pre></td>
		<td class="displays"><h3>Level 3 Heading</h3></td>
	</tr>
	<tr>
		<td>Level 4</td>
		<td><pre><code>!!!!Level 4 Heading</code></pre></td>
		<td><pre><code>&lt;h4&gt;Level 4 Heading&lt;/h4&gt;</code></pre></td>
		<td class="displays"><h4>Level 4 Heading</h4></td>
	</tr>
	<tr>
		<td>Level 5</td>
		<td><pre><code>!!!!!Level 5 Heading</code></pre></td>
		<td><pre><code>&lt;h5&gt;Level 5 Heading&lt;/h5&gt;</code></pre></td>
		<td class="displays"><h5>Level 5 Heading</h5></td>
	</tr>
	<tr>
		<td>Level 6</td>
		<td><pre><code>!!!!!!Level 6 Heading</code></pre></td>
		<td><pre><code>&lt;h6&gt;Level 6 Heading&lt;/h6&gt;</code></pre></td>
		<td class="displays"><h6>Level 6 Heading</h6></td>
	</tr>
</tbody>
</table>
<!-- ***************************************************************************
	Style
**************************************************************************** -->
<h2 id="markup-style"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-style" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Style </span></h2>
<p role="note" class="warning"><b>Warning:</b>
Because the style markups use the same tokens to begin and end each markup, the same style cannot be nested within itself.
</p>
<table>
<thead>
	<tr>
		<th>Type</th>
		<th>Syntax &amp; Example</th>
		<th>Rendered As</th>
		<th>Displays As (<em>roughly</em>)</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>Emphasis</td>
		<td><pre><code>//Emphasis//</code></pre></td>
		<td><pre><code>&lt;em&gt;Emphasis&lt;/em&gt;</code></pre></td>
		<td class="displays"><em>Emphasis</em></td>
	</tr>
	<tr>
		<td>Strong</td>
		<td><pre><code>''Strong''</code></pre></td>
		<td><pre><code>&lt;strong&gt;Strong&lt;/strong&gt;</code></pre></td>
		<td class="displays"><strong>Strong</strong></td>
	</tr>
	<tr>
		<td>Underline</td>
		<td><pre><code>__Underline__</code></pre></td>
		<td><pre><code>&lt;u&gt;Underline&lt;/u&gt;</code></pre></td>
		<td class="displays"><u>Underline</u></td>
	</tr>
	<tr>
		<td>Strikethrough</td>
		<td><pre><code>==Strikethrough==</code></pre></td>
		<td><pre><code>&lt;s&gt;Strikethrough&lt;/s&gt;</code></pre></td>
		<td class="displays"><s>Strikethrough</s></td>
	</tr>
	<tr>
		<td>Superscript</td>
		<td><pre><code>Super^^script^^</code></pre></td>
		<td><pre><code>Super&lt;sup&gt;script&lt;/sup&gt;</code></pre></td>
		<td class="displays">Super<sup>script</sup></td>
	</tr>
	<tr>
		<td>Subscript</td>
		<td><pre><code>Sub~~script~~</code></pre></td>
		<td><pre><code>Sub&lt;sub&gt;script&lt;/sub&gt;</code></pre></td>
		<td class="displays">Sub<sub>script</sub></td>
	</tr>
</tbody>
</table>
<!-- ***************************************************************************
	List
**************************************************************************** -->
<h2 id="markup-list"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-list" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>List </span></h2>
<p>An asterisk (<code>*</code>) or number sign (<code>#</code>) that begins a line defines a member of the unordered or ordered list markup, respectively.</p>
<table>
<thead>
	<tr>
		<th>Type</th>
		<th>Syntax &amp; Example</th>
		<th>Rendered As</th>
		<th>Displays As (<em>roughly</em>)</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>Unordered</td>
		<td><pre><code>* A&nbsp;list&nbsp;item<br>* Another&nbsp;list&nbsp;item</code></pre></td>
		<td><pre><code>&lt;ul&gt;<br>&lt;li&gt;A&nbsp;list&nbsp;item&lt;/li&gt;<br>&lt;li&gt;Another&nbsp;list&nbsp;item&lt;/li&gt;<br>&lt;/ul&gt;</code></pre></td>
		<td class="displays"><ul><li>A&nbsp;list&nbsp;item</li><li>Another&nbsp;list&nbsp;item</li></ul></td>
	</tr>
	<tr>
		<td>Ordered</td>
		<td><pre><code># A&nbsp;list&nbsp;item<br># Another&nbsp;list&nbsp;item</code></pre></td>
		<td><pre><code>&lt;ol&gt;<br>&lt;li&gt;A&nbsp;list&nbsp;item&lt;/li&gt;<br>&lt;li&gt;Another&nbsp;list&nbsp;item&lt;/li&gt;<br>&lt;/ol&gt;</code></pre></td>
		<td class="displays"><ol><li>A&nbsp;list&nbsp;item</li><li>Another&nbsp;list&nbsp;item</li></ol></td>
	</tr>
</tbody>
</table>
<!-- ***************************************************************************
	Blockquote
**************************************************************************** -->
<h2 id="markup-blockquote"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-blockquote" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Blockquote </span></h2>
<p>A right angle bracket (<code>&gt;</code>) that begins a line defines the blockquote markup.  It consists of one or more right angle brackets, each additional one beyond the first signifying a level of nested blockquote.</p>
<table>
<thead>
	<tr>
		<th>Syntax &amp; Example</th>
		<th>Rendered As</th>
		<th>Displays As (<em>roughly</em>)</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td><pre><code>&gt;Line&nbsp;1<br>&gt;Line&nbsp;2<br>&gt;&gt;Nested&nbsp;1<br>&gt;&gt;Nested&nbsp;2</code></pre></td>
		<td><pre><code>&lt;blockquote&gt;Line&nbsp;1&lt;br&gt;<br>Line&nbsp;2&lt;br&gt;<br>&lt;blockquote&gt;Nested&nbsp;1&lt;br&gt;<br>Nested&nbsp;2&lt;br&gt;<br>&lt;/blockquote&gt;&lt;/blockquote&gt;</code></pre></td>
		<td class="displays"><blockquote>Line&nbsp;1<br>Line&nbsp;2<br><blockquote>Nested&nbsp;1<br>Nested&nbsp;2<br></blockquote></blockquote></td>
	</tr>
</tbody>
</table>
<!-- ***************************************************************************
	Code
**************************************************************************** -->
<h2 id="markup-code"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-code" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Code </span></h2>
<table>
<thead>
	<tr>
		<th>Type</th>
		<th>Syntax &amp; Example</th>
		<th>Rendered As</th>
		<th>Displays As (<em>roughly</em>)</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>Inline</td>
		<td><pre><code>{{{Code}}}</code></pre></td>
		<td><pre><code>&lt;code&gt;Code&lt;/code&gt;</code></pre></td>
		<td class="displays"><pre><code>Code</code></pre></td>
	</tr>
	<tr>
		<td>Block</td>
		<td><pre><code>{{{<br>Code<br>More&nbsp;code<br>}}}</code></pre></td>
		<td><pre><code>&lt;pre&gt;&lt;code&gt;Code<br>More&nbsp;code<br>&lt;/code&gt;&lt;/pre&gt;</code></pre></td>
		<td class="displays"><pre><code>Code<br>More&nbsp;code<br></code></pre></td>
	</tr>
</tbody>
</table>
<!-- ***************************************************************************
	Horizontal Rule
**************************************************************************** -->
<h2 id="markup-horizontal-rule"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-horizontal-rule" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Horizontal Rule </span></h2>
<p>A set of four hyphen/minus characters (<code>-</code>) that begins a line defines the horizontal rule markup.</p>
<table>
<thead>
	<tr>
		<th>Type</th>
		<th>Syntax &amp; Example</th>
		<th>Rendered As</th>
		<th>Displays As (<em>roughly</em>)</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>Horizontal rule</td>
		<td><pre><code>----</code></pre></td>
		<td><pre><code>&lt;hr&gt;</code></pre></td>
		<td class="displays"><hr></td>
	</tr>
</tbody>
</table>
<!-- ***************************************************************************
	Verbatim Text
**************************************************************************** -->
<h2 id="markup-verbatim-text"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-verbatim-text" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Verbatim Text<!-- legacy --><span id="markup-verbatim"></span><!-- /legacy --> </span></h2>
<p>The verbatim text markup disables processing of <em>all</em> markup contained withinboth SugarCube and HTMLpassing its contents directly into the output as plain text.</p>
<table>
<thead>
	<tr>
		<th>Type</th>
		<th>Syntax &amp; Example</th>
		<th>Rendered As</th>
		<th>Displays As (<em>roughly</em>)</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>Triple&nbsp;double&nbsp;quotes</td>
		<td><pre><code>"""No //format//"""</code></pre></td>
		<td><pre><code>No //format//</code></pre></td>
		<td>No //format//</td>
	</tr>
	<tr>
		<td>&lt;nowiki&gt; tag</td>
		<td><pre><code>&lt;nowiki&gt;No //format//&lt;/nowiki&gt;</code></pre></td>
		<td><pre><code>No //format//</code></pre></td>
		<td>No //format//</td>
	</tr>
</tbody>
</table>
<!-- ***************************************************************************
	Verbatim HTML
**************************************************************************** -->
<h2 id="markup-verbatim-html"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-verbatim-html" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Verbatim HTML </span></h2>
<p>A set of opening and closing &lt;html&gt; tagsi.e., <code>&lt;html&gt;&lt;/html&gt;</code>defines the verbatim HTML markup.  The verbatim HTML markup disables processing of <em>all</em> markup contained withinboth SugarCube and HTMLpassing its contents directly into the output as HTML markup for the browser.  Thus, you should only use plain HTML markup within the verbatim markupmeaning using none of SugarCube's special HTML <a href="https://www.motoslave.net/sugarcube/2/docs/#markup-html-attribute-special">attributes</a> or <a href="https://www.motoslave.net/sugarcube/2/docs/#markup-html-attribute-directive">directives</a>.</p>
<p role="note"><b>Note:</b>
You should virtually never need to use the verbatim HTML markup.
</p>
<!-- ***************************************************************************
	Custom Style
**************************************************************************** -->
<h2 id="markup-custom-style"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-custom-style" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Custom Style </span></h2>
<p role="note" class="warning"><b>Warning:</b>
Because the custom style markup uses the same tokens to begin and end the markup, it cannot be nested within itself.
</p>
<table>
<thead>
	<tr>
		<th>Type</th>
		<th>Syntax</th>
		<th>Example</th>
		<th>Rendered As</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td rowspan="2">Inline</td>
		<td rowspan="2"><pre><code>@@<i>style-list</i><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-custom-style-fn1">1</a>;Text@@</code></pre></td>
		<td><pre><code>@@#alfa;.bravo;Text@@</code></pre></td>
		<td><pre><code>&lt;span id="alfa" class="bravo"&gt;Text&lt;/span&gt;</code></pre></td>
	</tr>
	<tr>
		<td><pre><code>@@color:red;Text@@</code></pre></td>
		<td><pre><code>&lt;span style="color:red"&gt;Text&lt;/span&gt;</code></pre></td>
	</tr>
	<tr>
		<td rowspan="2">Block</td>
		<td rowspan="2"><pre><code>@@<i>style-list</i><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-custom-style-fn1">1</a>;<br>Text<br>@@</code></pre></td>
		<td><pre><code>@@#alfa;.bravo;<br>Text<br>@@</code></pre></td>
		<td><pre><code>&lt;div id="alfa" class="bravo"&gt;Text&lt;/div&gt;</code></pre></td>
	</tr>
	<tr>
		<td><pre><code>@@color:red;<br>Text<br>@@</code></pre></td>
		<td><pre><code>&lt;div style="color:red"&gt;Text&lt;/div&gt;</code></pre></td>
	</tr>
</tbody>
</table>
<ol class="note">
<li id="markup-custom-style-fn1">
	The style-list should be a semi-colon (<code>;</code>) separated list consisting of one or more of the following:
	<ul>
	<li>A single unique hash-prefixed IDe.g., <code>#alfa</code>.</li>
	<li>Dot-prefixed class namese.g., <code>.bravo</code>.</li>
	<li>Style propertiese.g., <code>color:red</code>.</li>
	</ul>
	As of <code>v2.31.0</code>, the ID and class names components may be conjoined without need of extra semi-colonse.g., <code>#alfa;.bravo;.charlie;</code> may also be written as <code>#alfa.bravo.charlie;</code>.
</li>
</ol>
<!-- ***************************************************************************
	Template
**************************************************************************** -->
<h2 id="markup-template"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-template" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Template </span></h2>
<p>A text replacement markup.  The template markup begins with a question mark (<code>?</code>) followed by the template namee.g., <code>?yolo</code>and are set up as functions-that-return-strings, strings, or arrays of eitherfrom which a random member is selected whenever the template is processed.  They are defined via the <a href="https://www.motoslave.net/sugarcube/2/docs/#template-api"><code>Template</code> API</a>.</p>
<p>For example, consider the following markup:</p>
<pre><code>?He was always willing to lend ?his ear to anyone.
</code></pre>
<p>Assuming that <code>?He</code> resolves to <code>She</code> and <code>?his</code> to <code>her</code>, then that will produce the following output:</p>
<pre><code>She was always willing to lend her ear to anyone.
</code></pre>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<!-- ***************************************************************************
	Comment
**************************************************************************** -->
<h2 id="markup-comment"><a href="https://www.motoslave.net/sugarcube/2/docs/#markup-comment" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Comment </span></h2>
<p role="note"><b>Note:</b>
Comments used within passage markup are not rendered into the page output.
</p>
<table>
<thead>
	<tr>
		<th>Type</th>
		<th>Syntax &amp; Example</th>
		<th>Supported Within</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>C-style, Block</td>
		<td><pre><code>/* This is a comment. */</code></pre></td>
		<td>Passage markup, JavaScript, Stylesheets</td>
	</tr>
	<tr>
		<td>TiddlyWiki, Block</td>
		<td><pre><code>/% This is a comment. %/</code></pre></td>
		<td>Passage markup</td>
	</tr>
	<tr>
		<td>HTML, Block</td>
		<td><pre><code>&lt;!-- This is a comment. --&gt;</code></pre></td>
		<td>Passage markup</td>
	</tr>
</tbody>
</table>

<!-- ***********************************************************************************************
	TwineScript
************************************************************************************************ -->
<h1 id="twinescript"><a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>TwineScript </span></h1>
<p>TwineScript in SugarCube is, essentially, JavaScript with an extra spoonful of sugar on top to make it a bit nicer for the uninitiated.</p>
<!-- ***************************************************************************
	Variables
**************************************************************************** -->
<h2 id="twinescript-variables"><a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-variables" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Variables </span></h2>
<p role="note"><b>Note:</b>
Temporary variables were added in <code>v2.3.0</code>.
</p>
<p>A variable is a bit of storage where you may stash a value for later use.  In SugarCube, they come in two types: story variables and temporary variables.  Story variables are a part of the story history and exist for the lifetime of a playthrough session.  Temporary variables do not become part of the story history and only exist for the lifetime of the moment/turn that they're created in.  You'll likely use story variables most often throughout your projectthough, temporary variables are perfect candidates for things like loop variables, if you're using the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-for"><code>&lt;&lt;for&gt;&gt;</code></a> macro.</p>
<p>For example, you might use the story variable <code>$name</code> to store the main player character's name or the story variable <code>$cash</code> to store how much money the player has on hand.</p>
<p>Values may be of most primitive types and some object types, see <a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-supported-types">Supported Types</a> for more information.</p>
<h3>Variable Names</h3>
<p>The names of both story and temporary variables have a certain format that they must followwhich signifies that they are variables and not some other kind of data.</p>
<p>The very first, and mandatory, character is their sigil, which denotes whether they are a story or temporary variable.  The sigil must be a dollar sign (<code>$</code>) for story variables or an underscore (<code>_</code>) for temporary variables.</p>
<p>The second, and also mandatory, character of the variable name may be one of the following: the letters A though Z (in upper or lower case), the dollar sign, and the underscore (i.e., <code>A-Za-z$_</code>)after their initial use as the sigil, the dollar sign and underscore become regular variable characters.</p>
<p>Subsequent, optional, characters have the same set as the second with the addition of numerals (i.e., <code>0-9</code>, so the full set is <code>A-Za-z0-9$_</code>).  No other characters are allowed.</p>
<p>A few examples of valid names:</p>
<pre><code>/* Story variables */
$cash
$hasKeyCard5
$met_alice
$TIMES_POKED_MR_BEAR

/* Temporary variables */
_i
_something2
_some_loop_value
_COUNT
</code></pre>
<h3>Using Variables</h3>
<p role="note"><b>Note:</b>
This is not an exhaustive list.  There are many ways to use and interact with variables.
</p>
<p>To modify the values contained within variables, see the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-set"><code>&lt;&lt;set&gt;&gt;</code></a> macro and <a href="https://www.motoslave.net/sugarcube/2/docs/#markup-link">setter links</a>.</p>
<p>To print the values contained within variables, see the <a href="https://www.motoslave.net/sugarcube/2/docs/#markup-naked-variable">naked variable markup</a> and the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-print"><code>&lt;&lt;print&gt;&gt;</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-equal"><code>&lt;&lt;=&gt;&gt;</code></a>, and <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-hyphen"><code>&lt;&lt;-&gt;&gt;</code></a> macros.</p>
<p>To control aspects of your project based on the values contained within variables, see the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-if"><code>&lt;&lt;if&gt;&gt;</code></a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-switch"><code>&lt;&lt;switch&gt;&gt;</code></a> macros.</p>
<!-- ***************************************************************************
	Supported Types
**************************************************************************** -->
<h2 id="twinescript-supported-types"><a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-supported-types" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Supported Types </span></h2>
<p>The following types of values are natively supported by SugarCube and may be safely used within story and temporary variables.</p>
<h3>Primitives</h3>
<ul>
<li>Booleanse.g., <code>true</code> &amp; <code>false</code></li>
<li>Numberse.g., <code>42</code>, <code>3.14</code>,  &amp; <code>-17.01</code></li>
<li>Stringse.g., <code>"I like pie"</code> &amp; <code>'You like pie'</code></li>
<li><code>null</code></li>
<li><code>undefined</code></li>
</ul>
<h3>Objects</h3>
<ul>
<li><code>Array</code></li>
<li><code>Date</code></li>
<li><code>Map</code></li>
<li><code>Set</code></li>
<li>Generic objects</li>
</ul>
<p>Any supported object type may itself contain any supported primitive or object type.</p>
<p>Unsupported object types, either native or custom, can be made compatible by implementing <code>.clone()</code> and <code>.toJSON()</code> methods for themsee the <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-tips-non-generic-object-types"><em>Non-generic object types (a.k.a. classes)</em> guide</a> for more information.</p>
<div role="note" class="warning"><b>Warning:</b>
<p>Due to how SugarCube stores the state history a few constructs are <strong><em>not supported</em></strong> within story variables.</p>
<ul>
	<li>Circular references.  If you need them, then you'll need to keep them out of story variables.</li>
	<li>Property attributes, including getters/setters, and symbol properties.  If you need them, then you'll need to use a class or similar non-generic object.</li>
	<li>
		<p>Functions, including statici.e., non-instancemethods, due to a few issues.</p>
		<ol>
			<li>A function's scope <strong><em>cannot</em></strong> be restored.  Thus, if your function depends upon its scope, then it will not work properly when revived from sessions or saves.</li>
			<li>Function behavior is immutable.  Thus, storing them within story variables is generally wasteful.</li>
		</ol>
		<p>Instance methods of classes are not affected by either issue, as they're never actually stored within story variables, being referenced from their classes' prototypes instead.</p>
	</li>
</ul>
</div>
<!-- ***************************************************************************
	Expressions
**************************************************************************** -->
<h2 id="twinescript-expressions"><a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-expressions" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Expressions </span></h2>
<p role="note" class="see"><b>See Also:</b>
While not specifically about SugarCube, the <a href="https://twinery.org/wiki/expression">About Expressions</a> section of the <a href="https://twinery.org/wiki/twine1:reference">Twine&nbsp;1 reference documentation</a> may also be helpful.
</p>
<p>Expressions are simply units of code that yield values when evaluated.  For example:</p>
<pre><code>2 + 2        Yields: 4
"a" + "bc"   Yields: "abc"
turns()      Yields: 1 (assuming that it is the first turn)
</code></pre>
<p>While every valid expressioneven those you might not expectyields a value, there are essentially two types of expressions: those with side effects and those without.  A side effect simply means that the evaluation of the expression modifies some state.  For example:</p>
<pre><code>$a = 5    Yields: 5; Side effect: assigns 5 to the story variable $a
$x + 10   Yields: 25 (assuming $x is 15); No side effects
</code></pre>
<p>In general, you can group expressions into categories based on what kind of value they yield and/or what side effects they cause.  For example: <em>(not an exhaustive list)</em></p>
<ul>
<li>Arithmetic: The expression yields a number valuee.g., <code>42</code> or <code>3.14</code>.</li>
<li>String: The expression yields a string valuee.g., <code>"Lulamoon"</code> or <code>"5678"</code>.</li>
<li>Logical: The expression yields a boolean valuee.g., <code>true</code> or <code>false</code>.</li>
<li>Assignment: The expression causes an assignment to occure.g., <code>$a = 5</code>.</li>
</ul>
<h3>Using Expressions</h3>
<p>You will, in all likelihood, use expressions most often within macrose.g., <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-set"><code>&lt;&lt;set&gt;&gt;</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-print"><code>&lt;&lt;print&gt;&gt;</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-if"><code>&lt;&lt;if&gt;&gt;</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-for"><code>&lt;&lt;for&gt;&gt;</code></a>.</p>

<!-- ***********************************************************************************************
	Macros
************************************************************************************************ -->
<h1 id="macros"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Macros </span></h1>
<!-- ***************************************************************************
	Macro Arguments
**************************************************************************** -->
<h2 id="macros-arguments"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-arguments" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Macro Arguments </span></h2>
<p>Macros fall into two broad categories based on the kind of arguments they accept: those that want an expressione.g., <code>&lt;&lt;set&gt;&gt;</code> and <code>&lt;&lt;print&gt;&gt;</code>and those that want discrete arguments separated by whitespacee.g., <code>&lt;&lt;link&gt;&gt;</code> and <code>&lt;&lt;audio&gt;&gt;</code>.  The documentation for each macro will tell you what it expects.</p>
<p>Those that want an expression are fairly straightforward, as you simply supply an <a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-expressions">expression</a>.</p>
<p>The discrete argument type of macros are also fairly straightforward, most of the time, as you simply supply the requisite arguments separated by whitespace, which may include variablesas SugarCube automatically yields their values to the macro.  There are cases, however, where things get a bit more complicated, namely: instances where you need to pass the name of a variable as an argument, rather than its value, and those where you want to pass the result of an expression as argument.</p>
<h4>Argument type macros: passing a variable's name as an argument</h4>
<p>Passing the name of a variable as an argument is problematic because variable substitution occurs automatically in SugarCube macros.  Meaning that when you pass a variable as an argument, its value is passed to the macro rather than its name.</p>
<p>Normally, this is exactly what you want to happen.  Occasionally, however, macros will need the name of a variable rather than its valuee.g., data input macros like <code>&lt;&lt;textbox&gt;&gt;</code>so that they may modify the variable.  To resolve these instances, you will need to quote the name of the variablei.e., instead of passing <code>$pie</code> as normal, you'd pass <code>"$pie"</code>.  These, rare, instances are noted in the macros' documentation and shown in their examples.</p>
<h4>Argument type macros: passing an expression as an argument</h4>
<p>Passing the result of an expression as an argument is problematic for a couple of reasons: because the macro argument parser doesn't treat arguments as expressions by default and because it separates arguments with whitespace.</p>
<p>Normally, those aren't issues as you should not need to use the result of an expression as an argument terribly often.  To resolve instances where you do, however, you'll want to use either a temporary variable or a backquote expression.</p>
<p>For example, the following will not work because the macro parser will think that you're passing five discrete arguments, rather than a single expression:</p>
<pre><code>&lt;&lt;link "Wake " + $friend + "."&gt;&gt;  &lt;&lt;/link&gt;&gt;
</code></pre>
<p>You could solve the problem by using a temporary variable to hold the result of the expression, then pass that to the macro.  For example:</p>
<pre><code>&lt;&lt;set _text to "Wake " + $friend + "."&gt;&gt;\
&lt;&lt;link _text&gt;&gt;  &lt;&lt;/link&gt;&gt;
</code></pre>
<p>A better solution, however, would be to use a backquote<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-arguments-backquote-fn1">1</a> (<code>`</code>) expression, which is really just a special form of quoting available in macro arguments that causes the contents of the backquotes to be evaluated and then yields the result as a singular argument.  For example:</p>
<pre><code>&lt;&lt;link `"Wake " + $friend + "."`&gt;&gt;  &lt;&lt;/link&gt;&gt;
</code></pre>
<ol class="note">
<li id="macros-arguments-backquote-fn1">A backquote is also known as a grave and is often paired with the tilde (<code>~</code>) on keyboards.</li>
</ol>
<!-- ***************************************************************************
	Variables Macros
**************************************************************************** -->
<h2 id="macros-variables"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-variables" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Variables Macros </span></h2>
<!-- *********************************************************************** -->
<h3 id="macros-macro-capture"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-capture" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;capture variableList&gt;&gt;  &lt;&lt;/capture&gt;&gt;</code> </span></h3>
<p>Captures story $variables and temporary _variables, creating localized versions of their values within the macro body.</p>
<p role="note"><b>Note:</b>
Use of this macro is <em>only</em> necessary when you need to localize a variable's value for use with an asynchronous macroi.e., a macro whose contents are executed at some later time, rather than when it's invoked; e.g., <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive">interactive macros</a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-repeat"><code>&lt;&lt;repeat&gt;&gt;</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-timed"><code>&lt;&lt;timed&gt;&gt;</code></a>.  Generally, this means only when the variable's value will change between the time the asynchronous macro is invoked and when it's activatede.g., a loop variable.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.14.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>variableList</code>:</strong> A list of story $variables and/or temporary _variables.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Using &lt;&lt;capture&gt;&gt; to localize a temporary loop variable for use within a &lt;&lt;linkappend&gt;&gt;
&lt;&lt;set _what to [
	"a crab rangoon",
	"a gaggle of geese",
	"an aardvark",
	"the world's smallest violin"
]&gt;&gt;
&lt;&lt;for _i to 0; _i lt _what.length; _i++&gt;&gt;
	&lt;&lt;capture _i&gt;&gt;
		I spy with my little &lt;&lt;linkappend "eye" t8n&gt;&gt;, _what[_i]&lt;&lt;/linkappend&gt;&gt;.
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;

 Capturing several variables at once
&lt;&lt;capture $aStoryVar, $anotherStoryVar, _aTempVar&gt;&gt;  &lt;&lt;/capture&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-set"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-set" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;set expression&gt;&gt;</code> </span></h3>
<p>Sets story $variables and temporary _variables based on the given expression.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>expression</code>:</strong> A valid expression.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-variables">Variables</a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-expressions">Expressions</a> for more information.</li>
</ul>
<h4>TwineScript assignment operators:</h4>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>to</code></th>
<td>Assigns the value on the right-hand side of the operator to the left-hand side.</td>
<td><pre><code>&lt;&lt;set $apples to 6&gt;&gt;</code></pre></td>
</tr>
</tbody>
</table>
<h4>JavaScript assignment operators: <em>(not an exhaustive list)</em></h4>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>=</code></th>
<td>Assigns the value on the right-hand side of the operator to the left-hand side.</td>
<td><pre><code>&lt;&lt;set $apples = 6&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>+=</code></th>
<td>Adds the value on the right-hand side of the operator to the current value on the left-hand side and assigns the result to the left-hand side.</td>
<td><pre><code>&lt;&lt;set $apples += 1&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>-=</code></th>
<td>Subtracts the value on the right-hand side of the operator from the current value on the left-hand side and assigns the result to the left-hand side.</td>
<td><pre><code>&lt;&lt;set $apples -= 1&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>*=</code></th>
<td>Multiplies the current value on the left-hand side of the operator by the value on the right-hand side and assigns the result to the left-hand side.</td>
<td><pre><code>&lt;&lt;set $apples *= 2&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>/=</code></th>
<td>Divides the current value on the left-hand side of the operator by the value on the right-hand side and assigns the result to the left-hand side.</td>
<td><pre><code>&lt;&lt;set $apples /= 2&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>%=</code></th>
<td>Divides the current value on the left-hand side of the operator by the value on the right-hand side and assigns the remainder to the left-hand side.</td>
<td><pre><code>&lt;&lt;set $apples %= 10&gt;&gt;</code></pre></td>
</tr>
</tbody>
</table>
<h4>Examples:</h4>
<pre><code> Using the TwineScript "to" operator
&lt;&lt;set $cheese to "a nice, sharp cheddar"&gt;&gt;   Assigns "a nice, sharp cheddar" to story variable $cheese
&lt;&lt;set $chestEmpty to true&gt;&gt;                  Assigns boolean true to story variable $chestEmpty
&lt;&lt;set $gold to $gold + 5&gt;&gt;                   Adds 5 to the value of story variable $gold
&lt;&lt;set _counter to _counter + 1&gt;&gt;             Adds 1 to the value of temporary variable _counter

 Using standard JavaScript operators
&lt;&lt;set $cheese = "a nice, sharp cheddar"&gt;&gt;    Assigns "a nice, sharp cheddar" to story variable $cheese
&lt;&lt;set $chestEmpty = true&gt;&gt;                   Assigns boolean true to story variable $chestEmpty
&lt;&lt;set $gold += 5&gt;&gt;                           Adds 5 to the value of story variable $gold
&lt;&lt;set _counter += 1&gt;&gt;                        Adds 1 to the value of temporary variable _counter
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-unset"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-unset" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;unset variableList&gt;&gt;</code> </span></h3>
<p>Unsets story $variables and temporary _variables.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>variableList</code>:</strong> A list of story $variables and/or temporary _variables.</li>
</ul>
<h4>Examples:</h4>
<pre><code>&lt;&lt;unset $cheese, $chestEmpty, $gold&gt;&gt;
&lt;&lt;unset _someTempVar&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-remember"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-remember" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>&lt;&lt;remember expression&gt;&gt;</code></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This macro has been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-memorize"><code>memorize()</code></a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-recall"><code>recall()</code></a> functions for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Deprecated in favor of <code>memorize()</code> and <code>recall()</code>.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="macros-macro-forget"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-forget" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>&lt;&lt;forget variableList&gt;&gt;</code></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This macro has been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-forget"><code>forget()</code></a> function for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Deprecated in favor of <code>forget()</code>.</li>
</ul>
<!-- ***************************************************************************
	Scripting Macros
**************************************************************************** -->
<h2 id="macros-scripting"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-scripting" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Scripting Macros </span></h2>
<!-- *********************************************************************** -->
<h3 id="macros-macro-run"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-run" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;run expression&gt;&gt;</code> </span></h3>
<p><em>Functionally identical to <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-set"><code>&lt;&lt;set&gt;&gt;</code></a>.  Intended to be mnemonically better for uses where the expression is arbitrary code, rather than variables to seti.e., <code>&lt;&lt;run&gt;&gt;</code> to run code, <code>&lt;&lt;set&gt;&gt;</code> to set variables.</em></p>
<!-- *********************************************************************** -->
<h3 id="macros-macro-script"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-script" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;script&gt;&gt;  &lt;&lt;/script&gt;&gt;</code> </span></h3>
<p>Silently executes its contents as <em>pure</em> JavaScript codei.e., it performs no story or temporary variable substitution or TwineScript operator processing.  For instances where you need to run some pure JavaScript and don't want to waste time performing extra processing on code that has no story or temporary variables or TwineScript operators in it and/or worry about the parser possibly clobbering the code.</p>
<p role="note"><b>Note:</b>
The predefined variable <code>output</code>, which is a reference to a local content buffer, is available for use within the macro's code contents.  Once the code has been fully executed, the contents of the buffer, if any, will be output.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code> Basic
&lt;&lt;script&gt;&gt;
	/* pure JavaScript code */
&lt;&lt;/script&gt;&gt;

 Modifying the content buffer
&lt;&lt;script&gt;&gt;
	/* Parse some markup and append the result to the output buffer. */
	$(output).wiki("Cry 'Havoc!', and let slip the //ponies// of ''friendship''.");
&lt;&lt;/script&gt;&gt;
</code></pre>
<!-- ***************************************************************************
	Display Macros
**************************************************************************** -->
<h2 id="macros-display"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-display" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Display Macros </span></h2>
<!-- *********************************************************************** -->
<h3 id="macros-macro-equal"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-equal" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;= expression&gt;&gt;</code> </span></h3>
<p>Outputs a string representation of the result of the given expression.  This macro is an alias for <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-print"><code>&lt;&lt;print&gt;&gt;</code></a>.</p>
<p role="note" class="tip"><b>Tip:</b>
If you only need to print the value of a TwineScript variable, then you may simply include it in your normal passage text and it will be printed automatically via the <a href="https://www.motoslave.net/sugarcube/2/docs/#markup-naked-variable">naked variable markup</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>expression</code>:</strong> A valid expression.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-expressions">Expressions</a> for more information.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Assuming $gold is 5
You found &lt;&lt;= $gold&gt;&gt; gold.              Outputs: You found 5 gold.

 Assuming $weight is 74.6466266
You weigh &lt;&lt;= $weight.toFixed(2)&gt;&gt; kg.   Outputs: You weigh 74.65 kg.
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-hyphen"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-hyphen" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;- expression&gt;&gt;</code> </span></h3>
<p>Outputs a string representation of the result of the given expression.  This macro is functionally identical to <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-print"><code>&lt;&lt;print&gt;&gt;</code></a>, save that it also encodes HTML special characters in the output.</p>
<p role="note" class="tip"><b>Tip:</b>
If you only need to print the value of a TwineScript variable, then you may simply include it in your normal passage text and it will be printed automatically via the <a href="https://www.motoslave.net/sugarcube/2/docs/#markup-naked-variable">naked variable markup</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>expression</code>:</strong> A valid expression.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-expressions">Expressions</a> for more information.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Assuming $gold is 5
You found &lt;&lt;- $gold&gt;&gt; gold.              Outputs: You found 5 gold.

 Assuming $weight is 74.6466266
You weigh &lt;&lt;- $weight.toFixed(2)&gt;&gt; kg.   Outputs: You weigh 74.65 kg.
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-include"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-include" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;include passageName [elementName]&gt;&gt;</code><br><code>&lt;&lt;include linkMarkup [elementName]&gt;&gt;</code> </span></h3>
<p>Outputs the contents of the passage with the given name, optionally wrapping it within an HTML element.  May be called either with the passage name or with a link markup.</p>
<h4>History:</h4>
<ul>
<li><code>v2.15.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<h5>Passage name form</h5>
<ul>
<li><strong><code>passageName</code>:</strong> The name of the passage to include.</li>
<li><strong><code>elementName</code>:</strong> (optional) The HTML element to wrap the included passage in.  If used, the element will include the passage's name normalized into a class name.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#css-passage-conversions">CSS passage conversions</a> for more information.</li>
</ul>
<h5>Link markup form</h5>
<ul>
<li><strong><code>linkMarkup</code>:</strong> The link markup to use (regular syntax only, no setters).</li>
<li><strong><code>elementName</code>:</strong> <em>Identical to the passage name form.</em></li>
</ul>
<h4>Examples:</h4>
<pre><code>&lt;&lt;include "Go West"&gt;&gt;           Include the passage "Go West"
&lt;&lt;include [[Go West]]&gt;&gt;         Include the passage "Go West"
&lt;&lt;include "Go West" "div"&gt;&gt;     Include the passage "Go West", wrapping it within a &lt;div&gt;
&lt;&lt;include [[Go West]] "div"&gt;&gt;   Include the passage "Go West", wrapping it within a &lt;div&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-nobr"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-nobr" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;nobr&gt;&gt;  &lt;&lt;/nobr&gt;&gt;</code> </span></h3>
<p>Executes its contents and outputs the result, after removing leading/trailing newlines and replacing all remaining sequences of newlines with single spaces.</p>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-nobr"><code>nobr</code> special tag</a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-nobr"><code>Config.passages.nobr</code> setting</a> applies the same processing to an entire passage or all passages, respectively.  The <a href="https://www.motoslave.net/sugarcube/2/docs/#markup-line-continuation">line continuation markup</a> performs a similar function, though in a slightly different way.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code> Given: $feeling eq "blue", outputs: I'd like a blueberry pie.
I'd like a &lt;&lt;nobr&gt;&gt;
&lt;&lt;if $feeling eq "blue"&gt;&gt;
blueberry
&lt;&lt;else&gt;&gt;
cherry
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt; pie.
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-print"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-print" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;print expression&gt;&gt;</code> </span></h3>
<p>Outputs a string representation of the result of the given expression.</p>
<p role="note" class="tip"><b>Tip:</b>
If you only need to print the value of a TwineScript variable, then you may simply include it in your normal passage text and it will be printed automatically via the <a href="https://www.motoslave.net/sugarcube/2/docs/#markup-naked-variable">naked variable markup</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>expression</code>:</strong> A valid expression.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-expressions">Expressions</a> for more information.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Assuming $gold is 5
You found &lt;&lt;print $gold&gt;&gt; gold.              Outputs: You found 5 gold.

 Assuming $weight is 74.6466266
You weigh &lt;&lt;print $weight.toFixed(2)&gt;&gt; kg.   Outputs: You weigh 74.65 kg.
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-silently"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-silently" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;silently&gt;&gt;  &lt;&lt;/silently&gt;&gt;</code> </span></h3>
<p>Causes any output generated within its body to be discarded, except for errors (which will be displayed).  Generally, only really useful for formatting blocks of macros for ease of use/readability, while ensuring that no output is generated, from spacing or whatnot.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code> Basic
&lt;&lt;silently&gt;&gt;

	You'll never see any of this!

&lt;&lt;/silently&gt;&gt;

 Hiding the guts of a countdown timer
&lt;&lt;set $seconds to 10&gt;&gt;\
Countdown: &lt;span id="countdown"&gt;$seconds seconds remaining&lt;/span&gt;!\
&lt;&lt;silently&gt;&gt;
	&lt;&lt;repeat 1s&gt;&gt;
		&lt;&lt;set $seconds to $seconds - 1&gt;&gt;
		&lt;&lt;if $seconds gt 0&gt;&gt;
			&lt;&lt;replace "#countdown"&gt;&gt;$seconds seconds remaining&lt;&lt;/replace&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;replace "#countdown"&gt;&gt;Too Late&lt;&lt;/replace&gt;&gt;
			/* do something useful here */
			&lt;&lt;stop&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/repeat&gt;&gt;
&lt;&lt;/silently&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-type"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-type" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;type speed [start delay] [class classes] [element tag] [id ID] [keep|none] [skipkey key]&gt;&gt;</code><br><span class="child"><code></code></span><br><code>&lt;&lt;/type&gt;&gt;</code> </span></h3>
<p>Outputs its contents a charactertechnically, a code pointat a time, mimicking a teletype/typewriter.  Can type most content: links, markup, macros, etc.</p>
<p role="note" class="warning"><b>Warning:</b>
Interactions with macros or other code that inject content only after some external action or periode.g., <code>&lt;&lt;linkreplace&gt;&gt;</code>, <code>&lt;&lt;timed&gt;&gt;</code>, etc.may or may not behave as you'd expect.  Testing is <strong><em>strongly</em></strong> advised.
</p>
<p role="note" class="see"><b>See Also:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-macros-typeskipkey"><code>Config.macros.typeSkipKey</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-macros-typevisitedpassages"><code>Config.macros.typeVisitedPassages</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#events-type-macro"><code>&lt;&lt;type&gt;&gt;</code> Events</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.32.0</code>: Introduced.</li>
<li><code>v2.33.0</code>: Added <code>class</code>, <code>element</code>, and <code>id</code> options and <code>macro-type-done</code> class.</li>
<li><code>v2.33.1</code>: Added <code>skipkey</code> option.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>speed</code>:</strong> The rate at which characters are typed, as a valid <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/time">CSS time value</a>e.g., <code>1s</code> and <code>40ms</code>.  Values in the range <code>2060ms</code> are a good starting point.</li>
<li><strong><code>start</code> <em><code>delay</code></em>:</strong> (optional) The amount of time to delay the start of typing, as a valid <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/time">CSS time value</a>e.g., <code>5s</code> and <code>500ms</code>.  If omitted, defaults to <code>400ms</code>.</li>
<li><strong><code>class</code> <em><code>classes</code></em>:</strong> (optional) The space separated list of classes to be added to the typing container.</li>
<li><strong><code>element</code> <em><code>tag</code></em>:</strong> (optional) The element to use as the typing containere.g., <code>div</code> and <code>span</code>.  If omitted, defaults to <code>div</code>.</li>
<li><strong><code>id</code> <em><code>ID</code></em>:</strong> (optional) The unique ID to be assigned to the typing container.</li>
<li><strong><code>keep</code>:</strong> (optional) Keyword, used to signify that the cursor should be kept after typing is complete.</li>
<li><strong><code>none</code>:</strong> (optional) Keyword, used to signify that the cursor should not be used at all.</li>
<li><strong><code>skipkey</code>:</strong> (optional) The key used to cause typing to finish immediately.  If omitted, defaults to the value of <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-macros-typeskipkey"><code>Config.macros.typeSkipKey</code></a>.</li>
</ul>
<h4>Examples:</h4>
<pre><code>&lt;&lt;type 40ms&gt;&gt;
	Type characters from this content every 40 milliseconds.  Including [[links]] and ''other markup''!
&lt;&lt;/type&gt;&gt;

&lt;&lt;type 40ms start 2s&gt;&gt;
	Type characters from this content every 40 milliseconds, starting after a 2 second delay.
&lt;&lt;/type&gt;&gt;

&lt;&lt;type 40ms class "foo bar"&gt;&gt;
	Type characters from this content every 40 milliseconds, adding classes to the typing container.
&lt;&lt;/type&gt;&gt;

&lt;&lt;type 40ms element "span"&gt;&gt;
	Type characters from this content every 40 milliseconds, using a &lt;span&gt; as the typing container.
&lt;&lt;/type&gt;&gt;

&lt;&lt;type 40ms id "type01"&gt;&gt;
	Type characters from this content every 40 milliseconds, assigning an ID to the typing container.
&lt;&lt;/type&gt;&gt;

&lt;&lt;type 40ms keep&gt;&gt;
	Type characters from this content every 40 milliseconds, keeping the cursor after typing is complete.
&lt;&lt;/type&gt;&gt;

&lt;&lt;type 40ms skipkey "Control"&gt;&gt;
	Type characters from this content every 40 milliseconds, using the Control (CTRL) key as the skip key.
&lt;&lt;/type&gt;&gt;
</code></pre>
<h4>CSS styles:</h4>
<p>The typed text has no default styling.  If you want to change the font or color, then you'll need to change the styling of the <code>macro-type</code> class.  For example:</p>
<pre><code class="language-css">.macro-type {
	color: limegreen;
	font-family: monospace, monospace;
}
</code></pre>
<p>There's also a <code>macro-type-done</code> class that is added to text that has finished typing, which may be used to style it differently from actively typing text.</p>
<p>The default cursor is the block element character <strong>Right Half Block (U+2590)</strong> and it has no default font or color styling.  If you want to change the font, color, or character, then you'll need to change the styling of the <code>:after</code> pseudo-element of the <code>macro-type-cursor</code> class.  For example:</p>
<pre><code class="language-css">.macro-type-cursor:after {
	color: limegreen;
	content: "\269C\FE0F"; /* Fleur-de-lis emoji */
	font-family: monospace, monospace;
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-display"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-display" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>&lt;&lt;display passageName [elementName]&gt;&gt;</code><br><code>&lt;&lt;display linkMarkup [elementName]&gt;&gt;</code></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This macro has been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-include"><code>&lt;&lt;include&gt;&gt;</code></a> macro for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.15.0</code>: Deprecated in favor of <code>&lt;&lt;include&gt;&gt;</code>.</li>
</ul>
<!-- ***************************************************************************
	Control Macros
**************************************************************************** -->
<h2 id="macros-control"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-control" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Control Macros </span></h2>
<!-- *********************************************************************** -->
<h3 id="macros-macro-if"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-if" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;if conditional&gt;&gt;  [&lt;&lt;elseif conditional&gt;&gt; ] [&lt;&lt;else&gt;&gt; ] &lt;&lt;/if&gt;&gt;</code> </span></h3>
<p>Executes its contents if the given conditional expression evaluates to <code>true</code>.  If the condition evaluates to <code>false</code> and an <code>&lt;&lt;elseif&gt;&gt;</code> or <code>&lt;&lt;else&gt;&gt;</code> exists, then other contents can be executed.</p>
<p role="note"><b>Note:</b>
SugarCube does not trim whitespace from the contents of <code>&lt;&lt;if&gt;&gt;</code> macros, so that authors don't have to resort to various kludges to get whitespace where they want it.  This means, however, that extra care must be taken when writing them to ensure that unwanted whitespace is not created within the final output.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>conditional</code>:</strong> A valid conditional expression, evaluating to either <code>true</code> or <code>false</code>.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-expressions">Expressions</a> for more information.</li>
</ul>
<h4>TwineScript conditional operators:</h4>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>is</code></th>
<td>Evaluates to <code>true</code> if both sides are <span title="Both sides have the same type and value." class="info"><em>strictly</em> equal</span>.</td>
<td><pre><code>&lt;&lt;if $bullets is 6&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>isnot</code></th>
<td>Evaluates to <code>true</code> if both sides are <span title="Both sides do not have the same type and/or value." class="info"><em>strictly</em> not equal</span>.</td>
<td><pre><code>&lt;&lt;if $pie isnot "cherry"&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>eq</code></th>
<td>Evaluates to <code>true</code> if both sides are <span title="Both sides have the same value or coerce into the same value." class="info">equivalent</span>.</td>
<td><pre><code>&lt;&lt;if $bullets eq 6&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>neq</code></th>
<td>Evaluates to <code>true</code> if both sides are <span title="Both sides do not have the same value nor do they coerce into the same value." class="info">not equivalent</span>.</td>
<td><pre><code>&lt;&lt;if $pie neq "cherry"&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>gt</code></th>
<td>Evaluates to <code>true</code> if the left side is greater than the right side.</td>
<td><pre><code>&lt;&lt;if $cash gt 5&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>gte</code></th>
<td>Evaluates to <code>true</code> if the left side is greater than or equal to the right side.</td>
<td><pre><code>&lt;&lt;if $foundStars gte $neededStars&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>lt</code></th>
<td>Evaluates to <code>true</code> if the left side is less than the right side.</td>
<td><pre><code>&lt;&lt;if $shoeCount lt ($peopleCount * 2)&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>lte</code></th>
<td>Evaluates to <code>true</code> if the left side is less than or equal to the right side.</td>
<td><pre><code>&lt;&lt;if $level lte 30&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>not</code></th>
<td>Flips a <code>true</code> evaluation to <code>false</code>, and vice versa.</td>
<td><pre><code>&lt;&lt;if not $hungry&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>and</code></th>
<td>Evaluates to <code>true</code> if all subexpressions evaluate to <code>true</code>.</td>
<td><pre><code>&lt;&lt;if $age gte 20 and $age lte 30&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>or</code></th>
<td>Evaluates to <code>true</code> if any subexpressions evaluate to <code>true</code>.</td>
<td><pre><code>&lt;&lt;if $friend is "Sue" or $friend is "Dan"&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>def</code></th>
<td>Evaluates to <code>true</code> if the right side is defined.</td>
<td><pre><code>&lt;&lt;if def $mushrooms&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>ndef</code></th>
<td>Evaluates to <code>true</code> if the right side is not defined.</td>
<td><pre><code>&lt;&lt;if ndef $bottlecaps&gt;&gt;</code></pre></td>
</tr>
</tbody>
</table>
<p role="note" class="warning"><b>Warning:</b>
The <code>def</code> and <code>ndef</code> operators have very low precedence, so it is <strong><em>strongly</em></strong> recommended that if you mix them with other operators, that you wrap them in parenthesese.g., <code>(def $style) and ($style is "girly")</code>.
</p>
<h4>JavaScript conditional operators: <em>(not an exhaustive list)</em></h4>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>===</code></th>
<td>Evaluates to <code>true</code> if both sides are <span title="Both sides have the same type and value." class="info"><em>strictly</em> equal</span>.</td>
<td><pre><code>&lt;&lt;if $bullets === 6&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>!==</code></th>
<td>Evaluates to <code>true</code> if both sides are <span title="Both sides do not have the same type and/or value." class="info"><em>strictly</em> not equal</span>.</td>
<td><pre><code>&lt;&lt;if $pie !== "cherry"&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>==</code></th>
<td>Evaluates to <code>true</code> if both sides are <span title="Both sides have the same value or coerce into the same value." class="info">equivalent</span>.</td>
<td><pre><code>&lt;&lt;if $bullets == 6&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>!=</code></th>
<td>Evaluates to <code>true</code> if both sides are <span title="Both sides do not have the same value nor do they coerce into the same value." class="info">not equivalent</span>.</td>
<td><pre><code>&lt;&lt;if $pie != "cherry"&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>&gt;</code></th>
<td>Evaluates to <code>true</code> if the left side is greater than the right side.</td>
<td><pre><code>&lt;&lt;if $cash &gt; 5&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>&gt;=</code></th>
<td>Evaluates to <code>true</code> if the left side is greater than or equal to the right side.</td>
<td><pre><code>&lt;&lt;if $foundStars &gt;= $neededStars&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>&lt;</code></th>
<td>Evaluates to <code>true</code> if the left side is less than the right side.</td>
<td><pre><code>&lt;&lt;if $shoeCount &lt; ($peopleCount * 2)&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>&lt;=</code></th>
<td>Evaluates to <code>true</code> if the left side is less than or equal to the right side.</td>
<td><pre><code>&lt;&lt;if $level &lt;= 30&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>!</code></th>
<td>Flips a <code>true</code> evaluation to <code>false</code>, and vice versa.</td>
<td><pre><code>&lt;&lt;if !$hungry&gt;&gt;</code></pre></td>
</tr><tr>
<th><code>&amp;&amp;</code></th>
<td>Evaluates to <code>true</code> if all subexpressions evaluate to <code>true</code>.</td>
<td><pre><code>&lt;&lt;if $age &gt;= 20 &amp;&amp; $age &lt;= 30&gt;&gt;</code></pre></td>
</tr>
<tr>
<th><code>||</code></th>
<td>Evaluates to <code>true</code> if any subexpressions evaluate to <code>true</code>.</td>
<td><pre><code>&lt;&lt;if $friend === "Sue" || $friend === "Dan"&gt;&gt;</code></pre></td>
</tr>

</tbody>
</table>
<h4>Examples:</h4>
<pre><code>&lt;&lt;if $daysUntilLoanDue is 0&gt;&gt;&lt;&lt;include "Panic"&gt;&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;if $cash lt 5&gt;&gt;
	I'm sorry, ma'am, but you don't have enough for the pie.
&lt;&lt;else&gt;&gt;
	&lt;&lt;set $cash -= 5, $hasMeatPie = true&gt;&gt;
	One meat pie, fresh out of the oven, coming up!
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $affection gte 75&gt;&gt;
	I love you!
&lt;&lt;elseif $affection gte 50&gt;&gt;
	I like you.
&lt;&lt;elseif $affection gte 25&gt;&gt;
	I'm okay with you.
&lt;&lt;else&gt;&gt;
	Get out of my face.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $hullBreached&gt;&gt;
	&lt;&lt;if $wearingHardSuit&gt;&gt;
		&lt;&lt;include "That was close"&gt;&gt;
	&lt;&lt;elseif $wearingSoftSuit&gt;&gt;
		&lt;&lt;include "Hole in suit"&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;include "You die"&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-for"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-for" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;for [conditional]&gt;&gt;  &lt;&lt;/for&gt;&gt;</code><br><code>&lt;&lt;for [init] ; [conditional] ; [post]&gt;&gt;  &lt;&lt;/for&gt;&gt;</code><br><code>&lt;&lt;for [keyVariable ,] valueVariable range collection&gt;&gt;  &lt;&lt;/for&gt;&gt;</code> </span></h3>
<p>Repeatedly executes its contents. There are three forms: a conditional-only form, a 3-part conditional form, and a range form.</p>
<p role="note" class="see"><b>See Also:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-break"><code>&lt;&lt;break&gt;&gt;</code></a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-continue"><code>&lt;&lt;continue&gt;&gt;</code></a>.
</p>
<h5>History:</h5>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.20.0</code>: Added range form.</li>
</ul>
<h4>Notes</h4>
<ul>
<li>Loop variables are perfect candidates for the use of temporary variablese.g., <code>_i</code>.</li>
<li>To ensure that line-breaks end up where you want them, or not, extra care may be required.</li>
</ul>
<h4>Conditional forms <em>(both conditional-only and 3-part)</em></h4>
<p>Executes its contents while the given conditional expression evaluates to <code>true</code>.  If no conditional expression is given, it is equivalent to specifying <code>true</code>.</p>
<p role="note"><b>Note:</b>
The maximum number of loop iterations in the conditional forms is not unlimited by default, however, it is configurable.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-macros-maxloopiterations"><code>Config.macros.maxLoopIterations</code></a> for more information.
</p>
<h5>Arguments:</h5>
<ul>
<li><strong><code>init</code>:</strong> (optional) A valid expression, evaluated once at loop initialization.  Typically used to initialize counter variable(s).  See <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-set"><code>&lt;&lt;set&gt;&gt;</code></a> for more information.</li>
<li><strong><code>conditional</code>:</strong> (optional) A valid conditional expression, evaluated prior to each loop iteration.  As long as the expression evaluates to <code>true</code>, the loop is executed.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-if"><code>&lt;&lt;if&gt;&gt;</code></a> for more information.</li>
<li><strong><code>post</code>:</strong> (optional) A valid expression, evaluated after each loop iteration.  Typically used to update counter variable(s).  See <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-set"><code>&lt;&lt;set&gt;&gt;</code></a> for more information.</li>
</ul>
<h5>Examples: <em>(only 3-part conditional form shown)</em></h5>
<pre><code> Example setup
&lt;&lt;set $dwarves to ["Doc", "Dopey", "Bashful", "Grumpy", "Sneezy", "Sleepy", "Happy"]&gt;&gt;

 Loop
&lt;&lt;for _i to 0; _i lt $dwarves.length; _i++&gt;&gt;
&lt;&lt;print _i + 1&gt;&gt;. $dwarves[_i]
&lt;&lt;/for&gt;&gt;

 Result
1. Doc
2. Dopey
3. Bashful
4. Grumpy
5. Sneezy
6. Sleepy
7. Happy
</code></pre>
<h4>Range form</h4>
<p>Iterates through all enumerable entries of the given collection.  For each iteration, it assigns the key/value pair of the associated entry in the collection to the iteration variables and then executes its contents.  Valid collection types are: arrays, generic objects, maps, sets, and strings.</p>
<h5>Arguments:</h5>
<ul>
<li><strong><code>keyVariable</code>:</strong> (optional) A story or temporary variable that will be set to the iteration key.</li>
<li><strong><code>valueVariable</code>:</strong> A story or temporary variable that will be set to the iteration value.</li>
<li><strong><code>range</code>:</strong> Keyword, used to signify that the loop is using the range form syntax.</li>
<li><strong><code>collection</code>:</strong> An expression that yields a valid collection type, evaluated once at loop initialization.</li>
</ul>
<h5>Iteration Values:</h5>
<table>
<tbody>
	<tr>
		<th>Collection type</th>
		<th>Iteration: key, value</th>
	</tr>
	<tr>
		<td>Arrays &amp; Sets</td>
		<td style="text-align: center;">Member: index, value</td>
	</tr>
	<tr>
		<td>Generic&nbsp;objects</td>
		<td style="text-align: center;">Property: name, value</td>
	</tr>
	<tr>
		<td>Maps</td>
		<td style="text-align: center;">Entry: key, value</td>
	</tr>
	<tr>
		<td>Strings</td>
		<td style="text-align: center;">Code point: start&nbsp;index, value</td>
	</tr>
</tbody>
</table>
<p role="note"><b>Note:</b>
Strings are iterated by Unicode code point, however, due to historic reasons they are comprised of, and indexed by, individual UTF-16 code units.  This means that some code points may span multiple code unitse.g., the character  is one code point, but two code units.
</p>
<h5>Examples:</h5>
<pre><code> Example setup
&lt;&lt;set $dwarves to ["Doc", "Dopey", "Bashful", "Grumpy", "Sneezy", "Sleepy", "Happy"]&gt;&gt;

 Loop
&lt;&lt;for _i, _name range $dwarves&gt;&gt;
&lt;&lt;print _i + 1&gt;&gt;. _name
&lt;&lt;/for&gt;&gt;

 Result
1. Doc
2. Dopey
3. Bashful
4. Grumpy
5. Sneezy
6. Sleepy
7. Happy
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-break"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-break" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;break&gt;&gt;</code> </span></h3>
<p>Used within <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-for"><code>&lt;&lt;for&gt;&gt;</code></a> macros.  Terminates the execution of the current <code>&lt;&lt;for&gt;&gt;</code>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments: <em>none</em></h4>
<!-- *********************************************************************** -->
<h3 id="macros-macro-continue"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-continue" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;continue&gt;&gt;</code> </span></h3>
<p>Used within <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-for"><code>&lt;&lt;for&gt;&gt;</code></a> macros.  Terminates the execution of the current iteration of the current <code>&lt;&lt;for&gt;&gt;</code> and begins execution of the next iteration.</p>
<p role="note"><b>Note:</b>
May eat line-breaks in certain situations.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments: <em>none</em></h4>
<!-- *********************************************************************** -->
<h3 id="macros-macro-switch"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-switch" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;switch expression&gt;&gt;</code><br><span class="child"><code>[&lt;&lt;case valueList&gt;&gt; ]</code><br><code>[&lt;&lt;default&gt;&gt; ]</code></span><br><code>&lt;&lt;/switch&gt;&gt;</code> </span></h3>
<p>Evaluates the given expression and compares it to the value(s) within its <code>&lt;&lt;case&gt;&gt;</code> children.  The value(s) within each case are compared to the result of the expression given to the parent <code>&lt;&lt;switch&gt;&gt;</code>.  Upon a successful match, the matching case will have its contents executed.  If no cases match and an optional <code>&lt;&lt;default&gt;&gt;</code> case exists, which must be the final case, then its contents will be executed.  At most one case will execute.</p>
<p role="note"><b>Note:</b>
SugarCube does not trim whitespace from the contents of <code>&lt;&lt;case&gt;&gt;</code>/<code>&lt;&lt;default&gt;&gt;</code> macros, so that authors don't have to resort to various kludges to get whitespace where they want it.  However, this means that extra care must be taken when writing them to ensure that unwanted whitespace is not created within the final output.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.7.2</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<h5><code>&lt;&lt;switch&gt;&gt;</code></h5>
<ul>
<li><strong><code>expression</code>:</strong> A valid expression.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-expressions">Expressions</a> for more information.</li>
</ul>
<h5><code>&lt;&lt;case&gt;&gt;</code></h5>
<ul>
<li><strong><code>valueList</code>:</strong> A space separated list of values to compare against the result of the switch expression.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Without a default case
&lt;&lt;switch $hairColor&gt;&gt;
&lt;&lt;case "red" "auburn"&gt;&gt;
	You ginger.
&lt;&lt;case "black" "brown"&gt;&gt;
	Dark haired, eh?
&lt;&lt;case "blonde"&gt;&gt;
	You may have more fun.
&lt;&lt;/switch&gt;&gt;

 With a default case (assume the passage is about a waterfall)
&lt;&lt;switch visited()&gt;&gt;
&lt;&lt;case 1&gt;&gt;
	You gaze in wonder at the magnificent waterfall for the first time, awestruck by its natural beauty.
&lt;&lt;case 2 3&gt;&gt;
	You once again gaze upon the magnificent waterfall.
&lt;&lt;case 4 5&gt;&gt;
	Yet again, you find yourself looking upon the waterfall.
&lt;&lt;default&gt;&gt;
	Oh, look.  It's that waterfall again.  Meh.
&lt;&lt;/switch&gt;&gt;
</code></pre>
<!-- ***************************************************************************
	Interactive Macros
**************************************************************************** -->
<h2 id="macros-interactive"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Interactive Macros </span></h2>
<h4 id="macros-interactive-warning"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive-warning" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Warning </span></h4>
<p>Interactive macros are both asynchronous and require interaction from the player.  Thus, there are some potential pitfalls to consider:</p>
<ol>
<li>If you plan on using interactive macros within a loop you will likely need to use the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-capture"><code>&lt;&lt;capture&gt;&gt;</code> macro</a> due to their asynchronous nature.</li>
<li>Reloading the page or revisiting a passage may not restore the state of some interactive macros, so it is recommended that you only use them in instances where this will not be an issue or where you can work around it.</li>
</ol>
<!-- *********************************************************************** -->
<h3 id="macros-macro-button"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-button" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;button linkText [passageName]&gt;&gt;  &lt;&lt;/button&gt;&gt;</code><br><code>&lt;&lt;button linkMarkup&gt;&gt;  &lt;&lt;/button&gt;&gt;</code><br><code>&lt;&lt;button imageMarkup&gt;&gt;  &lt;&lt;/button&gt;&gt;</code> </span></h3>
<p>Creates a button that silently executes its contents when clicked, optionally forwarding the player to another passage.  May be called with either the link text and passage name as separate arguments, a link markup, or an image markup.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive-warning">Interactive macro warning</a>.
</p>
<p role="note"><b>Note:</b>
This macro is functionally identical to <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-link">&lt;&lt;link&gt;&gt;</a>, save that it uses a button element (<code>&lt;button&gt;</code>) rather than an anchor element (<code>&lt;a&gt;</code>).
</p>
<h4>History:</h4>
<ul>
<li><code>v2.8.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<h5>Separate argument form</h5>
<ul>
<li><strong><code>linkText</code>:</strong> The text of the link.  May contain markup.</li>
<li><strong><code>passageName</code>:</strong> (optional) The name of the passage to go to.</li>
</ul>
<h5>Link markup form</h5>
<ul>
<li><strong><code>linkMarkup</code>:</strong> The link markup to use (regular syntax only, no setters).</li>
</ul>
<h5>Image markup form</h5>
<ul>
<li><strong><code>imageMarkup</code>:</strong> The image markup to use (regular syntax only, no setters).</li>
</ul>
<h4>Examples:</h4>
<pre><code> Without forwarding: a very basic statistic setting example
Strength: &lt;&lt;set $pcStr to 10&gt;&gt;&lt;span id="stats-str"&gt;&lt;&lt;print $pcStr&gt;&gt;&lt;/span&gt; \
( &lt;&lt;button "[+]"&gt;&gt;&lt;&lt;set $pcStr++&gt;&gt;&lt;&lt;replace "#stats-str"&gt;&gt;&lt;&lt;print $pcStr&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt; \
| &lt;&lt;button "[-]"&gt;&gt;&lt;&lt;set $pcStr--&gt;&gt;&lt;&lt;replace "#stats-str"&gt;&gt;&lt;&lt;print $pcStr&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/button&gt;&gt; )

 With forwarding: execute a script, then go to the specified passage
&lt;&lt;button "Onward, Reginald!" "On with the story"&gt;&gt;&lt;&lt;script&gt;&gt;/* (code) */&lt;&lt;/script&gt;&gt;&lt;&lt;/button&gt;&gt;
&lt;&lt;button [[Onward, Reginald!|On with the story]]&gt;&gt;&lt;&lt;script&gt;&gt;/* (code) */&lt;&lt;/script&gt;&gt;&lt;&lt;/button&gt;&gt;
&lt;&lt;button [img[onward.jpg][On with the story]]&gt;&gt;&lt;&lt;script&gt;&gt;/* (code) */&lt;&lt;/script&gt;&gt;&lt;&lt;/button&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-checkbox"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-checkbox" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;checkbox receiverName uncheckedValue checkedValue [autocheck|checked]&gt;&gt;</code> </span></h3>
<p>Creates a checkbox, used to modify the value of the variable with the given name.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive-warning">Interactive macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.32.0</code>: Added <code>autocheck</code> keyword.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>receiverName</code>:</strong> The name of the variable to modify, which <em>must</em> be quotede.g., <code>"$foo"</code>.  Object and array property references are also supportede.g., <code>"$foo.bar"</code>, <code>"$foo['bar']"</code>, &amp; <code>"$foo[0]"</code>.</li>
<li><strong><code>uncheckedValue</code>:</strong> The value set by the checkbox when unchecked.</li>
<li><strong><code>checkedValue</code>:</strong> The value set by the checkbox when checked.</li>
<li><strong><code>autocheck</code>:</strong> (optional) Keyword, used to signify that the checkbox should be automatically set to the checked state based on the current value of the receiver variable.  <strong>NOTE:</strong> Automatic checking may fail on non-primitive valuesi.e., on arrays and objects.</li>
<li><strong><code>checked</code>:</strong> (optional) Keyword, used to signify that the checkbox should be in the checked state.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>What pies do you enjoy?
* &lt;&lt;checkbox "$pieBlueberry" false true autocheck&gt;&gt; Blueberry?
* &lt;&lt;checkbox "$pieCherry" false true autocheck&gt;&gt; Cherry?
* &lt;&lt;checkbox "$pieCoconutCream" false true autocheck&gt;&gt; Coconut cream?
</code></pre>
<pre><code>What pies do you enjoy?
* &lt;&lt;checkbox "$pieBlueberry" false true checked&gt;&gt; Blueberry?
* &lt;&lt;checkbox "$pieCherry" false true&gt;&gt; Cherry?
* &lt;&lt;checkbox "$pieCoconutCream" false true checked&gt;&gt; Coconut cream?
</code></pre>
<h5>With a <code>&lt;label&gt;</code> element</h5>
<p role="note" class="tip"><b>Tip:</b>
For accessibility reasons, it's recommended that you wrap each <code>&lt;&lt;checkbox&gt;&gt;</code> and its accompanying text within a <code>&lt;label&gt;</code> element.  Doing so allows interactions with the text to also trigger its <code>&lt;&lt;checkbox&gt;&gt;</code>.
</p>
<pre><code>What pies do you enjoy?
* &lt;label&gt;&lt;&lt;checkbox "$pieBlueberry" false true autocheck&gt;&gt; Blueberry?&lt;/label&gt;
* &lt;label&gt;&lt;&lt;checkbox "$pieCherry" false true autocheck&gt;&gt; Cherry?&lt;/label&gt;
* &lt;label&gt;&lt;&lt;checkbox "$pieCoconutCream" false true autocheck&gt;&gt; Coconut cream?&lt;/label&gt;
</code></pre>
<pre><code>What pies do you enjoy?
* &lt;label&gt;&lt;&lt;checkbox "$pieBlueberry" false true checked&gt;&gt; Blueberry?&lt;/label&gt;
* &lt;label&gt;&lt;&lt;checkbox "$pieCherry" false true&gt;&gt; Cherry?&lt;/label&gt;
* &lt;label&gt;&lt;&lt;checkbox "$pieCoconutCream" false true checked&gt;&gt; Coconut cream?&lt;/label&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-cycle"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-cycle" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;cycle receiverName [once] [autoselect]&gt;&gt;</code><br><span class="child"><code>[&lt;&lt;option label [value [selected]]&gt;&gt; ]</code><br><code>[&lt;&lt;optionsfrom collection&gt;&gt; ]</code></span><br><code>&lt;&lt;/cycle&gt;&gt;</code> </span></h3>
<p>Creates a cycling link, used to modify the value of the variable with the given name.  The cycling options are populated via <code>&lt;&lt;option&gt;&gt;</code> and/or <code>&lt;&lt;optionsfrom&gt;&gt;</code>.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive-warning">Interactive macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
<li><code>v2.36.0</code>: Fixed the <code>selected</code> keyword and added the <code>once</code> keyword.</li>
</ul>
<h4>Arguments:</h4>
<h5><code>&lt;&lt;cycle&gt;&gt;</code></h5>
<ul>
<li><strong><code>receiverName</code>:</strong> The name of the variable to modify, which <em>must</em> be quotede.g., <code>"$foo"</code>.  Object and array property references are also supportede.g., <code>"$foo.bar"</code>, <code>"$foo['bar']"</code>, &amp; <code>"$foo[0]"</code>.</li>
<li><strong><code>once</code>:</strong> (optional) Keyword, used to signify that the cycle should stop upon reaching the last option and deactivate itself.  <strong>NOTE:</strong> Since you likely want to start at the first option when using this keyword, you should either not select an option, so it defaults to the first, or, if you do, select the first option only.</li>
<li><strong><code>autoselect</code>:</strong> (optional) Keyword, used to signify that an option should be automatically selected as the cycle default based on the current value of the receiver variable.  <strong>NOTE:</strong> Automatic option selection will fail on non-primitive valuesi.e., on arrays and objects.</li>
</ul>
<h5><code>&lt;&lt;option&gt;&gt;</code></h5>
<ul>
<li><strong><code>label</code>:</strong> The label shown by the cycling link for the option.</li>
<li><strong><code>value</code>:</strong> (optional) The value set by the cycling link when the option is selected.  If omitted, the label will be used as the value.</li>
<li><strong><code>selected</code>:</strong> (optional) Keyword, used to signify that the option should be the cycle default.  Only one option may be so selected.  If no options are selected as the default, the cycling link will default to the first option, unless the cycle <code>autoselect</code> keyword is specified.  <strong>NOTE:</strong> If specified, the <code>value</code> argument is not optional.</li>
</ul>
<h5><code>&lt;&lt;optionsfrom&gt;&gt;</code></h5>
<ul>
<li><strong><code>collection</code>:</strong> An expression that yields a valid collection type.
  <table class="list-table">
  <tbody>
  	<tr>
  		<th>Collection type</th>
  		<th>Option: label, value</th>
  	</tr>
  	<tr>
  		<td>Arrays &amp; Sets</td>
  		<td style="text-align: center;">Member: value, value</td>
  	</tr>
  	<tr>
  		<td>Generic&nbsp;objects</td>
  		<td style="text-align: center;">Property: name, value</td>
  	</tr>
  	<tr>
  		<td>Maps</td>
  		<td style="text-align: center;">Entry: key, value</td>
  	</tr>
  </tbody>
  </table>
</li>
</ul>
<h4>Examples:</h4>
<h5>Using <code>&lt;&lt;option&gt;&gt;</code></h5>
<pre><code>The answer to the //Ultimate Question of Life, the Universe, and Everything// is?
&lt;&lt;cycle "$answer" autoselect&gt;&gt;
	&lt;&lt;option "Towel"&gt;&gt;
	&lt;&lt;option "" 3.14159&gt;&gt;
	&lt;&lt;option 42&gt;&gt;
	&lt;&lt;option 69&gt;&gt;
	&lt;&lt;option "" Infinity&gt;&gt;
&lt;&lt;/cycle&gt;&gt;
</code></pre>
<h5>Using <code>&lt;&lt;optionsfrom&gt;&gt;</code> with an array</h5>
<pre><code> Given: _pieOptions = ["blueberry", "cherry", "coconut cream"]
What's your favorite pie?
&lt;&lt;cycle "$pie" autoselect&gt;&gt;
	&lt;&lt;optionsfrom _pieOptions&gt;&gt;
&lt;&lt;/cycle&gt;&gt;
</code></pre>
<h5>Using <code>&lt;&lt;optionsfrom&gt;&gt;</code> with an generic object</h5>
<pre><code> Given: _pieOptions = { "Blueberry" : "blueberry", "Cherry" : "cherry", "Coconut cream" : "coconut cream" }
What's your favorite pie?
&lt;&lt;cycle "$pie" autoselect&gt;&gt;
	&lt;&lt;optionsfrom _pieOptions&gt;&gt;
&lt;&lt;/cycle&gt;&gt;
</code></pre>
<h5>Using the <code>once</code> keyword</h5>
<pre><code>You see a large red, candy-like button.
&lt;&lt;cycle "$presses" once&gt;&gt;
	&lt;&lt;option "Should you press it?" 0&gt;&gt;
	&lt;&lt;option "Nothing happened.  Press it again?" 1&gt;&gt;
	&lt;&lt;option "Again?" 2&gt;&gt;
	&lt;&lt;option "That time it locked into place with a loud click and began to glow ominously." 3&gt;&gt;
&lt;&lt;/cycle&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-link"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-link" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;link linkText [passageName]&gt;&gt;  &lt;&lt;/link&gt;&gt;</code><br><code>&lt;&lt;link linkMarkup&gt;&gt;  &lt;&lt;/link&gt;&gt;</code><br><code>&lt;&lt;link imageMarkup&gt;&gt;  &lt;&lt;/link&gt;&gt;</code> </span></h3>
<p>Creates a link that silently executes its contents when clicked, optionally forwarding the player to another passage.  May be called with either the link text and passage name as separate arguments, a link markup, or an image markup.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive-warning">Interactive macro warning</a>.
</p>
<p role="note"><b>Note:</b>
If you simply need a passage link that modifies variables, both the <a href="https://www.motoslave.net/sugarcube/2/docs/#markup-link">link markup</a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#markup-image">image markup</a> offer setter variants.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.8.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<h5>Separate argument form</h5>
<ul>
<li><strong><code>linkText</code>:</strong> The text of the link.  May contain markup.</li>
<li><strong><code>passageName</code>:</strong> (optional) The name of the passage to go to.</li>
</ul>
<h5>Link markup form</h5>
<ul>
<li><strong><code>linkMarkup</code>:</strong> The link markup to use (regular syntax only, no setters).</li>
</ul>
<h5>Image markup form</h5>
<ul>
<li><strong><code>imageMarkup</code>:</strong> The image markup to use (regular syntax only, no setters).</li>
</ul>
<h4>Examples:</h4>
<pre><code> Without forwarding: a very basic statistic setting example
Strength: &lt;&lt;set $pcStr to 10&gt;&gt;&lt;span id="stats-str"&gt;&lt;&lt;print $pcStr&gt;&gt;&lt;/span&gt; \
( &lt;&lt;link "[+]"&gt;&gt;&lt;&lt;set $pcStr++&gt;&gt;&lt;&lt;replace "#stats-str"&gt;&gt;&lt;&lt;print $pcStr&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; \
| &lt;&lt;link "[-]"&gt;&gt;&lt;&lt;set $pcStr--&gt;&gt;&lt;&lt;replace "#stats-str"&gt;&gt;&lt;&lt;print $pcStr&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt; )

 With forwarding: execute a script, then go to the specified passage
&lt;&lt;link "Onward, Reginald!" "On with the story"&gt;&gt;&lt;&lt;script&gt;&gt;/* (code) */&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link [[Onward, Reginald!|On with the story]]&gt;&gt;&lt;&lt;script&gt;&gt;/* (code) */&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link [img[onward.jpg][On with the story]]&gt;&gt;&lt;&lt;script&gt;&gt;/* (code) */&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-linkappend"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-linkappend" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;linkappend linkText [transition|t8n]&gt;&gt;  &lt;&lt;/linkappend&gt;&gt;</code> </span></h3>
<p>Creates a single-use link that deactivates itself and appends its contents to its link text when clicked.  Essentially, a combination of <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-link"><code>&lt;&lt;link&gt;&gt;</code></a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-append"><code>&lt;&lt;append&gt;&gt;</code></a>.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive-warning">Interactive macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>linkText</code>:</strong> The text of the link.  May contain markup.</li>
<li><strong><code>transition</code>:</strong> (optional) Keyword, used to signify that a CSS transition should be applied to the incoming insertions.</li>
<li><strong><code>t8n</code>:</strong> (optional) Keyword, alias for <strong><code>transition</code></strong>.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Without a transition
WeWe should &lt;&lt;linkappend "take"&gt;&gt; away their METAL BAWKSES&lt;&lt;/linkappend&gt;&gt;!

 With a transition
I spy with my little &lt;&lt;linkappend "eye" t8n&gt;&gt;, a crab rangoon&lt;&lt;/linkappend&gt;&gt;.
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-linkprepend"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-linkprepend" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;linkprepend linkText [transition|t8n]&gt;&gt;  &lt;&lt;/linkprepend&gt;&gt;</code> </span></h3>
<p>Creates a single-use link that deactivates itself and prepends its contents to its link text when clicked.  Essentially, a combination of <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-link"><code>&lt;&lt;link&gt;&gt;</code></a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-prepend"><code>&lt;&lt;prepend&gt;&gt;</code></a>.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive-warning">Interactive macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>linkText</code>:</strong> The text of the link.  May contain markup.</li>
<li><strong><code>transition</code>:</strong> (optional) Keyword, used to signify that a CSS transition should be applied to the incoming insertions.</li>
<li><strong><code>t8n</code>:</strong> (optional) Keyword, alias for <strong><code>transition</code></strong>.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Without a transition
You see a &lt;&lt;linkprepend "robot"&gt;&gt;GIANT &lt;&lt;/linkprepend&gt;&gt;.

 With a transition
I &lt;&lt;linkprepend "like" t8n&gt;&gt;do not &lt;&lt;/linkprepend&gt;&gt; lemons.
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-linkreplace"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-linkreplace" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;linkreplace linkText [transition|t8n]&gt;&gt;  &lt;&lt;/linkreplace&gt;&gt;</code> </span></h3>
<p>Creates a single-use link that deactivates itself and replaces its link text with its contents when clicked.  Essentially, a combination of <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-link"><code>&lt;&lt;link&gt;&gt;</code></a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-replace"><code>&lt;&lt;replace&gt;&gt;</code></a>.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive-warning">Interactive macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>linkText</code>:</strong> The text of the link.  May contain markup.</li>
<li><strong><code>transition</code>:</strong> (optional) Keyword, used to signify that a CSS transition should be applied to the incoming insertions.</li>
<li><strong><code>t8n</code>:</strong> (optional) Keyword, alias for <strong><code>transition</code></strong>.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Without a transition
I'll have a &lt;&lt;linkreplace "cupcake"&gt;&gt;slice of key lime pie&lt;&lt;/linkreplace&gt;&gt;, please.

 With a transition
&lt;&lt;linkreplace "You'll //never// take me alive!" t8n&gt;&gt;On second thought, don't hurt me.&lt;&lt;/linkreplace&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-listbox"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-listbox" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;listbox receiverName [autoselect]&gt;&gt;</code><br><span class="child"><code>[&lt;&lt;option label [value [selected]]&gt;&gt; ]</code><br><code>[&lt;&lt;optionsfrom collection&gt;&gt; ]</code></span><br><code>&lt;&lt;/listbox&gt;&gt;</code> </span></h3>
<p>Creates a listbox, used to modify the value of the variable with the given name.  The list options are populated via <code>&lt;&lt;option&gt;&gt;</code> and/or <code>&lt;&lt;optionsfrom&gt;&gt;</code>.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive-warning">Interactive macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.26.0</code>: Introduced.</li>
<li><code>v2.27.0</code>: Added <code>autoselect</code> keyword.</li>
<li><code>v2.28.0</code>: <s>Added <code>&lt;&lt;optionsFrom&gt;&gt;</code> child tag.</s></li>
<li><code>v2.28.1</code>: Fixed name of <code>&lt;&lt;optionsfrom&gt;&gt;</code> child tag, which was erroneously added as <code>&lt;&lt;optionsFrom&gt;&gt;</code> in <code>v2.28.0</code>.</li>
<li><code>v2.29.0</code>: Made the <code>&lt;&lt;option&gt;&gt;</code> child tag's <code>value</code> argument optional.</li>
<li><code>v2.36.0</code>: Fixed the <code>selected</code> keyword.</li>
</ul>
<h4>Arguments:</h4>
<h5><code>&lt;&lt;listbox&gt;&gt;</code></h5>
<ul>
<li><strong><code>receiverName</code>:</strong> The name of the variable to modify, which <em>must</em> be quotede.g., <code>"$foo"</code>.  Object and array property references are also supportede.g., <code>"$foo.bar"</code>, <code>"$foo['bar']"</code>, &amp; <code>"$foo[0]"</code>.</li>
<li><strong><code>autoselect</code>:</strong> (optional) Keyword, used to signify that an option should be automatically selected as the listbox default based on the current value of the receiver variable.  <strong>NOTE:</strong> Automatic option selection will fail on non-primitive valuesi.e., on arrays and objects.</li>
</ul>
<h5><code>&lt;&lt;option&gt;&gt;</code></h5>
<ul>
<li><strong><code>label</code>:</strong> The label shown by the listbox for the option.</li>
<li><strong><code>value</code>:</strong> (optional) The value set by the listbox when the option is selected.  If omitted, the label will be used as the value.</li>
<li><strong><code>selected</code>:</strong> (optional) Keyword, used to signify that the option should be the listbox default.  Only one option may be so selected.  If no options are selected as the default, the listbox will default to the first option, unless the listbox <code>autoselect</code> keyword is specified.  <strong>NOTE:</strong> If specified, the <code>value</code> argument is not optional.</li>
</ul>
<h5><code>&lt;&lt;optionsfrom&gt;&gt;</code></h5>
<ul>
<li><strong><code>collection</code>:</strong> An expression that yields a valid collection type.
  <table class="list-table">
  <tbody>
  	<tr>
  		<th>Collection type</th>
  		<th>Option: label, value</th>
  	</tr>
  	<tr>
  		<td>Arrays &amp; Sets</td>
  		<td style="text-align: center;">Member: value, value</td>
  	</tr>
  	<tr>
  		<td>Generic&nbsp;objects</td>
  		<td style="text-align: center;">Property: name, value</td>
  	</tr>
  	<tr>
  		<td>Maps</td>
  		<td style="text-align: center;">Entry: key, value</td>
  	</tr>
  </tbody>
  </table>
</li>
</ul>
<h4>Examples:</h4>
<h5>Using <code>&lt;&lt;option&gt;&gt;</code></h5>
<pre><code>The answer to the //Ultimate Question of Life, the Universe, and Everything// is?
&lt;&lt;listbox "$lbanswer" autoselect&gt;&gt;
	&lt;&lt;option "Towel"&gt;&gt;
	&lt;&lt;option "" 3.14159&gt;&gt;
	&lt;&lt;option 42&gt;&gt;
	&lt;&lt;option 69&gt;&gt;
	&lt;&lt;option "" Infinity&gt;&gt;
&lt;&lt;/listbox&gt;&gt;
</code></pre>
<h5>Using <code>&lt;&lt;optionsfrom&gt;&gt;</code> with an array</h5>
<pre><code> Given: _pieOptions = ["blueberry", "cherry", "coconut cream"]
What's your favorite pie?
&lt;&lt;listbox "$pie" autoselect&gt;&gt;
	&lt;&lt;optionsfrom _pieOptions&gt;&gt;
&lt;&lt;/listbox&gt;&gt;
</code></pre>
<h5>Using <code>&lt;&lt;optionsfrom&gt;&gt;</code> with an generic object</h5>
<pre><code> Given: _pieOptions = { "Blueberry" : "blueberry", "Cherry" : "cherry", "Coconut cream" : "coconut cream" }
What's your favorite pie?
&lt;&lt;listbox "$pie" autoselect&gt;&gt;
	&lt;&lt;optionsfrom _pieOptions&gt;&gt;
&lt;&lt;/listbox&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-numberbox"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-numberbox" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;numberbox receiverName defaultValue [passage] [autofocus]&gt;&gt;</code> </span></h3>
<p>Creates a number input box, used to modify the value of the variable with the given name, optionally forwarding the player to another passage.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive-warning">Interactive macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.32.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>receiverName</code>:</strong> The name of the variable to modify, which <em>must</em> be quotede.g., <code>"$foo"</code>.  Object and array property references are also supportede.g., <code>"$foo.bar"</code>, <code>"$foo['bar']"</code>, &amp; <code>"$foo[0]"</code>.</li>
<li><strong><code>defaultValue</code>:</strong> The default value of the number box.</li>
<li><strong><code>passage</code>:</strong> (optional) The name of the passage to go to if the return/enter key is pressed.  May be called either with the passage name or with a link markup.</li>
<li><strong><code>autofocus</code>:</strong> (optional) Keyword, used to signify that the number box should automatically receive focus.  Only use the keyword <em>once</em> per page; attempting to focus more than one element is undefined behavior.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Creates a number box that modifies $wager
Wager how much on Buttstallion in the race? &lt;&lt;numberbox "$wager" 100&gt;&gt;

 Creates an automatically focused number box that modifies $wager
Wager how much on Buttstallion in the race? &lt;&lt;numberbox "$wager" 100 autofocus&gt;&gt;

 Creates a number box that modifies $wager and forwards to the "Result" passage
Wager how much on Buttstallion in the race? &lt;&lt;numberbox "$wager" 100 "Result"&gt;&gt;

 Creates an automatically focused number box that modifies $wager and forwards to the "Result" passage
Wager how much on Buttstallion in the race? &lt;&lt;numberbox "$wager" 100 "Result" autofocus&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-radiobutton"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-radiobutton" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;radiobutton receiverName checkedValue [autocheck|checked]&gt;&gt;</code> </span></h3>
<p>Creates a radio button, used to modify the value of the variable with the given name.  Multiple <code>&lt;&lt;radiobutton&gt;&gt;</code> macros may be set up to modify the same variable, which makes them part of a radio button group.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive-warning">Interactive macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.32.0</code>: Added <code>autocheck</code> keyword.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>receiverName</code>:</strong> The name of the variable to modify, which <em>must</em> be quotede.g., <code>"$foo"</code>.  Object and array property references are also supportede.g., <code>"$foo.bar"</code>, <code>"$foo['bar']"</code>, &amp; <code>"$foo[0]"</code>.</li>
<li><strong><code>checkedValue</code>:</strong> The value set by the radio button when checked.</li>
<li><strong><code>autocheck</code>:</strong> (optional) Keyword, used to signify that the radio button should be automatically set to the checked state based on the current value of the receiver variable.  <strong>NOTE:</strong> Automatic checking may fail on non-primitive valuesi.e., on arrays and objects.</li>
<li><strong><code>checked</code>:</strong> (optional) Keyword, used to signify that the radio button should be in the checked state.  <strong>NOTE:</strong> Only one radio button in a groupi.e., those using the same receiver variableshould be so checked.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>What's your favorite pie?
* &lt;&lt;radiobutton "$pie" "blueberry" autocheck&gt;&gt; Blueberry?
* &lt;&lt;radiobutton "$pie" "cherry" autocheck&gt;&gt; Cherry?
* &lt;&lt;radiobutton "$pie" "coconut cream" autocheck&gt;&gt; Coconut cream?
</code></pre>
<pre><code>What's your favorite pie?
* &lt;&lt;radiobutton "$pie" "blueberry" checked&gt;&gt; Blueberry?
* &lt;&lt;radiobutton "$pie" "cherry"&gt;&gt; Cherry?
* &lt;&lt;radiobutton "$pie" "coconut cream"&gt;&gt; Coconut cream?
</code></pre>
<h5>With a <code>&lt;label&gt;</code> element</h5>
<p role="note" class="tip"><b>Tip:</b>
For accessibility reasons, it's recommended that you wrap each <code>&lt;&lt;radiobutton&gt;&gt;</code> and its accompanying text within a <code>&lt;label&gt;</code> element.  Doing so allows interactions with the text to also trigger its <code>&lt;&lt;radiobutton&gt;&gt;</code>.
</p>
<pre><code>What's your favorite pie?
* &lt;label&gt;&lt;&lt;radiobutton "$pie" "blueberry" autocheck&gt;&gt; Blueberry?&lt;/label&gt;
* &lt;label&gt;&lt;&lt;radiobutton "$pie" "cherry" autocheck&gt;&gt; Cherry?&lt;/label&gt;
* &lt;label&gt;&lt;&lt;radiobutton "$pie" "coconut cream" autocheck&gt;&gt; Coconut cream?&lt;/label&gt;
</code></pre>
<pre><code>What's your favorite pie?
* &lt;label&gt;&lt;&lt;radiobutton "$pie" "blueberry" checked&gt;&gt; Blueberry?&lt;/label&gt;
* &lt;label&gt;&lt;&lt;radiobutton "$pie" "cherry"&gt;&gt; Cherry?&lt;/label&gt;
* &lt;label&gt;&lt;&lt;radiobutton "$pie" "coconut cream"&gt;&gt; Coconut cream?&lt;/label&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-textarea"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-textarea" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;textarea receiverName defaultValue [autofocus]&gt;&gt;</code> </span></h3>
<p>Creates a multiline text input block, used to modify the value of the variable with the given name.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive-warning">Interactive macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>receiverName</code>:</strong> The name of the variable to modify, which <em>must</em> be quotede.g., <code>"$foo"</code>.  Object and array property references are also supportede.g., <code>"$foo.bar"</code>, <code>"$foo['bar']"</code>, &amp; <code>"$foo[0]"</code>.</li>
<li><strong><code>defaultValue</code>:</strong> The default value of the text block.</li>
<li><strong><code>autofocus</code>:</strong> (optional) Keyword, used to signify that the text block should automatically receive focus.  Only use the keyword <em>once</em> per page; attempting to focus more than one element is undefined behavior.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Creates a text block that modifies $pieEssay
Write a short essay about pies:
&lt;&lt;textarea "$pieEssay" ""&gt;&gt;

 Creates an automatically focused text block that modifies $pieEssay
Write a short essay about pies:
&lt;&lt;textarea "$pieEssay" "" autofocus&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-textbox"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-textbox" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;textbox receiverName defaultValue [passage] [autofocus]&gt;&gt;</code> </span></h3>
<p>Creates a text input box, used to modify the value of the variable with the given name, optionally forwarding the player to another passage.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive-warning">Interactive macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>receiverName</code>:</strong> The name of the variable to modify, which <em>must</em> be quotede.g., <code>"$foo"</code>.  Object and array property references are also supportede.g., <code>"$foo.bar"</code>, <code>"$foo['bar']"</code>, &amp; <code>"$foo[0]"</code>.</li>
<li><strong><code>defaultValue</code>:</strong> The default value of the text box.</li>
<li><strong><code>passage</code>:</strong> (optional) The name of the passage to go to if the return/enter key is pressed.  May be called either with the passage name or with a link markup.</li>
<li><strong><code>autofocus</code>:</strong> (optional) Keyword, used to signify that the text box should automatically receive focus.  Only use the keyword <em>once</em> per page; attempting to focus more than one element is undefined behavior.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Creates a text box that modifies $pie
What's your favorite pie? &lt;&lt;textbox "$pie" "Blueberry"&gt;&gt;

 Creates an automatically focused text box that modifies $pie
What's your favorite pie? &lt;&lt;textbox "$pie" "Blueberry" autofocus&gt;&gt;

 Creates a text box that modifies $pie and forwards to the "Cakes" passage
What's your favorite pie? &lt;&lt;textbox "$pie" "Blueberry" "Cakes"&gt;&gt;

 Creates an automatically focused text box that modifies $pie and forwards to the "Cakes" passage
What's your favorite pie? &lt;&lt;textbox "$pie" "Blueberry" "Cakes" autofocus&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-click"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-click" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>&lt;&lt;click linkText [passageName]&gt;&gt;  &lt;&lt;/click&gt;&gt;</code><br><code>&lt;&lt;click linkMarkup&gt;&gt;</code><br><code>&lt;&lt;click imageMarkup&gt;&gt;</code></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This macro has been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-link"><code>&lt;&lt;link&gt;&gt;</code></a> macro for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.8.0</code>: Deprecated in favor of <code>&lt;&lt;link&gt;&gt;</code>.</li>
</ul>
<!-- ***************************************************************************
	Links Macros
**************************************************************************** -->
<h2 id="macros-links"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-links" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Links Macros </span></h2>
<!-- *********************************************************************** -->
<h3 id="macros-macro-actions"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-actions" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;actions passageList&gt;&gt;</code><br><code>&lt;&lt;actions linkMarkupList&gt;&gt;</code><br><code>&lt;&lt;actions imageMarkupList&gt;&gt;</code> </span></h3>
<p>Creates a list of single-use passage links.  Each link removes itself and all other <code>&lt;&lt;actions&gt;&gt;</code> links to the same passage after being activated.  May be called either with a list of passages, with a list of link markup, or with a list of image markup.  Probably most useful when paired with <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-include"><code>&lt;&lt;include&gt;&gt;</code></a>.  See the <a href="https://twinery.org/wiki/actions"><code>&lt;&lt;actions&gt;&gt;</code></a> section of the <a href="https://twinery.org/wiki/twine1:reference">Twine&nbsp;1 reference documentation</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<h5>Passage list form</h5>
<ul>
<li><strong><code>passageList</code>:</strong> A space separated list of passage names.</li>
</ul>
<h5>Link markup list form</h5>
<ul>
<li><strong><code>linkMarkupList</code>:</strong> A space separated list of link markup to use (full syntax supported, including setters).</li>
</ul>
<h5>Image markup list form</h5>
<ul>
<li><strong><code>imageMarkupList</code>:</strong> A space separated list of image markup to use (full syntax supported, including setters).</li>
</ul>
<h4>Examples:</h4>
<pre><code> Passage list form
&lt;&lt;actions "Look at the pie" "Smell the pie" "Taste the pie"&gt;&gt;

 Link markup list form
&lt;&lt;actions [[Look at the pie]] [[Smell the pie]] [[Taste the pie]]&gt;&gt;
&lt;&lt;actions [[Look|Look at the pie]] [[Smell|Smell the pie]] [[Taste|Taste the pie]]&gt;&gt;

 Image markup list form
&lt;&lt;actions [img[look.png][Look at the pie]] [img[smell.png][Smell the pie]] [img[taste.png][Taste the pie]]&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-back"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-back" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;back [linkText]&gt;&gt;</code><br><code>&lt;&lt;back linkMarkup&gt;&gt;</code><br><code>&lt;&lt;back imageMarkup&gt;&gt;</code> </span></h3>
<p>Creates a link that undoes past moments within the story history.  May be called with, optional, link text or with a link or image markup.</p>
<p role="note"><b>Note:</b>
If you want to return to a previously visited passage, rather than undo a moment within the history, see the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-return"><code>&lt;&lt;return&gt;&gt;</code> macro</a> or the <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-previous"><code>previous()</code> function</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<h5>Link text form</h5>
<ul>
<li><strong><code>linkText</code>:</strong> (optional) The text of the link.</li>
</ul>
<h5>Link markup form</h5>
<ul>
<li><strong><code>linkMarkup</code>:</strong> The link markup to use (regular syntax only, no setters).</li>
</ul>
<h5>Image markup form</h5>
<ul>
<li><strong><code>imageMarkup</code>:</strong> The image markup to use (regular syntax only, no setters).</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code> Creates a link that undoes the most recent moment, with default text
&lt;&lt;back&gt;&gt;
</code></pre>
<h5>Link text form</h5>
<pre><code> Creates a link that undoes the most recent moment, with text "Home."
&lt;&lt;back "Home."&gt;&gt;
</code></pre>
<h5>Link markup form</h5>
<pre><code> Creates a link that undoes past moments until the most recent "HQ" moment is reached, with default text
&lt;&lt;back [[HQ]]&gt;&gt;

 Creates a link that undoes past moments until the most recent "HQ" moment is reached, with text "Home."
&lt;&lt;back [[Home.|HQ]]&gt;&gt;
</code></pre>
<h5>Image markup form</h5>
<pre><code> Creates a link that undoes the most recent moment, with image "home.png"
&lt;&lt;back [img[home.png]]&gt;&gt;

 Creates a link that undoes past moments until the most recent "HQ" moment is reached, with image "home.png"
&lt;&lt;back [img[home.png][HQ]]&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-choice"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-choice" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;choice passageName [linkText]&gt;&gt;</code><br><code>&lt;&lt;choice linkMarkup&gt;&gt;</code><br><code>&lt;&lt;choice imageMarkup&gt;&gt;</code> </span></h3>
<p>Creates a single-use passage link that deactivates itself and all other <code>&lt;&lt;choice&gt;&gt;</code> links within the originating passage when activated.  May be called either with the passage name and link text as separate arguments, with a link markup, or with a image markup.</p>
<p role="note" class="warning"><b>Warning:</b>
Normally, when both link and text arguments are accepted, the order is text then link.  However, due to a historical artifact, the arguments for the separate argument form of <code>&lt;&lt;choice&gt;&gt;</code> are in the reverse order (link then text).
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<h5>Separate argument form</h5>
<ul>
<li><strong><code>passageName</code>:</strong> The name of the passage to go to.</li>
<li><strong><code>linkText</code>:</strong> (optional) The text of the link.  If omitted, the <code>passageName</code> will be used instead.</li>
</ul>
<h5>Link markup form</h5>
<ul>
<li><strong><code>linkMarkup</code>:</strong> The link markup to use (full syntax supported, including setters).</li>
</ul>
<h5>Image markup form</h5>
<ul>
<li><strong><code>imageMarkup</code>:</strong> The image markup to use (full syntax supported, including setters).</li>
</ul>
<h4>Examples:</h4>
<pre><code> Separate argument form
&lt;&lt;choice "Take the red pill"&gt;&gt;
&lt;&lt;choice $someAction&gt;&gt;
&lt;&lt;choice "Entered magic mirror" "Touch the strange mirror."&gt;&gt;
&lt;&lt;choice $go $show&gt;&gt;

 Link markup form
&lt;&lt;choice [[Take the red pill]]&gt;&gt;
&lt;&lt;choice [[$someAction]]&gt;&gt;
&lt;&lt;choice [[Touch the strange mirror.|Entered magic mirror]]&gt;&gt;
&lt;&lt;choice [[$show|$go]]&gt;&gt;

 Image markup form
&lt;&lt;choice [img[redpill.png][Take the red pill]]&gt;&gt;
&lt;&lt;choice [img[some-image.jpg][$someAction]]&gt;&gt;
&lt;&lt;choice [img[mirror.jpg][Entered magic mirror]]&gt;&gt;
&lt;&lt;choice [img[$show][$go]]&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-return"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-return" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;return [linkText]&gt;&gt;</code><br><code>&lt;&lt;return linkMarkup&gt;&gt;</code><br><code>&lt;&lt;return imageMarkup&gt;&gt;</code> </span></h3>
<p>Creates a link that navigates forward to a previously visited passage.  May be called with, optional, link text or with a link or image markup.</p>
<p role="note"><b>Note:</b>
If you want to undo previous moments within the history, rather than return to a passage, see the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-back"><code>&lt;&lt;back&gt;&gt;</code> macro</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<h5>Link text form</h5>
<ul>
<li><strong><code>linkText</code>:</strong> (optional) The text of the link.</li>
</ul>
<h5>Link markup form</h5>
<ul>
<li><strong><code>linkMarkup</code>:</strong> The link markup to use (regular syntax only, no setters).</li>
</ul>
<h5>Image markup form</h5>
<ul>
<li><strong><code>imageMarkup</code>:</strong> The image markup to use (regular syntax only, no setters).</li>
</ul>
<h4>Examples:</h4>
<p role="note"><b>Note:</b>
The versions that forward to a specific passage are largely unnecessary, as you could simply use a normal link, and exist solely for compatibility with the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-back"><code>&lt;&lt;back&gt;&gt;</code> macro</a>.
</p>
<h5>Basic usage</h5>
<pre><code> Creates a link that forwards to the previous passage, with default text
&lt;&lt;return&gt;&gt;
</code></pre>
<h5>Link text form</h5>
<pre><code> Creates a link that forwards to the previous passage, with text "Home."
&lt;&lt;return "Home."&gt;&gt;
</code></pre>
<h5>Link markup form</h5>
<pre><code> Creates a link that forwards to the "HQ" passage, with default text
&lt;&lt;return [[HQ]]&gt;&gt;

 Creates a link that forwards to the "HQ" passage, with text "Home."
&lt;&lt;return [[Home.|HQ]]&gt;&gt;
</code></pre>
<h5>Image markup form</h5>
<pre><code> Creates a link that forwards to the previous passage, with image "home.png"
&lt;&lt;return [img[home.png]]&gt;&gt;

 Creates a link that forwards to the "HQ" passage, with image "home.png"
&lt;&lt;return [img[home.png][HQ]]&gt;&gt;
</code></pre>
<!-- ***************************************************************************
	DOM Macros
**************************************************************************** -->
<h2 id="macros-dom"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-dom" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>DOM Macros </span></h2>
<p><span id="macros-dom-warning"></span></p>
<p role="note" class="warning"><b>Warning:</b>
All DOM macros require the elements to be manipulated to be on the page.  As a consequence, you cannot use them directly within a passage to modify elements within said passage, since the elements they are targeting are still rendering, thus not yet on the page.  You must, generally, use them with an interactive macroe.g., <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-link"><code>&lt;&lt;link&gt;&gt;</code> macro</a>the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-done"><code>&lt;&lt;done&gt;&gt;</code> macro</a>, or within the <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-passagedone"><code>PassageDone</code> special passage</a>.  Elements that are already part of the page, on the other hand, present no issues.
</p>
<!-- *********************************************************************** -->
<h3 id="macros-macro-addclass"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-addclass" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;addclass selector classNames&gt;&gt;</code> </span></h3>
<p>Adds classes to the selected element(s).</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-dom-warning">DOM macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>selector</code>:</strong> The CSS/jQuery-style selector used to target element(s).</li>
<li><strong><code>classNames</code>:</strong> The names of the classes, separated by spaces.</li>
</ul>
<h4>Examples:</h4>
<pre><code>&lt;&lt;addclass "body" "day rain"&gt;&gt;   Add the classes "day" and "rain" to the &lt;body&gt; element
&lt;&lt;addclass "#pie" "cherry"&gt;&gt;     Add the class "cherry" to the element with the ID "pie"
&lt;&lt;addclass ".joe" "angry"&gt;&gt;      Add the class "angry" to all elements containing the class "joe"
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-append"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-append" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;append selector [transition|t8n]&gt;&gt;  &lt;&lt;/append&gt;&gt;</code> </span></h3>
<p>Executes its contents and appends the output to the contents of the selected element(s).</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-dom-warning">DOM macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.25.0</code>: Added <code>transition</code> and <code>t8n</code> keywords.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>selector</code>:</strong> The CSS/jQuery-style selector used to target element(s).</li>
<li><strong><code>transition</code>:</strong> (optional) Keyword, used to signify that a CSS transition should be applied to the incoming insertions.</li>
<li><strong><code>t8n</code>:</strong> (optional) Keyword, alias for <strong><code>transition</code></strong>.</li>
</ul>
<h4>Examples:</h4>
<h5>Without a transition</h5>
<pre><code> Example setup
I saw a &lt;span id="dog"&gt;dog&lt;/span&gt;.

 Append to the contents of the target element
&lt;&lt;link "Doing"&gt;&gt;
	&lt;&lt;append "#dog"&gt;&gt; chasing a cat&lt;&lt;/append&gt;&gt;
&lt;&lt;/link&gt;&gt;

 Result, after clicking
I saw a &lt;span id="dog"&gt;dog chasing a cat&lt;/span&gt;.
</code></pre>
<h5>With a transition</h5>
<pre><code> Example setup
I saw a &lt;span id="dog"&gt;dog&lt;/span&gt;.

 Append to the contents of the target element
&lt;&lt;link "Doing"&gt;&gt;
	&lt;&lt;append "#dog" t8n&gt;&gt; chasing a cat&lt;&lt;/append&gt;&gt;
&lt;&lt;/link&gt;&gt;

 Result, after clicking
I saw a &lt;span id="dog"&gt;dog&lt;span class="macro-append-insert"&gt; chasing a cat&lt;/span&gt;&lt;/span&gt;.
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-copy"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-copy" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;copy selector&gt;&gt;</code> </span></h3>
<p>Outputs a copy of the contents of the selected element(s).</p>
<p role="note" class="warning"><b>Warning:</b>
Most interactive elementse.g., passage links, <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-interactive">interactive macros</a>, etc.cannot be properly copied via <code>&lt;&lt;copy&gt;&gt;</code>.  Attempting to do so will, usually, result in something that's non-functional.
</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-dom-warning">DOM macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>selector</code>:</strong> The CSS/jQuery-style selector used to target element(s).</li>
</ul>
<h4>Examples:</h4>
<pre><code> Example setup
I'd like a &lt;span id="snack-source"&gt;slice of Key lime pie&lt;/span&gt;, please.

I'll have a &lt;span id="snack-dest"&gt;breadstick&lt;/span&gt;, thanks.

 Replace the contents of the source target element with a copy of the destination target element
&lt;&lt;link "Have the same"&gt;&gt;
	&lt;&lt;replace "#snack-dest"&gt;&gt;&lt;&lt;copy "#snack-source"&gt;&gt; too&lt;&lt;/replace&gt;&gt;
&lt;&lt;/link&gt;&gt;

 Result, after the click
I'd like a &lt;span id="snack-source"&gt;slice of Key lime pie&lt;/span&gt;, please.

I'll have a &lt;span id="snack-dest"&gt;slice of Key lime pie too&lt;/span&gt;, thanks.
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-prepend"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-prepend" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;prepend selector [transition|t8n]&gt;&gt;  &lt;&lt;/prepend&gt;&gt;</code> </span></h3>
<p>Executes its contents and prepends the output to the contents of the selected element(s).</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-dom-warning">DOM macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.25.0</code>: Added <code>transition</code> and <code>t8n</code> keywords.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>selector</code>:</strong> The CSS/jQuery-style selector used to target element(s).</li>
<li><strong><code>transition</code>:</strong> (optional) Keyword, used to signify that a CSS transition should be applied to the incoming insertions.</li>
<li><strong><code>t8n</code>:</strong> (optional) Keyword, alias for <strong><code>transition</code></strong>.</li>
</ul>
<h4>Examples:</h4>
<h5>Without a transition</h5>
<pre><code> Example setup
I saw a &lt;span id="dog"&gt;dog&lt;/span&gt;.

 Prepend to the contents of the target element
&lt;&lt;link "Size"&gt;&gt;
	&lt;&lt;prepend "#dog"&gt;&gt;big &lt;&lt;/prepend&gt;&gt;
&lt;&lt;/link&gt;&gt;

 Result, after clicking
I saw a &lt;span id="dog"&gt;big dog&lt;/span&gt;.
</code></pre>
<h5>With a transition</h5>
<pre><code> Example setup
I saw a &lt;span id="dog"&gt;dog&lt;/span&gt;.

 Prepend to the contents of the target element
&lt;&lt;link "Size"&gt;&gt;
	&lt;&lt;prepend "#dog" t8n&gt;&gt;big &lt;&lt;/prepend&gt;&gt;
&lt;&lt;/link&gt;&gt;

 Result, after clicking
I saw a &lt;span id="dog"&gt;&lt;span class="macro-prepend-insert"&gt;big &lt;/span&gt;dog&lt;/span&gt;.
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-remove"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-remove" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;remove selector&gt;&gt;</code> </span></h3>
<p>Removes the selected element(s).</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-dom-warning">DOM macro warning</a>.
</p>
<p role="note"><b>Note:</b>
If you simply want to empty the selected element(s), not remove them outright, you should use an empty <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-replace"><code>&lt;&lt;replace&gt;&gt;</code> macro</a> instead.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>selector</code>:</strong> The CSS/jQuery-style selector used to target element(s).</li>
</ul>
<h4>Examples:</h4>
<pre><code> Given the following
I'd like a &lt;span id="huge-cupcake"&gt;humongous &lt;/span&gt;cupcake, please.

 Remove the target element
&lt;&lt;link "Go small"&gt;&gt;
	&lt;&lt;remove "#huge-cupcake"&gt;&gt;
&lt;&lt;/link&gt;&gt;

 Result, after the click
I'd like a cupcake, please.
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-removeclass"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-removeclass" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;removeclass selector [classNames]&gt;&gt;</code> </span></h3>
<p>Removes classes from the selected element(s).</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-dom-warning">DOM macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>selector</code>:</strong> The CSS/jQuery-style selector used to target element(s).</li>
<li><strong><code>classNames</code>:</strong> (optional) The names of the classes, separated by spaces.  If no class names are given, removes all classes.</li>
</ul>
<h4>Examples:</h4>
<pre><code>&lt;&lt;removeclass "body" "day rain"&gt;&gt;   Remove the classes "day" and "rain" from the &lt;body&gt; element
&lt;&lt;removeclass "#pie" "cherry"&gt;&gt;     Remove the class "cherry" from the element with the ID "pie"
&lt;&lt;removeclass ".joe" "angry"&gt;&gt;      Remove the class "angry" from all elements containing the class "joe"
&lt;&lt;removeclass "#begone"&gt;&gt;           Remove all classes from the element with the ID "begone"
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-replace"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-replace" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;replace selector [transition|t8n]&gt;&gt;  &lt;&lt;/replace&gt;&gt;</code> </span></h3>
<p>Executes its contents and replaces the contents of the selected element(s) with the output.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-dom-warning">DOM macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.25.0</code>: Added <code>transition</code> and <code>t8n</code> keywords.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>selector</code>:</strong> The CSS/jQuery-style selector used to target element(s).</li>
<li><strong><code>transition</code>:</strong> (optional) Keyword, used to signify that a CSS transition should be applied to the incoming insertions.</li>
<li><strong><code>t8n</code>:</strong> (optional) Keyword, alias for <strong><code>transition</code></strong>.</li>
</ul>
<h4>Usage</h4>
<h5>Without a transition</h5>
<pre><code> Example setup
I saw a &lt;span id="dog"&gt;dog&lt;/span&gt;.

 Replace the contents of the target element
&lt;&lt;link "Breed"&gt;&gt;
	&lt;&lt;replace "#dog"&gt;&gt;Catahoula Cur&lt;&lt;/replace&gt;&gt;
&lt;&lt;/link&gt;&gt;

 Result, after clicking
I saw a &lt;span id="dog"&gt;Catahoula Cur&lt;/span&gt;.
</code></pre>
<h5>With a transition</h5>
<pre><code> Example setup
I saw a &lt;span id="dog"&gt;dog&lt;/span&gt;.

 Replace the contents of the target element
&lt;&lt;link "Breed"&gt;&gt;
	&lt;&lt;replace "#dog" t8n&gt;&gt;Catahoula Cur&lt;&lt;/replace&gt;&gt;
&lt;&lt;/link&gt;&gt;

 Result, after clicking
I saw a &lt;span id="dog"&gt;&lt;span class="macro-replace-insert"&gt;Catahoula Cur&lt;/span&gt;&lt;/span&gt;.
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-toggleclass"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-toggleclass" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;toggleclass selector classNames&gt;&gt;</code> </span></h3>
<p>Toggles classes on the selected element(s)i.e., adding them if they don't exist, removing them if they do.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-dom-warning">DOM macro warning</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>selector</code>:</strong> The CSS/jQuery-style selector used to target element(s).</li>
<li><strong><code>classNames</code>:</strong> The names of the classes, separated by spaces.</li>
</ul>
<h4>Examples:</h4>
<pre><code>&lt;&lt;toggleclass "body" "day rain"&gt;&gt;   Toggle the classes "day" and "rain" on the &lt;body&gt; element
&lt;&lt;toggleclass "#pie" "cherry"&gt;&gt;     Toggle the class "cherry" on the element with the ID "pie"
&lt;&lt;toggleclass ".joe" "angry"&gt;&gt;      Toggle the class "angry" on all elements containing the class "joe"
</code></pre>
<!-- ***************************************************************************
	Audio Macros
**************************************************************************** -->
<h2 id="macros-audio"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-audio" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Audio Macros </span></h2>
<p><span id="macros-audio-limitations"></span></p>
<p role="note" class="warning"><b>Warning:</b>
The audio subsystem that supports the audio macros comes with some built-in <a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-limitations">limitations</a> and it is <strong><em>strongly</em></strong> recommended that you familiarize yourself with them.
</p>
<!-- *********************************************************************** -->
<h3 id="macros-macro-audio"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-audio" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;audio trackIdList actionList&gt;&gt;</code> </span></h3>
<p>Controls the playback of audio tracks, which must be set up via <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-cacheaudio"><code>&lt;&lt;cacheaudio&gt;&gt;</code></a>.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-audio-limitations">Audio macro limitations</a>.
</p>
<p role="note"><b>Note:</b>
The <code>&lt;&lt;audio&gt;&gt;</code> macro cannot affect playlist tracks that have been copied into their respective playlistmeaning those set up via <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-createplaylist"><code>&lt;&lt;createplaylist&gt;&gt;</code></a> with its <code>copy</code> action or all tracks set up via, the deprecated, <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-setplaylist"><code>&lt;&lt;setplaylist&gt;&gt;</code></a>as playlist copies are solely under the control of their playlist.
</p>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-audio-pauseonfadetozero"><code>Config.audio.pauseOnFadeToZero</code> setting</a> (default: <code>true</code>) controls whether tracks that have been faded to <code>0</code> volume (silent) are automatically paused.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.1.0</code>: Added <code>fadeoverto</code> action.</li>
<li><code>v2.8.0</code>: Added group ID(s).</li>
<li><code>v2.28.0</code>: Added <code>load</code> and <code>unload</code> actions.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>trackIdList</code>:</strong> The list of track and/or group IDs, separated by spaces.  See below for details on group IDs.</li>
<li><strong><code>actionList</code>:</strong> The list of actions to perform.  Available actions are:
<ul>
<li><strong><code>fadein</code>:</strong> Start playback of the selected tracks and fade them from their current volume level to <code>1</code> (loudest) over <code>5</code> seconds.</li>
<li><strong><code>fadeout</code>:</strong> Start playback of the selected tracks and fade them from their current volume level to <code>0</code> (silent) over <code>5</code> seconds.</li>
<li><strong><code>fadeoverto</code> <em><code>seconds</code></em> <em><code>level</code></em>:</strong> Start playback of the selected tracks and fade them from their current volume level to the specified level over the specified number of seconds.</li>
<li><strong><code>fadeto</code> <em><code>level</code></em>:</strong> Start playback of the selected tracks and fade them from their current volume level to the specified level over <code>5</code> seconds.</li>
<li><strong><code>goto</code> <em><code>passage</code></em>:</strong> Forwards the player to the passage with the given name when playback of the first of the selected tracks ends normally.  May be called either with the passage name or with a link markup.</li>
<li><strong><code>load</code>:</strong> Pause playback of the selected tracks and, if they're not already in the process of loading, force them to drop any existing data and begin loading.  <strong>NOTE:</strong> This <em>should not</em> be done lightly if your audio sources are on the network, as it forces the player to begin downloading them.</li>
<li><strong><code>loop</code>:</strong> Set the selected tracks to repeat playback upon ending normally.</li>
<li><strong><code>mute</code>:</strong> Mute the volume of the selected trackseffectively volume <code>0</code>, except without changing the volume level.</li>
<li><strong><code>pause</code>:</strong> Pause playback of the selected tracks.</li>
<li><strong><code>play</code>:</strong> Start playback of the selected tracks.</li>
<li><strong><code>stop</code>:</strong> Stop playback of the selected tracks.</li>
<li><strong><code>time</code> <em><code>seconds</code></em>:</strong> Set the current playback time of the selected tracks to the specified number of seconds.  Valid values are floating-point numbers in the range <code>0</code> (start) to the maximum duratione.g., <code>60</code> is <code>60</code> is sixty seconds in, <code>90.5</code> is ninety-point-five seconds in.</li>
<li><strong><code>unload</code>:</strong> Stop playback of the selected tracks and force them to drop any existing data.  <strong>NOTE:</strong> Once unloaded, playback cannot occur until a <code>load</code> action is issued.</li>
<li><strong><code>unloop</code>:</strong> Set the selected tracks to not repeat playback (this is the default).</li>
<li><strong><code>unmute</code>:</strong> Unmute the volume of the selected tracks (this is the default).</li>
<li><strong><code>volume</code> <em><code>level</code></em>:</strong> Set the volume of the selected tracks to the specified level.  Valid values are floating-point numbers in the range <code>0</code> (silent) to <code>1</code> (loudest)e.g., <code>0</code> is 0%, <code>0.5</code> is 50%, <code>1</code> is 100%.</li>
</ul>
</li>
</ul>
<h4>Group IDs:</h4>
<p>Group IDs allow several tracks to be selected simultaneously without needing to specify each one individually.  There are several predefined group IDs (<code>:all</code>, <code>:looped</code>, <code>:muted</code>, <code>:paused</code>, <code>:playing</code>) and custom IDs may be defined via <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-createaudiogroup"><code>&lt;&lt;createaudiogroup&gt;&gt;</code></a>.  The <code>:not()</code> group modifier syntax (<code>groupId:not(trackIdList)</code>) allows a group to have some of its tracks excluded from selection.</p>
<h4>Examples:</h4>
<h5>Basic usage with group IDs</h5>
<pre><code> Start playback of paused tracks
&lt;&lt;audio ":paused" play&gt;&gt;

 Pause playback of playing tracks
&lt;&lt;audio ":playing" pause&gt;&gt;

 Stop playback of playing tracks
&lt;&lt;audio ":playing" stop&gt;&gt;

 Stop playback of all tracks
&lt;&lt;audio ":all" stop&gt;&gt;

 Stop playback of playing tracks except those in the ":ui" group
&lt;&lt;audio ":playing:not(:ui)" stop&gt;&gt;

 Change the volume of all tracks except those in the ":ui" group
 to 40%, without changing the current playback state
&lt;&lt;audio ":all:not(:ui)" volume 0.40&gt;&gt;
</code></pre>
<h5>Basic usage with track IDs</h5>
<pre><code> Given the following (best done in the StoryInit special passage)
&lt;&lt;cacheaudio "bgm_space" "media/audio/space_quest.mp3" "media/audio/space_quest.ogg"&gt;&gt;

 Start playback
&lt;&lt;audio "bgm_space" play&gt;&gt;

 Start playback at 50% volume
&lt;&lt;audio "bgm_space" volume 0.5 play&gt;&gt;

 Start playback at 120 seconds in
&lt;&lt;audio "bgm_space" time 120 play&gt;&gt;

 Start repeating playback
&lt;&lt;audio "bgm_space" loop play&gt;&gt;

 Start playback and fade from 0% to 100% volume
&lt;&lt;audio "bgm_space" volume 0 fadein&gt;&gt;

 Start playback and fade from 75% to 0% volume
&lt;&lt;audio "bgm_space" volume 0.75 fadeout&gt;&gt;

 Start playback and fade from 25% to 75% volume
&lt;&lt;audio "bgm_space" volume 0.25 fadeto 0.75&gt;&gt;

 Start playback and fade from 25% to 75% volume over 30 seconds
&lt;&lt;audio "bgm_space" volume 0.25 fadeoverto 30 0.75&gt;&gt;

 Start playback and goto the "Peace Moon" passage upon ending normally
&lt;&lt;audio "bgm_space" play goto "Peace Moon"&gt;&gt;

 Pause playback
&lt;&lt;audio "bgm_space" pause&gt;&gt;

 Stop playback
&lt;&lt;audio "bgm_space" stop&gt;&gt;

 Mute playback, without changing the current playback state
&lt;&lt;audio "bgm_space" mute&gt;&gt;

 Unmute playback, without changing the current playback state
&lt;&lt;audio "bgm_space" unmute&gt;&gt;

 Change the volume to 40%, without changing the current playback state
&lt;&lt;audio "bgm_space" volume 0.40&gt;&gt;

 Seek to 90 seconds in, without changing the current playback state
&lt;&lt;audio "bgm_space" time 90&gt;&gt;
</code></pre>
<h5>Using the <code>load</code> and <code>unload</code> actions</h5>
<p role="note" class="warning"><b>Warning:</b>
Be <em>very careful</em> with these if your audio sources are on the network, as you are forcing players to begin downloading them.  Not everyone has
blazing fast internet with unlimited dataespecially true for mobile users.  Pease, <strong><em>do not</em></strong> take your players' bandwidth and data usage lightly.
</p>
<pre><code> If it's not currently loading, drop existing data buffers and load the track
&lt;&lt;audio "bgm_space" load&gt;&gt;

 Unload the track, dropping existing data buffers
&lt;&lt;audio "bgm_space" unload&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-cacheaudio"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-cacheaudio" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;cacheaudio trackId sourceList&gt;&gt;</code> </span></h3>
<p>Caches an audio track for use by the other audio macros.</p>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyinit"><code>StoryInit</code> special passage</a> is normally the best place to set up tracks.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.28.0</code>: Deprecated the old optional format specifier syntax in favor of a new syntax (<code>formatId|</code>).</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>trackId</code>:</strong> The ID of the track, which will be used to reference it.</li>
<li><strong><code>sourceList</code>:</strong> A space separated list of sources for the track.  Only one is required, though supplying additional sources in differing formats is recommended, as no single format is supported by all browsers.  A source must be either a URL (absolute or relative) to an audio resource, the name of an audio passage, or a data URI.  In rare cases where the audio format cannot be automatically detected from the source (URLs are parsed for a file extension, data URIs are parsed for the media type), a format specifier may be prepended to the front of each source to manually specify the format (syntax: <code>formatId|</code>, where <code>formatId</code> is the audio formatgenerally, whatever the file extension would normally be; e.g., <code>mp3</code>, <code>mp4</code>, <code>ogg</code>, <code>weba</code>, <code>wav</code>).</li>
</ul>
<h4>Examples:</h4>
<pre><code> Cache a track with the ID "boom" and one source via relative URL
&lt;&lt;cacheaudio "boom" "media/audio/explosion.mp3"&gt;&gt;

 Cache a track with the ID "boom" and one source via audio passage
&lt;&lt;cacheaudio "boom" "explosion"&gt;&gt;

 Cache a track with the ID "bgm_space" and two sources via relative URLs
&lt;&lt;cacheaudio "bgm_space" "media/audio/space_quest.mp3" "media/audio/space_quest.ogg"&gt;&gt;

 Cache a track with the ID "what" and one source via URL with a format specifier
&lt;&lt;cacheaudio "what" "mp3|http://an-audio-service.com/a-user/a-track-id"&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-createaudiogroup"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-createaudiogroup" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;createaudiogroup groupId&gt;&gt;</code><br><span class="child"><code>[&lt;&lt;track trackId&gt;&gt; ]</code></span><br><code>&lt;&lt;/createaudiogroup&gt;&gt;</code> </span></h3>
<p>Collects tracks, which must be set up via <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-cacheaudio"><code>&lt;&lt;cacheaudio&gt;&gt;</code></a>, into a group via its <code>&lt;&lt;track&gt;&gt;</code> children.  Groups are useful for applying actions to multiple tracks simultaneously and/or excluding the included tracks from a larger set when applying actions.</p>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyinit"><code>StoryInit</code> special passage</a> is normally the best place to set up groups.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.19.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<h5><code>&lt;&lt;createaudiogroup&gt;&gt;</code></h5>
<ul>
<li><strong><code>groupId</code>:</strong> The ID of the group that will be used to reference it and <em>must</em> begin with a colon.  <strong>NOTE:</strong> There are several predefined group IDs (<code>:all</code>, <code>:looped</code>, <code>:muted</code>, <code>:paused</code>, <code>:playing</code>) and the <code>:not</code> group modifier that cannot be reused/overwritten.</li>
</ul>
<h5><code>&lt;&lt;track&gt;&gt;</code></h5>
<ul>
<li><strong><code>trackId</code>:</strong> The ID of the track.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Given the following (best done in the StoryInit special passage)
&lt;&lt;cacheaudio "ui_beep"  "media/audio/ui/beep.mp3"&gt;&gt;
&lt;&lt;cacheaudio "ui_boop"  "media/audio/ui/boop.mp3"&gt;&gt;
&lt;&lt;cacheaudio "ui_swish" "media/audio/ui/swish.mp3"&gt;&gt;

 Set up a group ":ui" with the tracks: "ui_beep", "ui_boop", and "ui_swish"
&lt;&lt;createaudiogroup ":ui"&gt;&gt;
	&lt;&lt;track "ui_beep"&gt;&gt;
	&lt;&lt;track "ui_boop"&gt;&gt;
	&lt;&lt;track "ui_swish"&gt;&gt;
&lt;&lt;/createaudiogroup&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-createplaylist"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-createplaylist" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;createplaylist listId&gt;&gt;</code><br><span class="child"><code>[&lt;&lt;track trackId actionList&gt;&gt; ]</code></span><br><code>&lt;&lt;/createplaylist&gt;&gt;</code> </span></h3>
<p>Collects tracks, which must be set up via <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-cacheaudio"><code>&lt;&lt;cacheaudio&gt;&gt;</code></a>, into a playlist via its <code>&lt;&lt;track&gt;&gt;</code> children.</p>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyinit"><code>StoryInit</code> special passage</a> is normally the best place to set up playlists.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.8.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Deprecated <code>&lt;&lt;track&gt;&gt;</code> <code>copy</code> keyword in favor of <code>own</code>.</li>
</ul>
<h4>Arguments:</h4>
<h5><code>&lt;&lt;createplaylist&gt;&gt;</code></h5>
<ul>
<li><strong><code>listId</code>:</strong> The ID of the playlist, which will be used to reference it.</li>
</ul>
<h5><code>&lt;&lt;track&gt;&gt;</code></h5>
<ul>
<li><strong><code>trackId</code>:</strong> The ID of the track.</li>
<li><strong><code>actionList</code>:</strong> The list of actions to perform.  Available actions are:
<ul>
<li><strong><code>volume</code> <em><code>level</code></em>:</strong> (optional) Set the base volume of the track within the playlist to the specified level.  If omitted, defaults to the track's current volume.  Valid values are floating-point numbers in the range <code>0</code> (silent) to <code>1</code> (loudest)e.g., <code>0</code> is 0%, <code>0.5</code> is 50%, <code>1</code> is 100%.</li>
<li><strong><code>own</code>:</strong> (optional) Keyword, used to signify that the playlist should create its own independent copy of the track, rather than simply referencing the existing version.  Owned copies are solely under the control of their playlistmeaning <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-audio"><code>&lt;&lt;audio&gt;&gt;</code></a> actions cannot affect them, even when using group IDs.</li>
</ul>
</li>
</ul>
<h4>Examples:</h4>
<pre><code> Given the following setup (best done in the StoryInit special passage)
&lt;&lt;cacheaudio "swamped"       "media/audio/Swamped.mp3"&gt;&gt;
&lt;&lt;cacheaudio "heavens_a_lie" "media/audio/Heaven's_A_Lie.mp3"&gt;&gt;
&lt;&lt;cacheaudio "closer"        "media/audio/Closer.mp3"&gt;&gt;
&lt;&lt;cacheaudio "to_the_edge"   "media/audio/To_The_Edge.mp3"&gt;&gt;

 Create a playlist "bgm_lacuna" with the tracks: "swamped", "heavens_a_lie", "closer", and "to_the_edge"
&lt;&lt;createplaylist "bgm_lacuna"&gt;&gt;
	&lt;&lt;track "swamped"       volume 1&gt;&gt;       Add "swamped" at 100% volume
	&lt;&lt;track "heavens_a_lie" volume 0.5&gt;&gt;     Add "heavens_a_lie" at 50% volume
	&lt;&lt;track "closer"        own&gt;&gt;            Add an owned copy of "closer" at its current volume
	&lt;&lt;track "to_the_edge"   volume 1 own&gt;&gt;   Add an owned copy of "to_the_edge" at 100% volume
&lt;&lt;/createplaylist&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-masteraudio"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-masteraudio" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;masteraudio actionList&gt;&gt;</code> </span></h3>
<p>Controls the master audio settings.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-audio-limitations">Audio macro limitations</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.8.0</code>: Introduced.</li>
<li><code>v2.28.0</code>: Added <code>load</code>, <code>muteonhide</code>, <code>nomuteonhide</code>, and <code>unload</code> actions.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>actionList</code>:</strong> The list of actions to perform.  Available actions are:
<ul>
<li><strong><code>load</code>:</strong> Pause playback of <em>all</em> tracks and, if they're not already in the process of loading, force them to drop any existing data and begin loading.  <strong>NOTE:</strong> This <em>should not</em> be done lightly if your audio sources are on the network, as it forces the player to begin downloading them.</li>
<li><strong><code>mute</code>:</strong> Mute the master volume (effectively volume <code>0</code>, except without changing the volume level).</li>
<li><strong><code>muteonhide</code>:</strong> Enable automatic muting of the master volume when losing visibilityi.e., when switched to another tab or the browser window is minimized.</li>
<li><strong><code>nomuteonhide</code>:</strong> Disable automatic muting of the master volume when losing visibility (this is the default).</li>
<li><strong><code>stop</code>:</strong> Stop playback of <em>all</em> tracks.</li>
<li><strong><code>unload</code>:</strong> Stop playback of <em>all</em> tracks and force them to drop any existing data.  <strong>NOTE:</strong> Once unloaded, playback cannot occur until a <code>load</code> action is issued for each trackeither a master <code>load</code> action, to affect all tracks, or an <code>&lt;&lt;audio&gt;&gt;</code>/<code>&lt;&lt;playlist&gt;&gt;</code> <code>load</code> action, to affect only certain tracks.</li>
<li><strong><code>unmute</code>:</strong> Unmute the master volume (this is the default).</li>
<li><strong><code>volume</code> <em><code>level</code></em>:</strong> Set the master volume to the specified level.  Valid values are floating-point numbers in the range <code>0</code> (silent) to <code>1</code> (loudest)e.g., <code>0</code> is 0%, <code>0.5</code> is 50%, <code>1</code> is 100%.</li>
</ul>
</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code> Stop playback of all registered tracks, no exceptions
&lt;&lt;masteraudio stop&gt;&gt;

 Change the master volume to 40%
&lt;&lt;masteraudio volume 0.40&gt;&gt;

 Mute the master volume
&lt;&lt;masteraudio mute&gt;&gt;

 Unmute the master volume
&lt;&lt;masteraudio unmute&gt;&gt;

 Enable automatic muting of the master volume when losing visibility
&lt;&lt;masteraudio muteonhide&gt;&gt;

 Disable automatic muting of the master volume when losing visibility
&lt;&lt;masteraudio nomuteonhide&gt;&gt;
</code></pre>
<h5>Using the <code>load</code> and <code>unload</code> actions</h5>
<p role="note" class="warning"><b>Warning:</b>
Be <em>very careful</em> with these if your audio sources are on the network, as you are forcing players to begin downloading them.  Not everyone has
blazing fast internet with unlimited dataespecially true for mobile users.  Pease, <strong><em>do not</em></strong> take your players' bandwidth and data usage lightly.
</p>
<pre><code> If they're not currently loading, drop existing data buffers and load all tracks
&lt;&lt;masteraudio load&gt;&gt;

 Unload all tracks, dropping existing data buffers
&lt;&lt;masteraudio unload&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-playlist"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-playlist" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;playlist listId actionList&gt;&gt;</code><br><span class="deprecated"><code>&lt;&lt;playlist actionList&gt;&gt;</code></span> </span></h3>
<p>Controls the playback of the playlist, which must be set up via <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-createplaylist"><code>&lt;&lt;createplaylist&gt;&gt;</code></a>the deprecated <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-setplaylist"><code>&lt;&lt;setplaylist&gt;&gt;</code></a> may be used instead, though it is not recommended.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-audio-limitations">Audio macro limitations</a>.
</p>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-audio-pauseonfadetozero"><code>Config.audio.pauseOnFadeToZero</code> setting</a> (default: <code>true</code>) controls whether tracks that have been faded to <code>0</code> volume (silent) are automatically paused.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced, compatible with <code>&lt;&lt;setplaylist&gt;&gt;</code>.</li>
<li><code>v2.1.0</code>: Added <code>fadeoverto</code> action.</li>
<li><code>v2.8.0</code>: Added <code>listId</code> argument, compatible with <code>&lt;&lt;createplaylist&gt;&gt;</code>.  Deprecated <code>&lt;&lt;setplaylist&gt;&gt;</code> compatible form.</li>
<li><code>v2.28.0</code>: Added <code>load</code> and <code>unload</code> actions.</li>
</ul>
<h4>Arguments:</h4>
<h5><code>&lt;&lt;createplaylist&gt;&gt;</code>-compatible form</h5>
<ul>
<li><strong><code>listId</code>:</strong> The ID of the playlist.</li>
<li><strong><code>actionList</code>:</strong> The list of actions to perform.  Available actions are:
<ul>
<li><strong><code>fadein</code>:</strong> Start playback of the playlist and fade the current track from its current volume level to <code>1</code> (loudest) over <code>5</code> seconds.</li>
<li><strong><code>fadeout</code>:</strong> Start playback of the playlist and fade the current track from its current volume level to <code>0</code> (silent) over <code>5</code> seconds.</li>
<li><strong><code>fadeoverto</code> <em><code>seconds</code></em> <em><code>level</code></em>:</strong> Start playback of the playlist and fade the current track from its current volume level to the specified level over the specified number of seconds.</li>
<li><strong><code>fadeto</code> <em><code>level</code></em>:</strong> Start playback of the playlist and fade the current track from its current volume level to the specified level over <code>5</code> seconds.</li>
<li><strong><code>load</code>:</strong> Pause playback of the playlist and, if its tracks are not already in the process of loading, force them to drop any existing data and begin loading.  <strong>NOTE:</strong> This <em>should not</em> be done lightly if your audio sources are on the network, as it forces the player to begin downloading them.</li>
<li><strong><code>loop</code>:</strong> Set the playlist to repeat playback upon ending.</li>
<li><strong><code>mute</code>:</strong> Mute the volume of the playlist (effectively volume <code>0</code>, except without changing the volume level).</li>
<li><strong><code>pause</code>:</strong> Pause playback of the playlist.</li>
<li><strong><code>play</code>:</strong> Start playback of the playlist.</li>
<li><strong><code>shuffle</code>:</strong> Set the playlist to randomly shuffle.</li>
<li><strong><code>skip</code>:</strong> Skip ahead to the next track in the queue.  An empty queue will not be refilled unless repeat playback has been set.</li>
<li><strong><code>stop</code>:</strong> Stop playback of the playlist.</li>
<li><strong><code>unload</code>:</strong> Stop playback of the playlist and force its tracks to drop any existing data.  <strong>NOTE:</strong> Once unloaded, playback cannot occur until a <code>load</code> action is issued.</li>
<li><strong><code>unloop</code>:</strong> Set the playlist to not repeat playback (this is the default).</li>
<li><strong><code>unmute</code>:</strong> Unmute the volume of the playlist (this is the default).</li>
<li><strong><code>unshuffle</code>:</strong> Set the playlist to not randomly shuffle (this is the default).</li>
<li><strong><code>volume</code> <em><code>level</code></em>:</strong> Set the volume of the playlist to the specified level.  Valid values are floating-point numbers in the range <code>0</code> (silent) to <code>1</code> (loudest)e.g., <code>0</code> is 0%, <code>0.5</code> is 50%, <code>1</code> is 100%.</li>
</ul>
</li>
</ul>
<h5><code>&lt;&lt;setplaylist&gt;&gt;</code>-compatible form</h5>
<ul>
<li><strong><code>actionList</code>:</strong> <em>Identical to the <code>&lt;&lt;createplaylist&gt;&gt;</code>-compatible form.</em></li>
</ul>
<h4>Examples: <em>(only <code>&lt;&lt;createplaylist&gt;&gt;</code>-compatible form shown)</em></h4>
<h5>Basic usage</h5>
<pre><code> Given the following (best done in the StoryInit special passage)
&lt;&lt;cacheaudio "swamped"       "media/audio/Swamped.mp3"&gt;&gt;
&lt;&lt;cacheaudio "heavens_a_lie" "media/audio/Heaven's_A_Lie.mp3"&gt;&gt;
&lt;&lt;cacheaudio "closer"        "media/audio/Closer.mp3"&gt;&gt;
&lt;&lt;cacheaudio "to_the_edge"   "media/audio/To_The_Edge.mp3"&gt;&gt;
&lt;&lt;createplaylist "bgm_lacuna"&gt;&gt;
	&lt;&lt;track "swamped"       volume 1&gt;&gt;
	&lt;&lt;track "heavens_a_lie" volume 1&gt;&gt;
	&lt;&lt;track "closer"        volume 1&gt;&gt;
	&lt;&lt;track "to_the_edge"   volume 1&gt;&gt;
&lt;&lt;/createplaylist&gt;&gt;

 Start playback
&lt;&lt;playlist "bgm_lacuna" play&gt;&gt;

 Start playback at 50% volume
&lt;&lt;playlist "bgm_lacuna" volume 0.5 play&gt;&gt;

 Start non-repeating playback
&lt;&lt;playlist "bgm_lacuna" unloop play&gt;&gt;

 Start playback with a randomly shuffled playlist
&lt;&lt;playlist "bgm_lacuna" shuffle play&gt;&gt;

 Start playback and fade from 0% to 100% volume
&lt;&lt;playlist "bgm_lacuna" volume 0 fadein&gt;&gt;

 Start playback and fade from 75% to 0% volume
&lt;&lt;playlist "bgm_lacuna" volume 0.75 fadeout&gt;&gt;

 Start playback and fade from 25% to 75% volume
&lt;&lt;playlist "bgm_lacuna" volume 0.25 fadeto 0.75&gt;&gt;

 Start playback and fade from 25% to 75% volume over 30 seconds
&lt;&lt;playlist "bgm_lacuna" volume 0.25 fadeoverto 30 0.75&gt;&gt;

 Pause playback
&lt;&lt;playlist "bgm_lacuna" pause&gt;&gt;

 Stop playback
&lt;&lt;playlist "bgm_lacuna" stop&gt;&gt;

 Mute playback, without changing the current playback state
&lt;&lt;playlist "bgm_lacuna" mute&gt;&gt;

 Unmute playback, without changing the current playback state
&lt;&lt;playlist "bgm_lacuna" unmute&gt;&gt;

 Change the volume to 40%, without changing the current playback state
&lt;&lt;playlist "bgm_lacuna" volume 0.40&gt;&gt;

 Set the playlist to randomly shuffle, without changing the current playback state
&lt;&lt;playlist "bgm_lacuna" shuffle&gt;&gt;
</code></pre>
<h5>Using the <code>load</code> and <code>unload</code> actions</h5>
<p role="note" class="warning"><b>Warning:</b>
Be <em>very careful</em> with these if your audio sources are on the network, as you are forcing players to begin downloading them.  Not everyone has
blazing fast internet with unlimited dataespecially true for mobile users.  Pease, <strong><em>do not</em></strong> take your players' bandwidth and data usage lightly.
</p>
<pre><code> If they're not currently loading, drop existing data buffers and load all of the playlist's tracks
&lt;&lt;playlist "bgm_lacuna" load&gt;&gt;

 Unload all of the playlist's tracks, dropping existing data buffers
&lt;&lt;playlist "bgm_lacuna" unload&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-removeaudiogroup"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-removeaudiogroup" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;removeaudiogroup groupId&gt;&gt;</code> </span></h3>
<p>Removes the audio group with the given ID.</p>
<p role="note"><b>Note:</b>
You may not remove the predefined group IDs (<code>:all</code>, <code>:looped</code>, <code>:muted</code>, <code>:paused</code>, <code>:playing</code>) or the <code>:not</code> group modifier.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>groupId</code>:</strong> The ID of the group.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Given a group set up via &lt;&lt;createaudiogroup ":ui"&gt;&gt;&lt;&lt;/createplaylist&gt;&gt;
&lt;&lt;removeaudiogroup ":ui"&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-removeplaylist"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-removeplaylist" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;removeplaylist listId&gt;&gt;</code> </span></h3>
<p>Removes the playlist with the given ID.</p>
<h4>History:</h4>
<ul>
<li><code>v2.8.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>listId</code>:</strong> The ID of the playlist.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Given a playlist set up via &lt;&lt;createplaylist "bgm_lacuna"&gt;&gt;&lt;&lt;/createplaylist&gt;&gt;
&lt;&lt;removeplaylist "bgm_lacuna"&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-waitforaudio"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-waitforaudio" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;waitforaudio&gt;&gt;</code> </span></h3>
<p>Displays the loading screen until <em>all</em> currently registered audio has either loaded to a playable state or aborted loading due to errors.  Requires tracks to be set up via <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-cacheaudio"><code>&lt;&lt;cacheaudio&gt;&gt;</code></a>.</p>
<p role="note"><b>Note:</b>
This macro should be invoked <strong><em>once</em></strong> following any invocations of <code>&lt;&lt;cacheaudio&gt;&gt;</code> and <code>&lt;&lt;createplaylist&gt;&gt;</code>, if any <code>&lt;&lt;track&gt;&gt;</code> definitions used the <code>copy</code> keyword, for which you want the loading screen displayed.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.8.0</code>: Introduced.</li>
</ul>
<h4>Arguments: <em>none</em></h4>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>&lt;&lt;cacheaudio "a" "a_track."&gt;&gt;
&lt;&lt;cacheaudio "b" "b_track."&gt;&gt;
&lt;&lt;cacheaudio "c" "c_track."&gt;&gt;
&lt;&lt;cacheaudio "d" "d_track."&gt;&gt;
&lt;&lt;waitforaudio&gt;&gt;
</code></pre>
<h5>Load only selected audio at startup</h5>
<pre><code> First, register the tracks that will be needed soon
&lt;&lt;cacheaudio "a" "a_track."&gt;&gt;
&lt;&lt;cacheaudio "b" "b_track."&gt;&gt;

 Next, load all currently registered tracks (meaning: "a" and "b")
&lt;&lt;waitforaudio&gt;&gt;

 Finally, register any tracks that won't be needed until later
&lt;&lt;cacheaudio "c" "c_track."&gt;&gt;
&lt;&lt;cacheaudio "d" "d_track."&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-setplaylist"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-setplaylist" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>&lt;&lt;setplaylist trackIdList&gt;&gt;</code></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This macro has been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-createplaylist"><code>&lt;&lt;createplaylist&gt;&gt;</code></a> macro for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.8.0</code>: Deprecated in favor of <code>&lt;&lt;createplaylist&gt;&gt;</code>.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="macros-macro-stopallaudio"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-stopallaudio" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>&lt;&lt;stopallaudio&gt;&gt;</code></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This macro has been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-audio"><code>&lt;&lt;audio&gt;&gt;</code></a> macro for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.8.0</code>: Deprecated in favor of <code>&lt;&lt;audio ":all" stop&gt;&gt;</code>.</li>
</ul>
<!-- ***************************************************************************
	Miscellaneous Macros
**************************************************************************** -->
<h2 id="macros-miscellaneous"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-miscellaneous" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Miscellaneous Macros </span></h2>
<!-- *********************************************************************** -->
<h3 id="macros-macro-done"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-done" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;done&gt;&gt;  &lt;&lt;/done&gt;&gt;</code> </span></h3>
<p>Silently executes its contents when the incoming passage is done rendering and has been added to the page.  Generally, only really useful for running code that needs to manipulate elements from the incoming passage, since you must wait until they've been added to the page.</p>
<p role="note" class="tip"><b>Tip:</b>
If you need to run the same code on multiple passages, consider using the <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-passagedone"><code>PassageDone</code> special passage</a> or, for a JavaScript/TwineScript solution, a <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagedisplay"><code>:passagedisplay</code> event</a> instead.  They serve the same basic purpose as the <code>&lt;&lt;done&gt;&gt;</code> macro, but are run each time passage navigation occurs.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.35.0</code>: Introduced.</li>
<li><code>v2.36.0</code>: Changed delay mechanism to improve waiting on the DOM.</li>
</ul>
<h4>Arguments: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>@@#spy;@@

&lt;&lt;done&gt;&gt;
	&lt;&lt;replace "#spy"&gt;&gt;I spy with my little eye, a crab rangoon.&lt;&lt;/replace&gt;&gt;
&lt;&lt;/done&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-goto"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-goto" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;goto passageName&gt;&gt;</code><br><code>&lt;&lt;goto linkMarkup&gt;&gt;</code> </span></h3>
<p>Immediately forwards the player to the passage with the given name.  May be called either with the passage name or with a link markup.</p>
<p role="note"><b>Note:</b>
In most cases, you will not need to use <code>&lt;&lt;goto&gt;&gt;</code> as there are often better and easier ways to forward the player.  For example, a common use of <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-link"><code>&lt;&lt;link&gt;&gt;</code></a> is to perform various actions before forwarding the player to another passage.  In that case, unless you need to dynamically determine the destination passage within the <code>&lt;&lt;link&gt;&gt;</code> body, <code>&lt;&lt;goto&gt;&gt;</code> is unnecessary as <code>&lt;&lt;link&gt;&gt;</code> already includes the ability to forward the player.
</p>
<p role="note" class="warning"><b>Warning:</b>
Using <code>&lt;&lt;goto&gt;&gt;</code> to automatically forward players from one passage to another with no input from them will both create junk moments within the story history and make it extremely difficult for players to navigate the history.  It is <strong><em>strongly</em></strong> recommended that you look into other methods to achieve your goals insteade.g., <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-navigation-override"><code>Config.navigation.override</code></a>.
</p>
<p role="note" class="warning"><b>Warning:</b>
<code>&lt;&lt;goto&gt;&gt;</code> <strong><em>does not</em></strong> terminate passage rendering in the passage where it was encountered, so care must be taken to ensure that no unwanted state modifications occur after its call.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<h5>Passage name form</h5>
<ul>
<li><strong><code>passageName</code>:</strong> The name of the passage to go to.</li>
</ul>
<h5>Link markup form</h5>
<ul>
<li><strong><code>linkMarkup</code>:</strong> The link markup to use (regular syntax only, no setters).</li>
</ul>
<h4>Examples:</h4>
<pre><code> Passage name form
&lt;&lt;goto "Somewhere over yonder"&gt;&gt;
&lt;&lt;goto $selectedPassage&gt;&gt;

 Link markup form
&lt;&lt;goto [[Somewhere over yonder]]&gt;&gt;
&lt;&lt;goto [[$selectedPassage]]&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-repeat"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-repeat" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;repeat delay [transition|t8n]&gt;&gt;  &lt;&lt;/repeat&gt;&gt;</code> </span></h3>
<p>Repeatedly executes its contents after the given delay, inserting any output into the passage in its place.  May be terminated by a <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-stop"><code>&lt;&lt;stop&gt;&gt;</code></a> macro.</p>
<p role="note"><b>Note:</b>
Passage navigation terminates all pending timed executions.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>delay</code>:</strong> The amount of time to delay, as a valid <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/time">CSS time value</a>e.g., <code>5s</code> and <code>500ms</code>.  The minimum delay is <code>40ms</code>.</li>
<li><strong><code>transition</code>:</strong> (optional) Keyword, used to signify that a CSS transition should be applied to the incoming insertions.</li>
<li><strong><code>t8n</code>:</strong> (optional) Keyword, alias for <strong><code>transition</code></strong>.</li>
</ul>
<h4>Examples:</h4>
<pre><code> A countdown timer
&lt;&lt;set $seconds to 10&gt;&gt;\
Countdown: &lt;span id="countdown"&gt;$seconds seconds remaining&lt;/span&gt;!\
&lt;&lt;silently&gt;&gt;
	&lt;&lt;repeat 1s&gt;&gt;
		&lt;&lt;set $seconds to $seconds - 1&gt;&gt;
		&lt;&lt;if $seconds gt 0&gt;&gt;
			&lt;&lt;replace "#countdown"&gt;&gt;$seconds seconds remaining&lt;&lt;/replace&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;replace "#countdown"&gt;&gt;Too Late&lt;&lt;/replace&gt;&gt;
			/* do something useful here */
			&lt;&lt;stop&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/repeat&gt;&gt;
&lt;&lt;/silently&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-stop"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-stop" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;stop&gt;&gt;</code> </span></h3>
<p>Used within <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-repeat"><code>&lt;&lt;repeat&gt;&gt;</code></a> macros.  Terminates the execution of the current <code>&lt;&lt;repeat&gt;&gt;</code>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments: <em>none</em></h4>
<!-- *********************************************************************** -->
<h3 id="macros-macro-timed"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-timed" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;timed delay [transition|t8n]&gt;&gt; </code><br><span class="child"><code>[&lt;&lt;next [delay]&gt;&gt; ]</code></span><br><code>&lt;&lt;/timed&gt;&gt;</code> </span></h3>
<p>Executes its contents after the given delay, inserting any output into the passage in its place.  Additional timed executions may be chained via <code>&lt;&lt;next&gt;&gt;</code>.</p>
<p role="note"><b>Note:</b>
Passage navigation terminates all pending timed executions.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Arguments:</h4>
<h5><code>&lt;&lt;timed&gt;&gt;</code></h5>
<ul>
<li><strong><code>delay</code>:</strong> The amount of time to delay, as a valid <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/time">CSS time value</a>e.g., <code>5s</code> and <code>500ms</code>.  The minimum delay is <code>40ms</code>.</li>
<li><strong><code>transition</code>:</strong> (optional) Keyword, used to signify that a CSS transition should be applied to the incoming insertions.</li>
<li><strong><code>t8n</code>:</strong> (optional) Keyword, alias for <strong><code>transition</code></strong>.</li>
</ul>
<h5><code>&lt;&lt;next&gt;&gt;</code></h5>
<ul>
<li><strong><code>delay</code>:</strong> (optional) The amount of time to delay, as a valid <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/time">CSS time value</a>e.g., <code>5s</code> and <code>500ms</code>.  The minimum delay is <code>40ms</code>.  If omitted, the last delay specified, from a <code>&lt;&lt;next&gt;&gt;</code> or the parent <code>&lt;&lt;timed&gt;&gt;</code>, will be used.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Insert some text after 5 seconds with a transition
I want to go to&lt;&lt;timed 5s t8n&gt;&gt; WONDERLAND!&lt;&lt;/timed&gt;&gt;

 Replace some text after 10 seconds
I like green &lt;span id="eggs"&gt;eggs&lt;/span&gt; and ham!\
&lt;&lt;timed 10s&gt;&gt;&lt;&lt;replace "#eggs"&gt;&gt;pancakes&lt;&lt;/replace&gt;&gt;&lt;&lt;/timed&gt;&gt;

 A execute &lt;&lt;goto&gt;&gt; after 10 seconds
&lt;&lt;timed 10s&gt;&gt;&lt;&lt;goto "To the Moon, Alice"&gt;&gt;&lt;&lt;/timed&gt;&gt;

 Insert some text in 2 second intervals three times (at: 2s, 4s, 6s)
&lt;&lt;timed 2s&gt;&gt;Hi! Ho!
&lt;&lt;next&gt;&gt;Hi! Ho!
&lt;&lt;next&gt;&gt;It's off to work we go!
&lt;&lt;/timed&gt;&gt;

 Set a $variable after 4 seconds, 3 seconds, 2 seconds, and 1 second
&lt;&lt;silently&gt;&gt;
&lt;&lt;set $choice to 0&gt;&gt;
&lt;&lt;timed 4s&gt;&gt;
	&lt;&lt;set $choice to 1&gt;&gt;
&lt;&lt;next 3s&gt;&gt;
	&lt;&lt;set $choice to 2&gt;&gt;
&lt;&lt;next 2s&gt;&gt;
	&lt;&lt;set $choice to 3&gt;&gt;
&lt;&lt;next 1s&gt;&gt;
	&lt;&lt;set $choice to 4&gt;&gt;
&lt;&lt;/timed&gt;&gt;
&lt;&lt;silently&gt;&gt;

 Replace some text with a variable interval
 Given: _delay is "2s" the interval will be 2 seconds
I'll have &lt;span id="drink"&gt;some water&lt;/span&gt;, please.\
&lt;&lt;timed _delay&gt;&gt;&lt;&lt;replace "#drink"&gt;&gt;a glass of milk&lt;&lt;/replace&gt;&gt;\
&lt;&lt;next&gt;&gt;&lt;&lt;replace "#drink"&gt;&gt;a can of soda&lt;&lt;/replace&gt;&gt;\
&lt;&lt;next&gt;&gt;&lt;&lt;replace "#drink"&gt;&gt;a cup of coffee&lt;&lt;/replace&gt;&gt;\
&lt;&lt;next&gt;&gt;&lt;&lt;replace "#drink"&gt;&gt;tea, southern style, sweet&lt;&lt;/replace&gt;&gt;\
&lt;&lt;next&gt;&gt;&lt;&lt;replace "#drink"&gt;&gt;a scotch, neat&lt;&lt;/replace&gt;&gt;\
&lt;&lt;next&gt;&gt;&lt;&lt;replace "#drink"&gt;&gt;a bottle of your finest absinthe&lt;&lt;/replace&gt;&gt;\
&lt;&lt;/timed&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macros-macro-widget"><a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-widget" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;widget widgetName [container]&gt;&gt;  &lt;&lt;/widget&gt;&gt;</code> </span></h3>
<p>Creates a new widget macro (henceforth, widget) with the given name.  Widgets allow you to create macros by using the standard macros and markup that you use normally within your story.  All widgets may access arguments passed to them via the <code>_args</code> special variable.  Block widgets may access the contents they enclose via the <code>_contents</code> special variable.</p>
<p role="note" class="warning"><b>Warning:</b>
Widgets should <em>always</em> be defined within a <code>widget</code>-tagged passageany widgets that are not may be lost on page reloadand you may use as few or as many such passages as you desire.  <em>Do not</em> add a <code>widget</code> tag to any of the <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passages">specially named passages</a> and attempt to define your widgets there.
</p>
<p role="note" class="warning"><b>Warning:</b>
The array-like object stored in the <code>_args</code> variable should be treated as though it were immutablei.e., unable to be modifiedbecause in the future it will be made thus, so any attempt to modify it will cause an error.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.36.0</code>: Added the <code>container</code> keyword, <code>_args</code> variable, and <code>_contents</code> variable.  Deprecated the <code>$args</code> variable in favor of <code>_args</code>.</li>
</ul>
<h4>Arguments:</h4>
<ul>
<li><strong><code>widgetName</code>:</strong> The name of the created widget, which should not contain whitespace or angle brackets (<code>&lt;</code>, <code>&gt;</code>).  If the name of an existing widget is chosen, the new widget will overwrite the older version.  <strong>NOTE:</strong> The names of existing macros are invalid widget names and any attempts to use such a name will cause an error.</li>
<li><strong><code>container</code>:</strong> (optional) Keyword, used to signify that the widget should be created as a container widgeti.e., non-void, requiring a closing tag; e.g., <code>&lt;&lt;foo&gt;&gt;&lt;&lt;/foo&gt;&gt;</code>.</li>
</ul>
<h4>Special variables, <code>_args</code> &amp; <code>_contents</code>:</h4>
<p>The <code>_args</code> special variable is used internally to store arguments passed to the widgetas zero-based indices; i.e., <code>_args[0]</code> is the first parsed argument, <code>_args[1]</code> is the second, etcand the full argument string in raw and parsed formsaccessed via the <code>_args.raw</code> and <code>_args.full</code> properties.</p>
<p>The <code>_contents</code> special variable is used internally, by container widgets, to store the contents they enclose.</p>
<p>When a widget is called, any existing <code>_args</code> variable, and for container widgets <code>_contents</code>, is stored for the duration of the call and restored after.  This means that non-widget uses of these special variable are completely safe, though this does have the effect that uses external to widgets are inaccessible within them unless passed in as arguments.</p>
<p role="note" class="warning"><b>Warning:</b>
Unless localized by use of the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-capture"><code>&lt;&lt;capture&gt;&gt;</code> macro</a>, any story or other temporary variables used within widgets are part of a story's normal variable store, so care <em>must be</em> taken not to accidentally either overwrite or pick up an existing value.
</p>
<h4>Examples:</h4>
<p role="note"><b>Note:</b>
No line-break control mechanisms are used in the following examples for readability.  In practice, you'll probably want to use either <a href="https://www.motoslave.net/sugarcube/2/docs/#markup-line-continuation">line continuations</a> or one of the no-break methods: <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-nobr"><code>Config.passages.nobr</code> setting</a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-nobr"><code>nobr</code> special tag</a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-nobr"><code>&lt;&lt;nobr&gt;&gt;</code> macro</a>.
</p>
<h5>Basic usage (non-container)</h5>
<pre><code> Creating a gender pronoun widget
&lt;&lt;widget "he"&gt;&gt;
	&lt;&lt;if $pcSex eq "male"&gt;&gt;
		he
	&lt;&lt;elseif $pcSex eq "female"&gt;&gt;
		she
	&lt;&lt;else&gt;&gt;
		it
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

 Using it
"Are you sure that &lt;&lt;he&gt;&gt; can be trusted?"
</code></pre>
<pre><code> Creating a silly print widget
&lt;&lt;widget "pm"&gt;&gt;
	&lt;&lt;if _args[0]&gt;&gt;
		&lt;&lt;print _args[0]&gt;&gt;
	&lt;&lt;else&gt;&gt;
		Mum's the word!
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

 Using it
&lt;&lt;pm&gt;&gt;         Outputs: Mum's the word!
&lt;&lt;pm "Hi!"&gt;&gt;   Outputs: Hi!
</code></pre>
<h5>Basic usage (container)</h5>
<pre><code> Creating a simple dialog box widget
&lt;&lt;widget "say" container&gt;&gt;
	&lt;div class="say-box"&gt;
		&lt;img class="say-image" @src="'images/' + _args[0].toLowerCase() + '.png'"&gt;
		&lt;p class="say-text"&gt;_contents&lt;/p&gt;
	&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;

 Using it
&lt;&lt;say "Chapel"&gt;&gt;Tweego is a pathway to many abilities some consider to be unnatural.&lt;&lt;/say&gt;&gt;
</code></pre>

<!-- ***********************************************************************************************
	Functions
************************************************************************************************ -->
<h1 id="functions"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Functions </span></h1>
<!-- *********************************************************************** -->
<h3 id="functions-function-clone"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-clone" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>clone(original)</code>  <em>any</em> </span></h3>
<p>Returns a deep copy of the given value.</p>
<p role="note"><b>Note:</b>
Only the primitives, generic objects, some JavaScript natives (specifically: <code>Array</code>, <code>Date</code>, <code>Map</code>, <code>RegExp</code>, and <code>Set</code>), and DOM node objects are supported by default.  Unsupported object types, either native or custom, will need to implement <code>.clone()</code> method to be properly supported by the <code>clone()</code> functionwhen called on such an object, it will simply defer to the local method; see the <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-tips-non-generic-object-types"><em>Non-generic object types (a.k.a. classes)</em> guide</a> for more information.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>original</code>:</strong> (<em>any</em>) The object to value.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Without clone(); given the generic object: $foo = { id : 1 }
&lt;&lt;set $bar to $foo&gt;&gt;
&lt;&lt;set $bar.id to 5&gt;&gt;
$foo.id   Returns: 5
$bar.id   Returns: 5

// With clone(); given the generic object: $foo = { id : 1 }
&lt;&lt;set $bar to clone($foo)&gt;&gt;
&lt;&lt;set $bar.id to 5&gt;&gt;
$foo.id   Returns: 1
$bar.id   Returns: 5
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-either"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-either" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>either(list)</code>  <em>any</em> </span></h3>
<p>Returns a random value from its given arguments.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>list</code>:</strong> (<em>any</em>) The list of values to operate on.  May be any combination of singular values, actual arrays, or array-like objects.  All values will be concatenated into a single list for selection.  <strong>NOTE:</strong> Does not flatten nested arraysif this is required, the <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-flat"><code>&lt;Array&gt;.flat()</code></a> method may be used to flatten the nested arrays prior to passing them to <code>either()</code>.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Using singular values
either("Blueberry", "Cherry", "Pecan")   Returns a random pie from the whole list

// Using arrays; given: $pies = ["Blueberry", "Cherry", "Pecan"]
either($pies)   Returns a random pie from the whole array

// Using singular values and arrays; given: $letters = ["A", "B"]
either($letters, "C", "D")   Returns a random value from the whole listi.e., "A", "B", "C", "D"

// Using multiple arrays; given: $letters = ["A", "B"] &amp; $numerals = ["1", "2"]
either($letters, $numerals)   Returns a random value from the whole listi.e., "A", "B", "1", "2"
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-forget"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-forget" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>forget(key)</code> </span></h3>
<p>Removes the specified key, and its associated value, from the story metadata store.</p>
<p role="note" class="see"><b>See Also:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-memorize"><code>memorize()</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-recall"><code>recall()</code></a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>key</code>:</strong> (<em>string</em>) The key to remove.</li>
</ul>
<h4>Examples:</h4>
<pre><code>&lt;&lt;run forget('achievements')&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-hasvisited"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-hasvisited" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>hasVisited(passages)</code>  <em>boolean</em> </span></h3>
<p>Returns whether the passage with the given title occurred within the story history.  If multiple passage titles are given, returns the logical-AND aggregate of the seti.e., <code>true</code> if all were found, <code>false</code> if any were not found.</p>
<h4>History:</h4>
<ul>
<li><code>v2.7.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>passages</code>:</strong> (<em>string</em> | <em>Array&lt;string&gt;</em>) The title(s) of the passage(s) to search for.  May be a list or an array of passages.</li>
</ul>
<h4>Examples:</h4>
<pre><code>&lt;&lt;if hasVisited("Bar")&gt;&gt;has been to the Bar&lt;&lt;/if&gt;&gt;
&lt;&lt;if not hasVisited("Bar")&gt;&gt;has never been to the Bar&lt;&lt;/if&gt;&gt;
&lt;&lt;if hasVisited("Bar", "Caf")&gt;&gt;has been to both the Bar and Caf&lt;&lt;/if&gt;&gt;
&lt;&lt;if not hasVisited("Bar", "Caf")&gt;&gt;has never been to either the Bar, Caf, or both&lt;&lt;/if&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-lastvisited"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-lastvisited" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>lastVisited(passages)</code>  <em>integer</em> </span></h3>
<p>Returns the number of turns that have passed since the last instance of the passage with the given title occurred within the story history or <code>-1</code> if it does not exist.  If multiple passage titles are given, returns the lowest count (which can be <code>-1</code>).</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>passages</code>:</strong> (<em>string</em> | <em>Array&lt;string&gt;</em>) The title(s) of the passage(s) to search for.  May be a list or an array of passages.</li>
</ul>
<h4>Examples:</h4>
<pre><code>&lt;&lt;if lastVisited("Bar") is -1&gt;&gt;has never been to the Bar&lt;&lt;/if&gt;&gt;
&lt;&lt;if lastVisited("Bar") is 0&gt;&gt;is currently in the Bar&lt;&lt;/if&gt;&gt;
&lt;&lt;if lastVisited("Bar") is 1&gt;&gt;was in the Bar one turn ago&lt;&lt;/if&gt;&gt;
&lt;&lt;if lastVisited("Bar", "Caf") is -1&gt;&gt;has never been to the Bar, Caf, or both&lt;&lt;/if&gt;&gt;
&lt;&lt;if lastVisited("Bar", "Caf") is 2&gt;&gt;has been to both the Bar and Caf, most recently two turns ago&lt;&lt;/if&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-importscripts"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-importscripts" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>importScripts(urls)</code>  <em><code>Promise</code> object</em> </span></h3>
<p>Load and integrate external JavaScript scripts.</p>
<p role="note"><b>Note:</b>
Loading is done asynchronously at run time, so if the script must be available within a tight time frame, then you should use the <code>Promise</code> returned by the function to ensure that the script is loaded before it is needed.
</p>
<p role="note"><b>Note:</b>
Your project's JavaScript section (Twine&nbsp;2: the Story JavaScript; Twine&nbsp;1/Twee: a <code>script</code>-tagged passage) is normally the best place to call <code>importScripts()</code>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.16.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>urls</code>:</strong> (<em>string</em> | <em>Array&lt;string&gt;</em>) The URLs of the external scripts to import.  Loose URLs are imported concurrently, arrays of URLs are imported sequentially.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>// Import all scripts concurrently
importScripts(
	"https://somesite/a/path/a.js",
	"https://somesite/a/path/b.js",
	"https://somesite/a/path/c.js",
	"https://somesite/a/path/d.js"
);

// Import all scripts sequentially
importScripts([
	"https://somesite/a/path/a.js",
	"https://somesite/a/path/b.js",
	"https://somesite/a/path/c.js",
	"https://somesite/a/path/d.js"
]);

// Import scripts a.js, b.js, and the c.js/d.js group concurrently,
// while importing c.js and d.js sequentially relative to each other
importScripts(
	"https://somesite/a/path/a.js",
	"https://somesite/a/path/b.js",
	[
		"https://somesite/a/path/c.js",
		"https://somesite/a/path/d.js"
	]
);
</code></pre>
<h5>Basic usage with the returned <code>Promise</code> object</h5>
<pre><code>// Import a script while using the returned Promise to ensure that
// the script has been fully loaded before executing dependent code
importScripts("https://somesite/a/path/a.js")
	.then(function () {
		// Code that depends on the script goes here.
	})
	.catch(function (err) {
		// There was an error loading the script, log it to the console.
		console.log(err);
	});
</code></pre>
<h5>Saving the returned <code>Promise</code> object for later use</h5>
<pre><code>// Import a script while saving the returned Promise so it may be used later
setup.aScriptImport = importScripts("https://somesite/a/path/aScript.js");

// Use the returned Promise later on to ensure that the script has been fully
// loaded before executing dependent code
setup.aScriptImport
	.then(function () {
		// Code that depends on the script goes here.
	})
	.catch(function (err) {
		// There was an error loading the script, log it to the console.
		console.log(err);
	});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-importstyles"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-importstyles" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>importStyles(urls)</code>  <em><code>Promise</code> object</em> </span></h3>
<p>Load and integrate external CSS stylesheets.</p>
<p role="note"><b>Note:</b>
Loading is done asynchronously at run time, so if the stylesheet must be available within a tight time frame, then you should use the <code>Promise</code> returned by the function to ensure that the stylesheet is loaded before it is needed.
</p>
<p role="note"><b>Note:</b>
Your project's JavaScript section (Twine&nbsp;2: the Story JavaScript; Twine&nbsp;1/Twee: a <code>script</code>-tagged passage) is normally the best place to call <code>importStyles()</code>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.16.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>urls</code>:</strong> (<em>string</em> | <em>Array&lt;string&gt;</em>) The URLs of the external stylesheets to import.  Loose URLs are imported concurrently, arrays of URLs are imported sequentially.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>// Import all stylesheets concurrently
importStyles(
	"https://somesite/a/path/a.css",
	"https://somesite/a/path/b.css",
	"https://somesite/a/path/c.css",
	"https://somesite/a/path/d.css"
);

// Import all stylesheets sequentially
importStyles([
	"https://somesite/a/path/a.css",
	"https://somesite/a/path/b.css",
	"https://somesite/a/path/c.css",
	"https://somesite/a/path/d.css"
]);

// Import stylesheets a.css, b.css, and the c.css/d.css group concurrently,
// while importing c.css and d.css sequentially relative to each other
importStyles(
	"https://somesite/a/path/a.css",
	"https://somesite/a/path/b.css",
	[
		"https://somesite/a/path/c.css",
		"https://somesite/a/path/d.css"
	]
);
</code></pre>
<h5>Basic usage with the returned <code>Promise</code> object</h5>
<pre><code>// Grab a loading screen lock
var lsLockId = LoadScreen.lock();

// Import a stylesheet while using the returned Promise to ensure that the
// stylesheet has been fully loaded before unlocking the loading screen
importStyles("https://somesite/a/path/a.css")
	.then(function () {
		// The stylesheet has been loaded, release the loading screen lock.
		LoadScreen.unlock(lsLockId);
	})
	.catch(function (err) {
		// There was an error loading the stylesheet, log it to the console.
		console.log(err);
	});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-memorize"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-memorize" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>memorize(key, value)</code> </span></h3>
<p>Sets the specified key and value within the story metadata store, which causes them to persist over story and browser restarts.  To update the value associated with a key, simply set it again.</p>
<p role="note"><b>Note:</b>
The story metadata, like saves, is tied to the specific story it was generated with.  It is not a mechanism for moving data between stories.
</p>
<p role="note" class="warning"><b>Warning:</b>
The story metadata store <strong><em>is not</em></strong>, and should not be used as, a replacement for saves.  Examples of good uses: achievement tracking, new game+ data, playthrough statistics, etc.
</p>
<p role="note" class="warning"><b>Warning:</b>
This feature is largely incompatible with private browsing modes, which cause all in-browser storage mechanisms to either persist only for the lifetime of the browsing session or fail outright.
</p>
<p role="note" class="see"><b>See Also:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-forget"><code>forget()</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-recall"><code>recall()</code></a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>key</code>:</strong> (<em>string</em>) The key that should be set.</li>
<li><strong><code>value</code>:</strong> (<em>any</em>) The value to set.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Sets 'achievements', with the given value, in the metadata store.
&lt;&lt;run memorize('achievements', { ateYellowSnow : true })&gt;&gt;

// Sets 'ngplus', with the given value, in the metadata store.
&lt;&lt;run memorize('ngplus', true)&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-passage"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-passage" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>passage()</code>  <em>string</em> </span></h3>
<p>Returns the title of the active (present) passage.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>&lt;&lt;if passage() is "Caf"&gt;&gt;the active passage is the Caf passage&lt;&lt;/if&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-previous"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-previous" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>previous()</code>  <em>string</em> </span></h3>
<p>Returns the title of the most recent previous passage whose title does not match that of the active passage or an empty string, if there is no such passage.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>&lt;&lt;if previous() is "Caf"&gt;&gt;the most recent non-active passage is the Caf passage&lt;&lt;/if&gt;&gt;

 Commonly used as part of a link to return to the most recent non-active passage
[[Return|previous()]]
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-random"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-random" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>random([min ,] max)</code>  <em>integer</em> </span></h3>
<p>Returns a pseudo-random whole number (integer) within the range of the given bounds (inclusive)i.e., [min,&nbsp;max].</p>
<p role="note"><b>Note:</b>
By default, it uses <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random"><code>Math.random()</code></a> as its source of (non-deterministic) randomness, however, when the seedable PRNG has been enabled, via <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-prng-init"><code>State.prng.init()</code></a>, it uses that (deterministic) seeded PRNG instead.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>min</code>:</strong> (optional, <em>integer</em>) The lower bound of the random number (inclusive).  If omitted, will default to <code>0</code>.</li>
<li><strong><code>max</code>:</strong> (<em>integer</em>) The upper bound of the random number (inclusive).</li>
</ul>
<h4>Examples:</h4>
<pre><code>random(5)      Returns a number in the range 05
random(1, 6)   Returns a number in the range 16
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-randomfloat"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-randomfloat" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>randomFloat([min ,] max)</code>  <em>float</em> </span></h3>
<p>Returns a pseudo-random decimal number (floating-point) within the range of the given bounds (inclusive for the minimum, exclusive for the maximum)i.e., [min,&nbsp;max).</p>
<p role="note"><b>Note:</b>
By default, it simply returns non-deterministic results from <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random"><code>Math.random()</code></a>, however, when the seedable PRNG has been enabled, via <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-prng-init"><code>State.prng.init()</code></a>, it returns deterministic results from the seeded PRNG instead.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>min</code>:</strong> (optional, <em>float</em>) The lower bound of the random number (inclusive).  If omitted, will default to <code>0.0</code>.</li>
<li><strong><code>max</code>:</strong> (<em>float</em>) The upper bound of the random number (exclusive).</li>
</ul>
<h4>Examples:</h4>
<pre><code>randomFloat(5.0)        Returns a number in the range 0.04.9999999
randomFloat(1.0, 6.0)   Returns a number in the range 1.05.9999999
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-recall"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-recall" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>recall(key [, defaultValue])</code>  <em>any</em> </span></h3>
<p>Returns the value associated with the specified key from the story metadata store or, if no such key exists, the specified default value, if any.</p>
<p role="note" class="see"><b>See Also:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-forget"><code>forget()</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-memorize"><code>memorize()</code></a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>key</code>:</strong> (<em>string</em>) The key whose value should be returned.</li>
<li><strong><code>defaultValue</code>:</strong> (optional, <em>any</em>) The value to return if the key doesn't exist.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Set setup.achievements to the 'achievements' metadata or an empty generic object.
&lt;&lt;set setup.achievements to recall('achievements', {})&gt;&gt;

// Set setup.ngplus to the 'ngplus' metadata, with no default.
&lt;&lt;set setup.ngplus to recall('ngplus')&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-setpageelement"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-setpageelement" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>setPageElement(idOrElement , passages [, defaultText])</code>  <em><code>HTMLElement</code> object</em> | <em>null</em> </span></h3>
<p>Renders the selected passage into the target element, replacing any existing content, and returns the element.  If no passages are found and default text is specified, it will be used instead.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>idOrElement</code>:</strong> (<em>string</em> | <em><code>HTMLElement</code> object</em>) The ID of the element or the element itself.</li>
<li><strong><code>passages</code>:</strong> (<em>string</em> | <em>Array&lt;string&gt;</em>) The name(s) of the passage(s) to search for.  May be a single passage or an array of passages.  If an array of passage names is specified, the first passage to be found is used.</li>
<li><strong><code>defaultText</code>:</strong> (optional, <em>string</em>) The default text to use if no passages are found.</li>
</ul>
<h4>Examples:</h4>
<p role="note"><b>Note:</b>
As it is highly unlikely that either an array of passage names or default text will be needed in the vast majority of cases, only a few basic examples will be given.
</p>
<pre><code>// Using an ID; given an existing element on the page: &lt;div id="my-display"&gt;&lt;/div&gt;
setPageElement("my-display", "MyPassage");

// Using an element; given a reference to an existing element: myElement
setPageElement(myElement, "MyPassage");
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-tags"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-tags" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>tags([passages])</code>  <em>Array&lt;string&gt;</em> </span></h3>
<p>Returns a new array consisting of all of the tags of the given passages.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>passages</code>:</strong> (optional, <em>string</em> | <em>Array&lt;string&gt;</em>) The passages from which to collect tags.  May be a list or an array of passages.  If omitted, will default to the active (present) passageincluded passages do not count for this purpose; e.g., passages pulled in via <code>&lt;&lt;include&gt;&gt;</code>, <code>PassageHeader</code>, etc.</li>
</ul>
<h4>Examples:</h4>
<pre><code>&lt;&lt;if tags().includes("forest")&gt;&gt;the active passage is part of the forest&lt;&lt;/if&gt;&gt;
&lt;&lt;if tags("Lonely Glade").includes("forest")&gt;&gt;the Lonely Glade passage is part of the forest&lt;&lt;/if&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-temporary"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-temporary" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>temporary()</code>  <em>object</em> </span></h3>
<p>Returns a reference to the current temporary variables store (equivalent to: <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-temporary"><code>State.temporary</code></a>).  This is only really useful within pure JavaScript code, as within TwineScript you may simply access temporary variables natively.</p>
<h4>History:</h4>
<ul>
<li><code>v2.19.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Given: _selection is 'Zagnut Bar'
if (temporary().selection === 'Zagnut Bar') {
	/* Do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-time"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-time" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>time()</code>  <em>integer</em> </span></h3>
<p>Returns the number of milliseconds that have passed since the current passage was rendered to the page.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code> Links that vary based on the time
In the darkness, something wicked this way comes.  Quickly!  Do you \
&lt;&lt;link "try to run back into the light"&gt;&gt;
	&lt;&lt;if time() lt 5000&gt;&gt;
		/% The player clicked the link in under 5s, so they escape %/
		&lt;&lt;goto "Well lit passageway"&gt;&gt;
	&lt;&lt;else&gt;&gt;
		/% Else, they're eaten by a grue %/
		&lt;&lt;goto "Eaten by a grue"&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt; \
or [[stand your ground|Eaten by a grue]]?
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-turns"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-turns" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>turns()</code>  <em>integer</em> </span></h3>
<p>Returns the total number (count) of played turns currently in effecti.e., the number of played moments up to the present moment; future (rewound/undone) moments are not included within the total.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>&lt;&lt;print "This is turn #" + turns()&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-variables"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-variables" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>variables()</code>  <em>object</em> </span></h3>
<p>Returns a reference to the active (present) story variables store (equivalent to: <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-variables"><code>State.variables</code></a>).  This is only really useful within pure JavaScript code, as within TwineScript you may simply access story variables natively.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Given: $hasGoldenKey is true
if (variables().hasGoldenKey) {
	/* Do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-visited"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-visited" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>visited([passages])</code>  <em>integer</em> </span></h3>
<p>Returns the number of times that the passage with the given title occurred within the story history.  If multiple passage titles are given, returns the lowest count.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>passages</code>:</strong> (optional, <em>string</em> | <em>Array&lt;string&gt;</em>) The title(s) of the passage(s) to search for.  May be a list or an array of passages.  If omitted, will default to the current passage.</li>
</ul>
<h4>Examples:</h4>
<pre><code>&lt;&lt;if visited() is 3&gt;&gt;this is the third visit to the current passage&lt;&lt;/if&gt;&gt;
&lt;&lt;if visited("Bar")&gt;&gt;has been to the Bar at least once&lt;&lt;/if&gt;&gt;
&lt;&lt;if visited("Caf") is 1&gt;&gt;has been to the Caf exactly once&lt;&lt;/if&gt;&gt;
&lt;&lt;if visited("Bar", "Caf") is 4&gt;&gt;has been to both the Bar and Caf at least four times&lt;&lt;/if&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="functions-function-visitedtags"><a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-visitedtags" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>visitedTags(tags)</code>  <em>integer</em> </span></h3>
<p>Returns the number of passages within the story history that are tagged with all of the given tags.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>tags</code>:</strong> (<em>string</em> | <em>Array&lt;string&gt;</em>) The tags to search for.  May be a list or an array of tags.</li>
</ul>
<h4>Examples:</h4>
<pre><code>&lt;&lt;if visitedTags("forest")&gt;&gt;has been to some part of the forest at least once&lt;&lt;/if&gt;&gt;
&lt;&lt;if visitedTags("forest", "haunted") is 1&gt;&gt;has been to the haunted part of the forest exactly once&lt;&lt;/if&gt;&gt;
&lt;&lt;if visitedTags("forest", "burned") is 3&gt;&gt;has been to the burned part of the forest three times&lt;&lt;/if&gt;&gt;
</code></pre>

<!-- ***********************************************************************************************
	Methods
************************************************************************************************ -->
<h1 id="methods"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Methods </span></h1>
<p>Most of the methods listed below are SugarCube extensions, with the rest being either JavaScript natives or bundled library methods that are listed here for their utilitythough, this is not an exhaustive list.</p>
<p>For more information see:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference">MDN's JavaScript reference</a> for native JavaScript object methodsand more.</li>
<li><a href="https://api.jquery.com/">jQuery API reference</a> for native jQuery methods.</li>
</ul>
<p>Additionally.  SugarCube includes polyfills for virtually all JavaScript (ECMAScript) 5 &amp; 6 native object methodsvia the <a href="https://github.com/es-shims/es5-shim/">es5-shim</a> and <a href="https://github.com/paulmillr/es6-shim/">es6-shim</a> polyfill libraries (shims only, no shams)so they may be safely used even if your project will be played in ancient browsers that do not natively support them.</p>
<!-- ***************************************************************************
	Array
**************************************************************************** -->
<h2 id="methods-array"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Array Methods </span></h2>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-concat"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-concat" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.concat(members)</code>  <em>Array&lt;any&gt;</em> </span></h3>
<p>Concatenates one or more members to the end of the base array and returns the result as a new array.  Does not modify the original.</p>
<h4>History: <em>native JavaScript method</em></h4>
<h4>Parameters:</h4>
<ul>
<li><strong><code>members</code>:</strong> (<em>any</em>) The members to concatenate.  Members that are arrays will be mergedi.e., their members will be concatenated, rather than the array itself.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $fruits1 = ["Apples", "Oranges"], $fruits2 = ["Pears", "Plums"]
$fruits1.concat($fruits2)             Returns ["Apples", "Oranges", "Pears", "Plums"]
$fruits1.concat($fruits2, $fruits2)   Returns ["Apples", "Oranges", "Pears", "Plums", "Pears", "Plums"]
$fruits1.concat("Pears")              Returns ["Apples", "Oranges", "Pears"]
$fruits1.concat("Pears", "Pears")     Returns ["Apples", "Oranges", "Pears", "Pears"]
$fruits1.concat($fruits2, "Pears")    Returns ["Apples", "Oranges", "Pears", "Plums", "Pears"]
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-concatunique"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-concatunique" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.concatUnique(members)</code>  <em>Array&lt;any&gt;</em> </span></h3>
<p>Concatenates one or more unique members to the end of the base array and returns the result as a new array.  Does not modify the original.</p>
<h4>History:</h4>
<ul>
<li><code>v2.21.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>members</code>:</strong> (<em>any</em>) The members to concatenate.  Members that are arrays will be mergedi.e., their members will be concatenated, rather than the array itself.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $fruits1 = ["Apples", "Oranges"], $fruits2 = ["Pears", "Plums"]
$fruits1.concatUnique($fruits2)             Returns ["Apples", "Oranges", "Pears", "Plums"]
$fruits1.concatUnique($fruits2, $fruits2)   Returns ["Apples", "Oranges", "Pears", "Plums"]
$fruits1.concatUnique("Pears")              Returns ["Apples", "Oranges", "Pears"]
$fruits1.concatUnique("Pears", "Pears")     Returns ["Apples", "Oranges", "Pears"]
$fruits1.concatUnique($fruits2, "Pears")    Returns ["Apples", "Oranges", "Pears", "Plums"]
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-count"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-count" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.count(needle [, position])</code>  <em>integer</em> </span></h3>
<p>Returns the number of times that the given member was found within the array, starting the search at <code>position</code>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>needle</code>:</strong> (<em>any</em>) The member to count.</li>
<li><strong><code>position</code>:</strong> (optional, <em>integer</em>) The zero-based index at which to begin searching for <code>needle</code>.  If omitted, will default to <code>0</code>.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $fruits = ["Apples", "Oranges", "Plums", "Oranges"]
$fruits.count("Oranges")      Returns 2
$fruits.count("Oranges", 2)   Returns 1
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-countwith"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-countwith" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.countWith(predicate [, thisArg])</code>  <em>integer</em> </span></h3>
<p>Returns the number of times that members within the array pass the test implemented by the given predicate function.</p>
<h4>History:</h4>
<ul>
<li><code>v2.36.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>predicate</code>:</strong> (<em>function</em>) The function used to test each member.  It is called with three arguments:
<ul>
<li><strong><code>value</code>:</strong> (<em>any</em>) The member being processed.</li>
<li><strong><code>index</code>:</strong> (optional, <em>integer</em>) The index of member being processed.</li>
<li><strong><code>array</code>:</strong> (optional, <em>array</em>) The array being processed.</li>
</ul>
</li>
<li><strong><code>thisArg</code>:</strong> (optional, <em>any</em>) The value to use as <code>this</code> when executing <code>predicate</code>.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $fruits = ["Apples", "Oranges", "Plums", "Oranges"]
$fruits.countWith(function (fruit) { return fruit === "Oranges"; })   Returns 2
</code></pre>
<pre><code>// Given: $numbers = [1, 2.3, 4, 76, 3.1]
$numbers.countWith(Number.isInteger)   Returns 3
</code></pre>
<pre><code>// Given: $items = [
// 	{ name : 'Healing potion', kind : 'potion' },
// 	{ name : 'Longsword', kind : 'weapon' },
// 	{ name : 'Mana potion', kind : 'potion' },
// 	{ name : 'Dead rat', kind : 'junk' },
// 	{ name : 'Endurance potion', kind : 'potion' },
// 	{ name : 'Shortbow', kind : 'weapon' }
// ]
$items.countWith(function (item) { return item.kind === 'junk'; })   Returns 1
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-delete"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-delete" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.delete(needles)</code>  <em>Array&lt;any&gt;</em> </span></h3>
<p>Removes all instances of the given members from the array and returns a new array containing the removed members.</p>
<h4>History:</h4>
<ul>
<li><code>v2.5.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>needles</code>:</strong> (<em>any</em> | <em>Array&lt;any&gt;</em>) The members to remove.  May be a list of members or an array.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $fruits = ["Apples", "Oranges", "Plums", "Oranges"]
$fruits.delete("Oranges")           Returns ["Oranges", "Oranges"]; $fruits ["Apples", "Plums"]
$fruits.delete("Apples", "Plums")   Returns ["Apples", "Plums"]; $fruits ["Oranges", "Oranges"]
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-deleteat"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-deleteat" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.deleteAt(indices)</code>  <em>Array&lt;any&gt;</em> </span></h3>
<p>Removes all of the members at the given indices from the array and returns a new array containing the removed members.</p>
<h4>History:</h4>
<ul>
<li><code>v2.5.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>indices</code>:</strong> (<em>integer</em> | <em>Array&lt;integer&gt;</em>) The indices of the members to remove.  May be a list or array of indices.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $fruits = ["Apples", "Oranges", "Plums", "Oranges"]
$fruits.deleteAt(2)      Returns ["Plums"]; $fruits ["Apples", "Oranges", "Oranges"]
$fruits.deleteAt(1, 3)   Returns ["Oranges", "Oranges"]; $fruits ["Apples", "Plums"]
$fruits.deleteAt(0, 2)   Returns ["Apples", "Plums"]; $fruits ["Oranges", "Oranges"]
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-deletewith"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-deletewith" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.deleteWith(predicate [, thisArg])</code>  <em>Array&lt;any&gt;</em> </span></h3>
<p>Removes all of the members from the array that pass the test implemented by the given predicate function and returns a new array containing the removed members.</p>
<h4>History:</h4>
<ul>
<li><code>v2.25.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>predicate</code>:</strong> (<em>function</em>) The function used to test each member.  It is called with three arguments:
<ul>
<li><strong><code>value</code>:</strong> (<em>any</em>) The member being processed.</li>
<li><strong><code>index</code>:</strong> (optional, <em>integer</em>) The index of member being processed.</li>
<li><strong><code>array</code>:</strong> (optional, <em>array</em>) The array being processed.</li>
</ul>
</li>
<li><strong><code>thisArg</code>:</strong> (optional, <em>any</em>) The value to use as <code>this</code> when executing <code>predicate</code>.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $fruits = ["Apples", "Apricots", "Oranges"]

 Returns ["Apricots"]; $fruits ["Apples", "Oranges"]
$fruits.deleteWith(function (val) {
	return val === "Apricots";
})

 Returns ["Apples", "Apricots"]; $fruits ["Oranges"]
$fruits.deleteWith(function (val) {
	return val.startsWith("Ap");
})

// Given: $fruits = [{ name : "Apples" }, { name : "Apricots" }, { name : "Oranges" }]

 Returns [{ name : "Apricots" }]; $fruits [{ name : "Apples" }, { name : "Oranges" }]
$fruits.deleteWith(function (val) {
	return val.name === "Apricots";
})

 Returns [{ name : "Apples" }, { name : "Apricots" }]; $fruits [{ name : "Oranges" }]
$fruits.deleteWith(function (val) {
	return val.name.startsWith("Ap");
})
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-first"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-first" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.first()</code>  <em>any</em> </span></h3>
<p>Returns the first member from the array.  Does not modify the original.</p>
<h4>History:</h4>
<ul>
<li><code>v2.27.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Given: $pies = ["Blueberry", "Cherry", "Cream", "Pecan", "Pumpkin"]
$pies.first()   Returns "Blueberry"
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-flat"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-flat" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.flat(depth)</code>  <em>Array&lt;any&gt;</em> </span></h3>
<p>Returns a new array consisting of the source array with all sub-array elements concatenated into it recursively up to the given depth.  Does not modify the original.</p>
<h4>History: <em>native JavaScript method</em></h4>
<h4>Parameters:</h4>
<ul>
<li><strong><code>depth</code>:</strong> (optional, <em>integer</em>) The number of nested array levels should be flattened.  If omitted, will default to <code>1</code>.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $npa = [["Alfa", "Bravo"], [["Charlie", "Delta"], ["Echo"]], "Foxtrot"]

$npa.flat()    Returns ["Alfa", "Bravo", ["Charlie", "Delta"], ["Echo"], "Foxtrot"]
$npa.flat(1)   Returns ["Alfa", "Bravo", ["Charlie", "Delta"], ["Echo"], "Foxtrot"]
$npa.flat(2)   Returns ["Alfa", "Bravo", "Charlie", "Delta", "Echo", "Foxtrot"]
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-flatmap"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-flatmap" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.flatMap(callback [, thisArg])</code>  <em>Array&lt;any&gt;</em> </span></h3>
<p>Returns a new array consisting of the result of calling the given mapping function on every element in the source array and then concatenating all sub-array elements into it recursively up to a depth of <code>1</code>.  Does not modify the original.</p>
<p role="note"><b>Note:</b>
Identical to calling <code>&lt;Array&gt;.map().flat()</code>.
</p>
<h4>History: <em>native JavaScript method</em></h4>
<h4>Parameters:</h4>
<ul>
<li><strong><code>callback</code>:</strong> (<em>function</em>) The function used to produce members of the new array.  It is called with three arguments:
<ul>
<li><strong><code>value</code>:</strong> (<em>any</em>) The member being processed.</li>
<li><strong><code>index</code>:</strong> (optional, <em>integer</em>) The index of member being processed.</li>
<li><strong><code>array</code>:</strong> (optional, <em>array</em>) The array being processed.</li>
</ul>
</li>
<li><strong><code>thisArg</code>:</strong> (optional, <em>any</em>) The value to use as <code>this</code> when executing <code>callback</code>.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $npa = ["Alfa", "Bravo Charlie", "Delta Echo Foxtrot"]

 Returns ["Alfa", "Bravo", "Charlie", "Delta", "Echo", "Foxtrot"]
$npa.flatMap(function (val) {
	return val.split(" ");
})
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-includes"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-includes" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.includes(needle [, position])</code>  <em>boolean</em> </span></h3>
<p>Returns whether the given member was found within the array, starting the search at <code>position</code>.</p>
<h4>History: <em>native JavaScript method</em></h4>
<h4>Parameters:</h4>
<ul>
<li><strong><code>needle</code>:</strong> (<em>any</em>) The member to find.</li>
<li><strong><code>position</code>:</strong> (optional, <em>integer</em>) The zero-based index at which to begin searching for <code>needle</code>.  If omitted, will default to <code>0</code>.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $pies = ["Blueberry", "Cherry", "Cream", "Pecan", "Pumpkin"]
&lt;&lt;if $pies.includes("Cherry")&gt;&gt;found Cherry pie&lt;&lt;/if&gt;&gt;
&lt;&lt;if $pies.includes("Pecan", 3)&gt;&gt;found Pecan pie within ["Pecan", "Pumpkin"]&lt;&lt;/if&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-includesall"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-includesall" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.includesAll(needles)</code>  <em>boolean</em> </span></h3>
<p>Returns whether all of the given members were found within the array.</p>
<h4>History:</h4>
<ul>
<li><code>v2.10.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>needles</code>:</strong> (<em>any</em> | <em>Array&lt;any&gt;</em>) The members to find.  May be a list of members or an array.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $pies = ["Blueberry", "Cherry", "Cream", "Pecan", "Pumpkin"]
&lt;&lt;if $pies.includesAll("Cherry", "Pecan")&gt;&gt;found Cherry and Pecan pies&lt;&lt;/if&gt;&gt;

// Given: $search = ["Blueberry", "Pumpkin"]
&lt;&lt;if $pies.includesAll($search)&gt;&gt;found Blueberry and Pumpkin pies&lt;&lt;/if&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-includesany"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-includesany" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.includesAny(needles)</code>  <em>boolean</em> </span></h3>
<p>Returns whether any of the given members were found within the array.</p>
<h4>History:</h4>
<ul>
<li><code>v2.10.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>needles</code>:</strong> (<em>any</em> | <em>Array&lt;any&gt;</em>) The members to find.  May be a list of members or an array.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $pies = ["Blueberry", "Cherry", "Cream", "Pecan", "Pumpkin"]
&lt;&lt;if $pies.includesAny("Cherry", "Pecan")&gt;&gt;found Cherry or Pecan pie&lt;&lt;/if&gt;&gt;

// Given: $search = ["Blueberry", "Pumpkin"]
&lt;&lt;if $pies.includesAny($search)&gt;&gt;found Blueberry or Pumpkin pie&lt;&lt;/if&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-last"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-last" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.last()</code>  <em>any</em> </span></h3>
<p>Returns the last member from the array.  Does not modify the original.</p>
<h4>History:</h4>
<ul>
<li><code>v2.27.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Given: $pies = ["Blueberry", "Cherry", "Cream", "Pecan", "Pumpkin"]
$pies.last()   Returns "Pumpkin"
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-pluck"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-pluck" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.pluck()</code>  <em>any</em> </span></h3>
<p>Removes and returns a random member from the base array.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Given: $pies = ["Blueberry", "Cherry", "Cream", "Pecan", "Pumpkin"]
$pies.pluck()   Removes and returns a random pie from the array
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-pluckmany"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-pluckmany" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.pluckMany(want)</code>  <em>Array&lt;any&gt;</em> </span></h3>
<p>Randomly removes the given number of members from the base array and returns the removed members as a new array.</p>
<h4>History:</h4>
<ul>
<li><code>v2.20.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>want</code>:</strong> (optional, <em>integer</em>) The number of members to pluck.  Cannot pluck more members than the base array contains.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $pies = ["Blueberry", "Cherry", "Cream", "Pecan", "Pumpkin"]
$pies.pluckMany(3)   Removes three random pies from the array and returns them as a new array
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-pop"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-pop" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.pop()</code>  <em>any</em> </span></h3>
<p>Removes and returns the last member from the array, or <code>undefined</code> if the array is empty.</p>
<h4>History: <em>native JavaScript method</em></h4>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Given: $fruits = ["Apples", "Oranges", "Pears"]
$fruits.pop()   Returns "Pears"; $fruits ["Apples", "Oranges"]
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-push"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-push" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.push(members)</code>  <em>number</em> </span></h3>
<p>Appends one or more members to the end of the base array and returns its new length.</p>
<h4>History: <em>native JavaScript method</em></h4>
<h4>Parameters:</h4>
<ul>
<li><strong><code>members</code>:</strong> (<em>any</em>) The members to append.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $fruits = ["Apples", "Oranges"]
$fruits.push("Apples")   Returns 3; $fruits ["Apples", "Oranges", "Apples"]

// Given: $fruits = ["Apples", "Oranges"]
$fruits.push("Plums", "Plums")   Returns 4; $fruits ["Apples", "Oranges", "Plums", "Plums"]
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-pushunique"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-pushunique" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.pushUnique(members)</code>  <em>number</em> </span></h3>
<p>Appends one or more unique members to the end of the base array and returns its new length.</p>
<h4>History:</h4>
<ul>
<li><code>v2.21.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>members</code>:</strong> (<em>any</em>) The members to append.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $fruits = ["Apples", "Oranges"]
$fruits.pushUnique("Apples")   Returns 2; $fruits ["Apples", "Oranges"]

// Given: $fruits = ["Apples", "Oranges"]
$fruits.pushUnique("Plums", "Plums")   Returns 3; $fruits ["Apples", "Oranges", "Plums"]
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-random"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-random" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.random()</code>  <em>any</em> </span></h3>
<p>Returns a random member from the base array.  Does not modify the original.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Given: $pies = ["Blueberry", "Cherry", "Cream", "Pecan", "Pumpkin"]
$pies.random()   Returns a random pie from the array
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-randommany"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-randommany" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.randomMany(want)</code>  <em>Array&lt;any&gt;</em> </span></h3>
<p>Randomly selects the given number of unique members from the base array and returns the selected members as a new array.  Does not modify the original.</p>
<h4>History:</h4>
<ul>
<li><code>v2.20.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>want</code>:</strong> (optional, <em>integer</em>) The number of members to select.  Cannot select more members than the base array contains.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $pies = ["Blueberry", "Cherry", "Cream", "Pecan", "Pumpkin"]
$pies.randomMany(3)   Returns a new array containing three unique random pies from the array
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-shift"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-shift" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.shift()</code>  <em>any</em> </span></h3>
<p>Removes and returns the first member from the array, or <code>undefined</code> if the array is empty.</p>
<h4>History: <em>native JavaScript method</em></h4>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Given: $fruits = ["Apples", "Oranges", "Pears"]
$fruits.shift()   Returns "Apples"; $fruits ["Oranges", "Pears"]
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-shuffle"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-shuffle" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.shuffle()</code>  <em>Array&lt;any&gt;</em> </span></h3>
<p>Randomly shuffles the array.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Given: $pies = ["Blueberry", "Cherry", "Cream", "Pecan", "Pumpkin"]
$pies.shuffle()   Randomizes the order of the pies in the array
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-unshift"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-unshift" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.unshift(members)</code>  <em>number</em> </span></h3>
<p>Prepends one or more members to the beginning of the base array and returns its new length.</p>
<h4>History: <em>native JavaScript method</em></h4>
<h4>Parameters:</h4>
<ul>
<li><strong><code>members</code>:</strong> (<em>any</em>) The members to append.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $fruits = ["Oranges", "Plums"]
$fruits.unshift("Oranges")   Returns 3; $fruits ["Oranges", "Oranges", "Plums"]

// Given: $fruits = ["Oranges", "Plums"]
$fruits.unshift("Apples", "Apples")   Returns 4; $fruits ["Apples", "Apples", "Oranges", "Plums"]
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-unshiftunique"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-unshiftunique" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Array&gt;.unshiftUnique(members)</code>  <em>number</em> </span></h3>
<p>Prepends one or more unique members to the beginning of the base array and returns its new length.</p>
<h4>History:</h4>
<ul>
<li><code>v2.21.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>members</code>:</strong> (<em>any</em>) The members to append.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $fruits = ["Oranges", "Plums"]
$fruits.unshiftUnique("Oranges")   Returns 2; $fruits ["Oranges", "Plums"]

// Given: $fruits = ["Oranges", "Plums"]
$fruits.unshiftUnique("Apples", "Apples")   Returns 3; $fruits ["Apples", "Oranges", "Plums"]
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-contains"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-contains" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>&lt;Array&gt;.contains(needle [, position])</code>  <em>boolean</em></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This method has been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-includes"><code>&lt;Array&gt;.includes()</code></a> method for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.10.0</code>: Deprecated in favor of <code>&lt;Array&gt;.includes()</code>.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-containsall"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-containsall" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>&lt;Array&gt;.containsAll(needles)</code>  <em>boolean</em></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This method has been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-includesall"><code>&lt;Array&gt;.includesAll()</code></a> method for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.10.0</code>: Deprecated in favor of <code>&lt;Array&gt;.includesAll()</code>.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-containsany"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-containsany" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>&lt;Array&gt;.containsAny(needles)</code>  <em>boolean</em></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This method has been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-includesany"><code>&lt;Array&gt;.includesAny()</code></a> method for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.10.0</code>: Deprecated in favor of <code>&lt;Array&gt;.includesAny()</code>.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="methods-array-prototype-method-flatten"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-flatten" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>&lt;Array&gt;.flatten()</code>  <em>Array&lt;any&gt;</em></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This method has been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-flat"><code>&lt;Array&gt;.flat()</code></a> method for its replacement.  The exactly equivalent call is: <code>&lt;Array&gt;.flat(Infinity)</code>.
</p>
<p>Returns a new array consisting of the flattened source array.  Does not modify the original.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Deprecated in favor of <code>&lt;Array&gt;.flat()</code>.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="methods-array-method-random"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-method-random" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>Array.random(array)</code>  <em>any</em></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This method has been deprecated and should no longer be used.  In general, look to the <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-random"><code>&lt;Array&gt;.random()</code></a> method instead.  If you need a random member from an array-like object, use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from"><code>Array.from()</code></a> method to convert it to an array, then use <code>&lt;Array&gt;.random()</code>.
</p>
<p>Returns a random member from the array or array-like object.  Does not modify the original.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.20.0</code>: Deprecated.</li>
</ul>
<!-- ***************************************************************************
	JSON
**************************************************************************** -->
<h2 id="methods-json"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-json" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>JSON Methods </span></h2>
<!-- *********************************************************************** -->
<h3 id="methods-json-method-revivewrapper"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-json-method-revivewrapper" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>JSON.reviveWrapper(codeString [, reviveData])</code>  <em>array</em> </span></h3>
<p>Returns the given code string, and optional data chunk, wrapped within the JSON deserialization revive wrapper.  Intended to allow authors to easily wrap their custom object types (a.k.a. classes) revival code and associated data within the revive wrapper, which should be returned from an object instance's <code>.toJSON()</code> method, so that the instance may be properly revived upon deserialization.</p>
<p role="note" class="see"><b>See:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-tips-non-generic-object-types"><em>Non-generic object types (a.k.a. classes)</em> guide</a> for more detailed information.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.9.0</code>: Added <code>reviveData</code> parameter.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>codeString</code>:</strong> (<em>string</em>) The revival code string to wrap.</li>
<li><strong><code>reviveData</code>:</strong> (optional, <em>any</em>) The data that should be made available to the evaluated revival code during deserialization via the special <code>$ReviveData$</code> variable.  <strong>WARNING:</strong> Attempting to pass the value of an object instance's <code>this</code> directly as the <code>reviveData</code> parameter will trigger out of control recursion in the serializer, so a clone of the instance's own data must be passed instead.</li>
</ul>
<h4>Examples:</h4>
<pre><code>JSON.reviveWrapper( /* valid JavaScript code string */ );              Without data chunk
JSON.reviveWrapper( /* valid JavaScript code string */ , myOwnData);   With data chunk

// E.g., Assume that you're attempting to revive an instance of a custom class named
//       `Character`, which is assigned to a story variable named `$pc`.  The call
//       to `JSON.reviveWrapper()` might look something like the following.
var ownData = {};
Object.keys(this).forEach(function (pn) { ownData[pn] = clone(this[pn]); }, this);
return JSON.reviveWrapper('new Character($ReviveData$)', ownData);
</code></pre>
<!-- ***************************************************************************
	jQuery
**************************************************************************** -->
<h2 id="methods-jquery"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>jQuery Methods </span></h2>
<!-- *********************************************************************** -->
<h3 id="methods-jquery-prototype-method-ariaclick"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery-prototype-method-ariaclick" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;jQuery&gt;.ariaClick([options ,] handler)</code>  <em><code>jQuery</code> object</em> </span></h3>
<p>Makes the target element(s) WAI-ARIA-compatible clickablesmeaning that various accessibility attributes are set and, in addition to mouse clicks, enter/return and spacebar key presses also activate them.  Returns a reference to the current <code>jQuery</code> object for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>options</code>:</strong> (optional, <em>object</em>) The options to be used when creating the clickables.</li>
<li><strong><code>handler</code>:</strong> (<em>function</em>) The callback to invoke when the target element(s) are activated.</li>
</ul>
<h4>Options object:</h4>
<p>An options object should have some of the following properties:</p>
<ul>
<li><strong><code>namespace</code>:</strong> (<em>string</em>) A period-separated list of event namespaces.</li>
<li><strong><code>one</code>:</strong> (<em>boolean</em>) Whether the clickables are single-usei.e., the handler callback runs only once and then removes itself.  If omitted, defaults to <code>false</code>.</li>
<li><strong><code>selector</code>:</strong> (<em>string</em>) A selector applied to the target element(s) to filter the descendants that triggered the event. If omitted or <code>null</code>, the event is always handled when it reaches the target element(s).</li>
<li><strong><code>data</code>:</strong> (<em>any</em>) Data to be passed to the handler in <a href="http://api.jquery.com/event.data/"><code>event.data</code></a> when an event is triggered.</li>
<li><strong><code>controls</code>:</strong> (<em>string</em>) Value for the <code>aria-controls</code> attribute.</li>
<li><strong><code>pressed</code>:</strong> (<em>string</em>) Value for the <code>aria-pressed</code> attribute (valid values: <code>"true"</code>, <code>"false"</code>).</li>
<li><strong><code>label</code>:</strong> (<em>string</em>) Value for the <code>aria-label</code> and <code>title</code> attributes.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given an existing element: &lt;a id="so-clicky"&gt;Click me&lt;/a&gt;
$('#so-clicky').ariaClick(function (event) {
	/* do stuff */
});

// Creates a basic link and appends it to the `output` element
$('&lt;a&gt;Click me&lt;/a&gt;')
	.ariaClick(function (event) {
		/* do stuff */
	})
	.appendTo(output);

// Creates a basic button and appends it to the `output` element
$('&lt;button&gt;Click me&lt;/button&gt;')
	.ariaClick(function (event) {
		/* do stuff */
	})
	.appendTo(output);

// Creates a link with options and appends it to the `output` element
$('&lt;a&gt;Click me&lt;/a&gt;')
	.ariaClick({
		one   : true,
		label : 'This single-use link does stuff.'
	}, function (event) {
		/* do stuff */
	})
	.appendTo(output);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-jquery-prototype-method-ariadisabled"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery-prototype-method-ariadisabled" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;jQuery&gt;.ariaDisabled(state)</code>  <em><code>jQuery</code> object</em> </span></h3>
<p>Changes the disabled state of the target WAI-ARIA-compatible clickable element(s).  Returns a reference to the current <code>jQuery</code> object for chaining.</p>
<p role="note"><b>Note:</b>
This method is meant to work with clickables created via <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery-prototype-method-ariaclick"><code>&lt;jQuery&gt;.ariaClick()</code></a> and may not work with clickables from other sources.  SugarCube uses <code>&lt;jQuery&gt;.ariaClick()</code> internally to handle all of its various link markup and macros.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.26.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>state</code>:</strong> (<em>boolean</em>) The disabled state to apply.  Truthy to disable the element(s), falsy to enable them.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given an existing WAI-ARIA-compatible clickable element with the ID "so-clicky"
$('#so-clicky').ariaDisabled(true)    Disables the target element
$('#so-clicky').ariaDisabled(false)   Enables the target element
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-jquery-prototype-method-ariaisdisabled"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery-prototype-method-ariaisdisabled" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;jQuery&gt;.ariaIsDisabled()</code>  <em><code>boolean</code></em> </span></h3>
<p>Returns whether any of the target WAI-ARIA-compatible clickable element(s) are disabled.</p>
<p role="note"><b>Note:</b>
This method is meant to work with clickables created via <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery-prototype-method-ariaclick"><code>&lt;jQuery&gt;.ariaClick()</code></a> and may not work with clickables from other sources.  SugarCube uses <code>&lt;jQuery&gt;.ariaClick()</code> internally to handle all of its various link markup and macros.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.26.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Given an existing WAI-ARIA-compatible clickable element with the ID "so-clicky"

// If "#so-clicky" is disabled:
$('#so-clicky').ariaIsDisabled()   Returns true

// If "#so-clicky" is enabled:
$('#so-clicky').ariaIsDisabled()   Returns false
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-jquery-method-wiki"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery-method-wiki" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>jQuery.wiki(sources)</code> </span></h3>
<p>Wikifies the given content source(s) and discards the result.  If there were errors, an exception is thrown.  This is only really useful when you want to invoke a macro for its side-effects and aren't interested in its output.</p>
<h4>History:</h4>
<ul>
<li><code>v2.17.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>sources</code>:</strong> (<em>string</em>) The list of content sources.</li>
</ul>
<h4>Examples:</h4>
<pre><code>$.wiki('&lt;&lt;somemacro&gt;&gt;');   Invokes the &lt;&lt;somemacro&gt;&gt; macro, discarding any output
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-jquery-prototype-method-wiki"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery-prototype-method-wiki" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;jQuery&gt;.wiki(sources)</code>  <em><code>jQuery</code> object</em> </span></h3>
<p>Wikifies the given content source(s) and appends the result to the target element(s).  Returns a reference to the current <code>jQuery</code> object for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>sources</code>:</strong> (<em>string</em>) The list of content sources.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given an element: &lt;div id="the-box"&gt;&lt;/div&gt;
$('#the-box').wiki('Who //are// you?');   Appends "Who &lt;em&gt;are&lt;/em&gt; you?" to the target element
</code></pre>
<!-- ***************************************************************************
	Math
**************************************************************************** -->
<h2 id="methods-math"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-math" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Math Methods </span></h2>
<!-- *********************************************************************** -->
<h3 id="methods-math-method-clamp"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-math-method-clamp" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Math.clamp(num , min , max)</code>  <em>number</em> </span></h3>
<p>Returns the given number clamped to the specified bounds.  Does not modify the original.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>num</code>:</strong> (<em>number</em>) The number to clamp.  May be an actual number or a numerical string.</li>
<li><strong><code>min</code>:</strong> (<em>number</em>) The lower bound of the number.</li>
<li><strong><code>max</code>:</strong> (<em>number</em>) The upper bound of the number.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Math.clamp($stat, 0, 200)   Clamps $stat to the bounds 0200 and returns the new value
Math.clamp($stat, 1, 6.6)   Clamps $stat to the bounds 16.6 and returns the new value
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-math-method-trunc"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-math-method-trunc" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Math.trunc(num)</code>  <em>integer</em> </span></h3>
<p>Returns the whole (integer) part of the given number by removing its fractional part, if any.  Does not modify the original.</p>
<h4>History: <em>native JavaScript method</em></h4>
<h4>Parameters:</h4>
<ul>
<li><strong><code>num</code>:</strong> (<em>number</em>) The number to truncate to an integer.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Math.trunc(12.7)    Returns 12
Math.trunc(-12.7)   Returns -12
</code></pre>
<!-- ***************************************************************************
	Number
**************************************************************************** -->
<h2 id="methods-number"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-number" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Number Methods </span></h2>
<!-- *********************************************************************** -->
<h3 id="methods-number-prototype-method-clamp"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-number-prototype-method-clamp" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Number&gt;.clamp(min , max)</code>  <em>number</em> </span></h3>
<p>Returns the number clamped to the specified bounds.  Does not modify the original.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>min</code>:</strong> (<em>number</em>) The lower bound of the number.</li>
<li><strong><code>max</code>:</strong> (<em>number</em>) The upper bound of the number.</li>
</ul>
<h4>Examples:</h4>
<pre><code>$stat.clamp(0, 200)   Clamps $stat to the bounds 0200 and returns the new value
$stat.clamp(1, 6.6)   Clamps $stat to the bounds 16.6 and returns the new value
</code></pre>
<!-- ***************************************************************************
	RegExp
**************************************************************************** -->
<h2 id="methods-regexp"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-regexp" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>RegExp Methods </span></h2>
<!-- *********************************************************************** -->
<h3 id="methods-regexp-method-escape"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-regexp-method-escape" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>RegExp.escape(text)</code>  <em>string</em> </span></h3>
<p>Returns the given string with all regular expression metacharacters escaped.  Does not modify the original.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>text</code>:</strong> (<em>string</em>) The string to escape.</li>
</ul>
<h4>Examples:</h4>
<pre><code>RegExp.escape('That will be $5 (cash only)')    Returns 'That will be \$5 \(cash only\)'
</code></pre>
<!-- ***************************************************************************
	String
**************************************************************************** -->
<h2 id="methods-string"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>String Methods </span></h2>
<p><span id="methods-string-note"></span></p>
<p role="note"><b>Note:</b>
Strings in TwineScript/JavaScript are Unicode, however, due to historic reasons they are comprised of, and indexed by, individual UTF-16 code units rather than code points.  This means that some code points may span multiple code unitse.g., the emoji  is one code point, but two code units.
</p>
<!-- *********************************************************************** -->
<h3 id="methods-string-prototype-method-count"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-prototype-method-count" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;String&gt;.count(needle [, position])</code>  <em>integer</em> </span></h3>
<p>Returns the number of times that the given substring was found within the string, starting the search at <code>position</code>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>needle</code>:</strong> (<em>any</em>) The substring to count.</li>
<li><strong><code>position</code>:</strong> (optional, <em>integer</em>) The zero-based index at which to begin searching for <code>needle</code>.  If omitted, will default to <code>0</code>.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $text = "How now, brown cow."
$text.count("ow")      Returns 4
$text.count("ow", 8)   Returns 2
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-string-prototype-method-first"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-prototype-method-first" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;String&gt;.first()</code>  <em>string</em> </span></h3>
<p>Returns the first Unicode code point within the string.  Does not modify the original.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-note">String methods note</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.27.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Given: $text = "abc"
$text.first()   Returns "a"

// Given: $text = ""
$text.first()   Returns ""
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-string-method-format"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-method-format" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>String.format(format , arguments)</code>  <em>string</em> </span></h3>
<p>Returns a formatted string, after replacing each format item in the given format string with the text equivalent of the corresponding argument's value.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>format</code>:</strong> (<em>string</em>) The format string, which consists of normal text and format items.</li>
<li><strong><code>arguments</code>:</strong> (<em>any</em> | <em>Array&lt;any&gt;</em>) Either a list of arguments, which correspond by-index to the format items within the format string, or an array, whose members correspond by-index.</li>
</ul>
<h4>Format items:</h4>
<p>A format item has the syntax <code>{index[,alignment]}</code>, square-brackets denoting optional elements.</p>
<ul>
<li><strong><code>index</code>:</strong> (<em>integer</em>) The (zero-based) index of the argument whose string representation will replace the format item.</li>
<li><strong><code>alignment</code>:</strong> (optional, <em>integer</em>) The total length of the field into which the argument is inserted, and whether it's right- or left-aligned (positive aligns right, negative aligns left).</li>
</ul>
<h4>Examples:</h4>
<pre><code>String.format("{0}, {1}!", "Hello", "World")       List of arguments; Returns "Hello, World!"
String.format("{0}, {1}!", [ "Hello", "World" ])   Array argument; Returns "Hello, World!"
String.format("{0,6}", "foo")                      Returns "   foo"
String.format("{0,-6}", "foo")                     Returns "foo   "
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-string-prototype-method-includes"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-prototype-method-includes" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;String&gt;.includes(needle [, position])</code>  <em>boolean</em> </span></h3>
<p>Returns whether the given substring was found within the string, starting the search at <code>position</code>.</p>
<h4>History: <em>native JavaScript method</em></h4>
<h4>Parameters:</h4>
<ul>
<li><strong><code>needle</code>:</strong> (<em>any</em>) The substring to find.</li>
<li><strong><code>position</code>:</strong> (optional, <em>integer</em>) The zero-based index at which to begin searching for <code>needle</code>.  If omitted, will default to <code>0</code>.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: $text = "How now, brown cow."
$text.includes("row")       Returns true
$text.includes("row", 14)   Returns false
$text.includes("cow", 14)   Returns true
$text.includes("pow")       Returns false
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-string-prototype-method-last"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-prototype-method-last" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;String&gt;.last()</code>  <em>string</em> </span></h3>
<p>Returns the last Unicode code point within the string.  Does not modify the original.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-note">String methods note</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.27.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Given: $text = "abc"
$text.last()   Returns "c"

// Given: $text = ""
$text.last()   Returns ""
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-string-prototype-method-tolocaleupperfirst"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-prototype-method-tolocaleupperfirst" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;String&gt;.toLocaleUpperFirst()</code>  <em>string</em> </span></h3>
<p>Returns the string with its first Unicode code point converted to upper case, according to any locale-specific rules.  Does not modify the original.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-note">String methods note</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.9.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Using the Turkish (Trke) locale and given: $text = "k"
$text.toLocaleUpperFirst()   Returns "Ik"

// Using the Turkish (Trke) locale and given: $text = "iki"
$text.toLocaleUpperFirst()   Returns "ki"
</code></pre>
<!-- *********************************************************************** -->
<h3 id="methods-string-prototype-method-toupperfirst"><a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-prototype-method-toupperfirst" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;String&gt;.toUpperFirst()</code>  <em>string</em> </span></h3>
<p>Returns the string with its first Unicode code point converted to upper case.  Does not modify the original.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#methods-string-note">String methods note</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.9.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Given: $text = "hello."
$text.toUpperFirst()   Returns "Hello."

// Given: $text = "."
$text.toUpperFirst()   Returns "."
</code></pre>

<!-- ***********************************************************************************************
	Special Names
************************************************************************************************ -->
<h1 id="special-names"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-names" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Special Names </span></h1>
<p>Passage, tag, and variable names that have special meaning to SugarCube.</p>
<h4 id="special-names-warning"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-names-warning" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Warning </span></h4>
<ol>
<li>All special names listed herein are case sensitive, so their spelling and capitalization must be <em><strong>exactly</strong></em> as shown.</li>
<li><em><strong>Never</strong></em> combine special passages with special tags.  By doing so, you will probably break things in subtle and hard to detect ways.</li>
</ol>
<!-- ***************************************************************************
	Special Passages
**************************************************************************** -->
<h2 id="special-passages"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passages" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Passage Names </span></h2>
<!-- *********************************************************************** -->
<h3 id="special-passage-passagedone"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-passagedone" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>PassageDone</code> </span></h3>
<p>Used for post-passage-display tasks, like redoing dynamic changes (happens after the rendering and display of each passage).  Generates no output.</p>
<p>Roughly equivalent to the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagedisplay"><code>:passagedisplay</code> event</a>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-passage-passagefooter"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-passagefooter" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>PassageFooter</code> </span></h3>
<p>Appended to each rendered passage.</p>
<p>Roughly equivalent to the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagerender"><code>:passagerender</code> event</a>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-passage-passageheader"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-passageheader" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>PassageHeader</code> </span></h3>
<p>Prepended to each rendered passage.</p>
<p>Roughly equivalent to the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagestart"><code>:passagestart</code> event</a>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-passage-passageready"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-passageready" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>PassageReady</code> </span></h3>
<p>Used for pre-passage-display tasks, like redoing dynamic changes (happens before the rendering of each passage).  Generates no output.</p>
<p>Roughly equivalent to the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagestart"><code>:passagestart</code> event</a>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-passage-start"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-start" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Start</code> </span></h3>
<p><strong>Twine&nbsp;2:</strong>  <em>Not special.</em>  Any passage may be chosen as the starting passage by selecting it via the <em>Start Story Here</em> passage context-menu itemn.b. older versions of Twine&nbsp;2 used a <i class="icon rocket" title="rocket ship" aria-label="rocket ship"></i> icon for the same purpose.</p>
<p><strong>Twine&nbsp;1/Twee:</strong>  <em>Required.</em>  The starting passage, the first passage displayed.  Configurable, see <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-start"><code>Config.passages.start</code></a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-passage-storyauthor"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyauthor" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>StoryAuthor</code> </span></h3>
<p>Used to populate the authorial byline area in the UI bar (element ID: <code>story-author</code>).</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-passage-storybanner"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storybanner" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>StoryBanner</code> </span></h3>
<p>Used to populate the story's banner area in the UI bar (element ID: <code>story-banner</code>).</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-passage-storycaption"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storycaption" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>StoryCaption</code> </span></h3>
<p>Used to populate the story's caption area in the UI bar (element ID: <code>story-caption</code>).  May also be, and often is, used to add additional story UI elements and content to the UI bar.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-passage-storydisplaytitle"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storydisplaytitle" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>StoryDisplayTitle</code> </span></h3>
<p>Sets the story's display title in the browser's titlebar and the UI bar (element ID: <code>story-title</code>).  If omitted, the story title will be used instead.</p>
<h4>History:</h4>
<ul>
<li><code>v2.31.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-passage-storyinit"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyinit" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>StoryInit</code> </span></h3>
<p>Used for pre-story-start initialization tasks, like variable initialization (happens at the beginning of story initialization).  Generates no output.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-passage-storyinterface"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyinterface" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>StoryInterface</code> </span></h3>
<p>Used to replace SugarCube's default UI.  Its contents are treated as raw HTML markupi.e., <em>none</em> of SugarCube's special HTML processing is performed.  It must contain, at least, an element with the ID <code>passages</code> that will be the main passage display area.</p>
<p>Additional elements, aside from the <code>#passages</code> element, may include either the <code>data-init-passage</code> or <code>data-passage</code> content attribute, whose value is the name of the passage used to populate the elementthe passage will be processed as normal, meaning that markup and macros will work as expected.  The <code>data-init-passage</code> attribute causes the element to be updated once at initialization, while the <code>data-passage</code> attribute causes the element to be updated upon each passage navigation.</p>
<p role="note" class="warning"><b>Warning:</b>
Elements that include either a <code>data-init-passage</code> or <code>data-passage</code> content attribute <em>should not</em> themselves contain additional elementssince such elements' contents are replaced each turn via their associated passage, any child elements would be lost.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.18.0</code>: Introduced.</li>
<li><code>v2.28.0</code>: Added processing of the <code>data-passage</code> content attribute.</li>
<li><code>v2.36.0</code>: Added processing of the <code>data-init-passage</code> content attribute.</li>
</ul>
<h4>Examples:</h4>
<h5>Minimal working example</h5>
<pre><code>&lt;div id="passages"&gt;&lt;/div&gt;
</code></pre>
<h5>With <code>data-init-passage</code> and <code>data-passage</code> content attributes</h5>
<pre><code>&lt;div id="interface"&gt;
	&lt;div id="menu" data-init-passage="Menu"&gt;&lt;/div&gt;
	&lt;div id="notifications" data-passage="Notifications"&gt;&lt;/div&gt;
	&lt;div id="passages"&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="special-passage-storymenu"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storymenu" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>StoryMenu</code> </span></h3>
<p>Used to populate the story's menu items in the UI bar (element ID: <code>menu-story</code>).</p>
<p role="note"><b>Note:</b>
The story menu only displays linksspecifically, anything that creates an anchor element (<code>&lt;a&gt;</code>).  While it renders content just as any other passage does, instead of displaying the rendered output as-is, it sifts through the output and builds its menu from the generated links contained therein.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>[[Inventory]]
&lt;&lt;link "Schedule"&gt;&gt;&lt;&lt;/link&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="special-passage-storysettings"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storysettings" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>StorySettings</code> </span></h3>
<p role="note" class="warning"><b>Warning:</b>
Unused by SugarCube.  The <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api"><code>Config</code> API</a> serves the same basic purpose.
</p>
<!-- *********************************************************************** -->
<h3 id="special-passage-storyshare"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyshare" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>StoryShare</code> </span></h3>
<p>Used to populate the contents of the Share dialog.  Intended for social media links.</p>
<p role="note"><b>Note:</b>
The Share dialog only displays linksspecifically, anything that creates an anchor element (<code>&lt;a&gt;</code>).  While it renders content just as any other passage does, instead of displaying the rendered output as-is, it sifts through the output and builds its contents from the generated links contained therein.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-passage-storysubtitle"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storysubtitle" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>StorySubtitle</code> </span></h3>
<p>Sets the story's subtitle in the UI bar (element ID: <code>story-subtitle</code>).</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-passage-storytitle"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storytitle" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>StoryTitle</code> </span></h3>
<p role="note" class="warning"><b>Warning:</b>
The story title is used to create the storage ID that is used to store all player data, both temporary and persistent.  It should be plain text, containing no code, markup, or macros of any kind.
</p>
<p role="note" class="tip"><b>Tip:</b>
If you want to set a title for display that contains code, markup, or macros, see the <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storydisplaytitle"><code>StoryDisplayTitle</code> special passage</a>.
</p>
<p><strong>Twine&nbsp;2:</strong>  <em>Unused.</em>  The story's title is part of the story project.</p>
<p><strong>Twine&nbsp;1/Twee:</strong>  <em>Required.</em>  Sets the story's title.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- ***************************************************************************
	Special Tags
**************************************************************************** -->
<h2 id="special-tags"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tags" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Tag Names </span></h2>
<!-- *********************************************************************** -->
<h3 id="special-tag-bookmark"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-bookmark" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>bookmark</code> </span></h3>
<p>Registers the passage into the <em>Jump To</em> menu.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-tag-nobr"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-nobr" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>nobr</code> </span></h3>
<p>Causes leading/trailing newlines to be removed and all remaining sequences of newlines to be replaced with single spaces before the passage is rendered.  Equivalent to wrapping the entire passage in a <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-nobr"><code>&lt;&lt;nobr&gt;&gt;</code> macro</a>.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-nobr"><code>Config.passages.nobr</code> setting</a> for a way to apply the same processing to all passages at once.</p>
<p role="note"><b>Note:</b>
Does not affect <code>script</code> or <code>stylesheet</code> tagged passages, for Twine&nbsp;1/Twee.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-tag-init"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-init" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>init</code> </span></h3>
<p>Registers the passage as an initialization passage.  Used for pre-story-start initialization tasks, like variable initialization (happens at the beginning of story initialization).  Generates no output.</p>
<p role="note"><b>Note:</b>
This is chiefly intended for use by add-ons/libraries.  For normal projects, authors are encouraged to continue to use the <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyinit"><code>StoryInit</code> special named passage</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.36.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-tag-script"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-script" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>script</code> </span></h3>
<p><strong>Twine&nbsp;2:</strong>  <em>Not special.</em>  Use the <em>Edit Story JavaScript</em> story editor menu item for scripts.</p>
<p><strong>Twine&nbsp;1/Twee:</strong>  Registers the passage as JavaScript code, which is executed during startup.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-tag-stylesheet"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-stylesheet" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>stylesheet</code> </span></h3>
<p><strong>Twine&nbsp;2:</strong>  <em>Not special.</em>  Use the <em>Edit Story Stylesheet</em> story editor menu item for styles.</p>
<p><strong>Twine&nbsp;1/Twee:</strong>  Registers the passage as a CSS stylesheet, which is loaded during startup.  It is <em><strong>strongly</strong></em> recommended that you use only one stylesheet passage.  Additionally, see the <a href="https://www.motoslave.net/sugarcube/2/docs/#css-warnings">tagged stylesheet warning</a>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-tag-twine-audio"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-twine-audio" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Twine.audio</code> </span></h3>
<p>Registers the passage as an audio passage.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-media-passages">Guide: Media Passages</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.24.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-tag-twine-image"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-twine-image" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Twine.image</code> </span></h3>
<p>Registers the passage as an image passage.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-media-passages">Guide: Media Passages</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-tag-twine-video"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-twine-video" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Twine.video</code> </span></h3>
<p>Registers the passage as a video passage.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-media-passages">Guide: Media Passages</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.24.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-tag-twine-vtt"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-twine-vtt" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Twine.vtt</code> </span></h3>
<p>Registers the passage as a <abbr title="Video Text Track">VTT</abbr> passage.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-media-passages">Guide: Media Passages</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.24.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-tag-widget"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-widget" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>widget</code> </span></h3>
<p>Registers the passage as <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-widget"><code>&lt;&lt;widget&gt;&gt;</code> macro</a> definitions, which are loaded during startup.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- ***************************************************************************
	Special Variables
**************************************************************************** -->
<h2 id="special-variables"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variables" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Variable Names </span></h2>
<!-- *********************************************************************** -->
<h3 id="special-variable-dollar"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-dollar" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>$</code> </span></h3>
<p>Alias for <code>jQuery</code>, by default.  <strong>NOTE:</strong> This should not be confused with <a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-variables">story variables</a>, which start with a <code>$</code>e.g., <code>$foo</code>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-underscore-args"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-underscore-args" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>_args</code> </span></h3>
<p>Widget arguments array (only inside widgets).  See <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-widget"><code>&lt;&lt;widget&gt;&gt;</code></a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.36.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-underscore-contents"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-underscore-contents" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>_contents</code> </span></h3>
<p>Widget contents string (only inside block widgets).  See <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-widget"><code>&lt;&lt;widget&gt;&gt;</code></a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.36.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-config"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-config" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config</code> </span></h3>
<p>Configuration API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api"><code>Config</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-dialog"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-dialog" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Dialog</code> </span></h3>
<p>Dialog API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api"><code>Dialog</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-engine"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-engine" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Engine</code> </span></h3>
<p>Engine API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api"><code>Engine</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-fullscreen"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-fullscreen" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Fullscreen</code> </span></h3>
<p>Fullscreen API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api"><code>Fullscreen</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.31.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-jquery"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-jquery" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>jQuery</code> </span></h3>
<p>jQuery library function.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-l10nstrings"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-l10nstrings" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>l10nStrings</code> </span></h3>
<p>Strings localization object.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-localization">Localization</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.10.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-loadscreen"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-loadscreen" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>LoadScreen</code> </span></h3>
<p>LoadScreen API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#loadscreen-api"><code>LoadScreen</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.15.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-macro"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-macro" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Macro</code> </span></h3>
<p>Macro API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api"><code>Macro</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-passage"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-passage" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Passage</code> </span></h3>
<p>Passage API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api"><code>Passage</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-save"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-save" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save</code> </span></h3>
<p>Save API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#save-api"><code>Save</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-setting"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-setting" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Setting</code> </span></h3>
<p>Setting API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api"><code>Setting</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-settings"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-settings" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>settings</code> </span></h3>
<p>Player settings object, set up by the author/developer.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api"><code>Setting</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-setup"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-setup" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>setup</code> </span></h3>
<p>Object that authors/developers may use to set up various bits of static data.  Generally, you would use this for data that does not change and should not be stored within story variables, which would make it part of the history.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-simpleaudio"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-simpleaudio" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio</code> </span></h3>
<p>SimpleAudio API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api"><code>SimpleAudio</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-state"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-state" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State</code> </span></h3>
<p>State API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api"><code>State</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-story"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-story" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Story</code> </span></h3>
<p>Story API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#story-api"><code>Story</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-template"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-template" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Template</code> </span></h3>
<p>Template API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#template-api"><code>Template</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-ui"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-ui" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UI</code> </span></h3>
<p>UI API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api"><code>UI</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-uibar"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-uibar" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UIBar</code> </span></h3>
<p>UIBar API.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api"><code>UIBar</code> API</a> for more information.</p>
<h4>History:</h4>
<ul>
<li><code>v2.17.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-dollar-args"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-dollar-args" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>$args</code> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
The <code>$args</code> special variable has been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-underscore-args"><code>_args</code> special variable</a> for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.36.0</code>: Deprecated.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-postdisplay"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-postdisplay" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>postdisplay</code></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
<code>postdisplay</code> tasks have been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagedisplay"><code>:passagedisplay</code> event</a> for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.31.0</code>: Deprecated.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-postrender"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-postrender" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>postrender</code></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
<code>postrender</code> tasks have been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagerender"><code>:passagerender</code> event</a> for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.31.0</code>: Deprecated.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-predisplay"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-predisplay" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>predisplay</code></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
<code>predisplay</code> tasks have been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagestart"><code>:passagestart</code> event</a> for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.31.0</code>: Deprecated.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-prehistory"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-prehistory" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>prehistory</code></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
<code>prehistory</code> tasks have been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passageinit"><code>:passageinit</code> event</a> for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.31.0</code>: Deprecated.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="special-variable-prerender"><a href="https://www.motoslave.net/sugarcube/2/docs/#special-variable-prerender" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>prerender</code></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
<code>prerender</code> tasks have been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagestart"><code>:passagestart</code> event</a> for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.31.0</code>: Deprecated.</li>
</ul>

<!-- ***********************************************************************************************
	CSS
************************************************************************************************ -->
<h1 id="css"><a href="https://www.motoslave.net/sugarcube/2/docs/#css" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><abbr title="Cascading Style Sheets">CSS</abbr> </span></h1>
<!-- ***************************************************************************
	Passage Conversions
**************************************************************************** -->
<h2 id="css-passage-conversions"><a href="https://www.motoslave.net/sugarcube/2/docs/#css-passage-conversions" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Passage Conversions </span></h2>
<p>IDs and classes automatically generated from passage names and tags are normalized to kebab case with all lowercase letterswhich entails: removing characters that are not alphanumerics, underscores, hyphens, en-/em-dashes, or whitespace, then replacing any remaining non-alphanumeric characters with hyphens, one per group, and finally converting the result to lowercase.</p>
<h3>Passage Names</h3>
<p>Passage names have <code>passage-</code> prepended to their converted forms and are converted both into IDs and classes depending on how the passage is usedan ID for the active passage, classes for included (via <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-include"><code>&lt;&lt;include&gt;&gt;</code></a>) passages.</p>
<p>For example, if the passage name was <code>Gone fishin'</code>, then:</p>
<ul>
<li>When the active passage, it would become the ID <code>passage-gone-fishin</code> (selector: <code>#passage-gone-fishin</code>).</li>
<li>When included, it would become the class <code>passage-gone-fishin</code> (selector: <code>.passage-gone-fishin</code>).</li>
</ul>
<h3>Passage Tags</h3>
<p>When displaying a passage, its tags are:</p>
<ol>
<li>Added to the active passage's container element, <code>&lt;html&gt;</code> element, and <code>&lt;body&gt;</code> element as a space separated list within the <code>data-tags</code> attribute.</li>
<li>Added to the active passage's container element and <code>&lt;body&gt;</code> element as classes.  The following special tags are excluded from this mapping:
 <table class="list-table">
 <tbody>
 	<tr>
 		<th>Twine&nbsp;2:</th>
 		<td><code>debug</code>, <code>nobr</code>, <code>passage</code>, <code>widget</code>, and any tag starting with <code>twine.</code></td>
 	</tr>
 	<tr>
 		<th>Twine&nbsp;1/Twee:</th>
 		<td><code>debug</code>, <code>nobr</code>, <code>passage</code>, <code>script</code>, <code>stylesheet</code>, <code>widget</code>, and any tag starting with <code>twine.</code></td>
 	</tr>
 </tbody>
 </table>
</li>
</ol>
<p>For example, if the tag name was <code>Sector_42</code>, then it would become both the <code>data-tags</code> attribute member <code>Sector_42</code> (selector: <code>[data-tags~="Sector_42"]</code>) and the class <code>sector-42</code> (selector: <code>.sector-42</code>).</p>
<!-- ***************************************************************************
	Example Selectors
**************************************************************************** -->
<h2 id="css-example-selectors"><a href="https://www.motoslave.net/sugarcube/2/docs/#css-example-selectors" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Example Selectors </span></h2>
<table>
<thead>
	<tr>
		<th>Selector</th>
		<th>Description</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td><code>html</code></td>
		<td>
			<p>The document element.  The default font stack is set here.</p>
			<p>The active passage's tags will be added to its <code>data-tags</code> attribute (see: <a href="https://www.motoslave.net/sugarcube/2/docs/#css-passage-conversions">Passage Conversions</a>).</p>
		</td>
	</tr>
	<tr>
		<td><code>body</code></td>
		<td>
			<p>The body of the page.  The default foreground and background colors are set here.</p>
			<p>The active passage's tags will be added to its <code>data-tags</code> attribute and classes (see: <a href="https://www.motoslave.net/sugarcube/2/docs/#css-passage-conversions">Passage Conversions</a>).</p>
		</td>
	</tr>
	<tr>
		<td><code>#story</code></td>
		<td>Selects the story element.</td>
	</tr>
	<tr>
		<td><code>#passages</code></td>
		<td>Selects the element that contains passage elements.  All created passage elements will be children of this element.</td>
	</tr>
	<tr>
		<td><code>.passage</code></td>
		<td>
			<p>Selects the passage element.  Normally, there will be only one such passage per turn, however, during passage navigation there may briefly be twothe incoming (a.k.a. active) and outgoing passages.</p>
			<p>The active passage's name will be added as its ID (see: <a href="https://www.motoslave.net/sugarcube/2/docs/#css-passage-conversions">Passage Conversions</a>).</p>
			<p>The active passage's tags will be added to its <code>data-tags</code> attribute and classes (see: <a href="https://www.motoslave.net/sugarcube/2/docs/#css-passage-conversions">Passage Conversions</a>).</p>
		</td>
	</tr>
	<tr>
		<td><code>.passage a</code></td>
		<td>Selects all <code>&lt;a&gt;</code> elements within the passage element.</td>
	</tr>
	<tr>
		<td><code>.passage a:hover</code></td>
		<td>Selects <code>&lt;a&gt;</code> elements within the passage element that are being hovered over.</td>
	</tr>
	<tr>
		<td><code>.passage a:active</code></td>
		<td>Selects <code>&lt;a&gt;</code> elements within the passage element that are being clicked on.</td>
	</tr>
	<tr>
		<td><code>.passage .link-broken</code></td>
		<td>Selects all internal link elements within the passage element whose passages do not exist within the story.</td>
	</tr>
	<tr>
		<td><code>.passage .link-disabled</code></td>
		<td>Selects all internal link elements within the passage element who have been disablede.g., already chosen <code>&lt;&lt;choice&gt;&gt;</code> macro links.</td>
	</tr>
	<tr>
		<td><code>.passage .link-external</code></td>
		<td>Selects all external link elements within the passage elemente.g., links to other pages and websites.</td>
	</tr>
	<tr>
		<td><code>.passage .link-internal</code></td>
		<td>Selects all internal link elements within the passage elemente.g., passage and macro links.</td>
	</tr>
	<tr>
		<td><code>.passage .link-visited<a href="https://www.motoslave.net/sugarcube/2/docs/#css-example-selectors-fn1">1</a></code></td>
		<td>Selects all internal link elements within the passage element whose passages are within the in-play story historyi.e., passages the player has been to before.</td>
	</tr>
	<tr>
		<td><code>.passage .link-internal:not(.link-visited)<a href="https://www.motoslave.net/sugarcube/2/docs/#css-example-selectors-fn1">1</a></code></td>
		<td>Selects all internal link elements within the passage element whose passages are not within the in-play story historyi.e., passages the player has never been to before.</td>
	</tr>
</tbody>
</table>
<ol class="note">
<li id="css-example-selectors-fn1">The <code>.link-visited</code> class is not enabled by default, see the <code>Config</code> API's <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-addvisitedlinkclass"><code>Config.addVisitedLinkClass</code></a> property for more information.</li>
</ol>
<!-- ***************************************************************************
	Warnings
**************************************************************************** -->
<h2 id="css-warnings"><a href="https://www.motoslave.net/sugarcube/2/docs/#css-warnings" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Warnings </span></h2>
<h3>Multiple Stylesheets <em>(for Twine&nbsp;1/Twee only)</em></h3>
<p>When using Twine&nbsp;1/Twee, it is <em><strong>strongly</strong></em> recommended that you use only a single <code>stylesheet</code> tagged passage.  CSS styles cascade in order of load, so if you use multiple <code>stylesheet</code> tagged passages, then it is all too easy for your styles to be loaded in the wrong order, since Twine&nbsp;1/Twee gives you no control over the order that multiple <code>stylesheet</code> tagged passages load.</p>
<h3>Tagged Stylesheets</h3>
<p>SugarCube does not support the Twine&nbsp;1.4+ vanilla story formats' tagged stylesheets.  In SugarCube, you would instead simply prefix the selectors of your styles with the appropriate tag-based selectorse.g., either <code>[data-tags~=""]</code> attribute selectors or class selectors.</p>
<p>For example, if some story passages were tagged with <code>forest</code>, then styles for those forest passages might look like this:</p>
<pre><code>/* Using [data-tags~=""] attribute selectors on &lt;html&gt; */
html[data-tags~="forest"] { background-image: url(forest-bg.jpg); }
html[data-tags~="forest"] .passage { color: darkgreen; }
html[data-tags~="forest"] a { color: green; }
html[data-tags~="forest"] a:hover { color: lime; }

/* Using [data-tags~=""] attribute selectors on &lt;body&gt; */
body[data-tags~="forest"] { background-image: url(forest-bg.jpg); }
body[data-tags~="forest"] .passage { color: darkgreen; }
body[data-tags~="forest"] a { color: green; }
body[data-tags~="forest"] a:hover { color: lime; }

/* Using class selectors on &lt;body&gt; */
body.forest { background-image: url(forest-bg.jpg); }
body.forest .passage { color: darkgreen; }
body.forest a { color: green; }
body.forest a:hover { color: lime; }
</code></pre>
<!-- ***************************************************************************
	Built-in Stylesheets
**************************************************************************** -->
<h2 id="css-built-ins"><a href="https://www.motoslave.net/sugarcube/2/docs/#css-built-ins" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Built-in Stylesheets </span></h2>
<p>These are SugarCube's built-in stylesheets, in order of load/cascade.  The most interesting of which, from an end-user's standpoint, are 410.  The links go to the most recent release versions of each in SugarCube's <a href="https://github.com/tmedwards/sugarcube-2">source code repository</a>.</p>
<ol>
<li><a href="https://raw.githubusercontent.com/tmedwards/sugarcube-2/master/src/vendor/normalize.css">normalize.css</a></li>
<li><a href="https://raw.githubusercontent.com/tmedwards/sugarcube-2/master/src/css/init-screen.css">init-screen.css</a></li>
<li><a href="https://raw.githubusercontent.com/tmedwards/sugarcube-2/master/src/css/font.css">font.css</a></li>
<li><a href="https://raw.githubusercontent.com/tmedwards/sugarcube-2/master/src/css/core.css">core.css</a></li>
<li><a href="https://raw.githubusercontent.com/tmedwards/sugarcube-2/master/src/css/core-display.css">core-display.css</a></li>
<li><a href="https://raw.githubusercontent.com/tmedwards/sugarcube-2/master/src/css/core-passage.css">core-passage.css</a></li>
<li><a href="https://raw.githubusercontent.com/tmedwards/sugarcube-2/master/src/css/core-macro.css">core-macro.css</a></li>
<li><a href="https://raw.githubusercontent.com/tmedwards/sugarcube-2/master/src/css/ui-dialog.css">ui-dialog.css</a></li>
<li><a href="https://raw.githubusercontent.com/tmedwards/sugarcube-2/master/src/css/ui.css">ui.css</a></li>
<li><a href="https://raw.githubusercontent.com/tmedwards/sugarcube-2/master/src/css/ui-bar.css">ui-bar.css</a></li>
<li><a href="https://raw.githubusercontent.com/tmedwards/sugarcube-2/master/src/css/ui-debug.css">ui-debug.css</a></li>
</ol>

<!-- ***********************************************************************************************
	HTML
************************************************************************************************ -->
<h1 id="html"><a href="https://www.motoslave.net/sugarcube/2/docs/#html" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><abbr title="HyperText Markup Language">HTML</abbr> </span></h1>
<p>The hierarchy of the document body, including associated HTML IDs and class names is as follows.</p>
<h4>Notes:</h4>
<ul>
<li>Periods of ellipsis (<code></code>) signify data that is dynamically generated at run time.</li>
<li>The <code>#story-title-separator</code> element is normally unused.</li>
<li>The story menu, <code>#menu-story</code>, will only exist if the <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storymenu"><code>StoryMenu</code> special passage</a> is used.</li>
<li>The core menu item for the Settings dialog, <code>#menu-item-settings</code>, will only exist if the <a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api"><code>Setting</code> API</a> is used.</li>
<li>The core menu item for the Share dialog, <code>#menu-item-share</code>, will only exist if the <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyshare"><code>StoryShare</code> special passage</a> is used.</li>
</ul>
<pre><code>&lt;body class=""&gt;
	&lt;div id="init-screen"&gt;&lt;/div&gt;
	&lt;div id="ui-overlay" class="ui-close"&gt;&lt;/div&gt;
	&lt;div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"&gt;
		&lt;div id="ui-dialog-titlebar"&gt;
			&lt;h1 id="ui-dialog-title"&gt;&lt;/h1&gt;
			&lt;button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label=""&gt;&lt;/button&gt;
		&lt;/div&gt;
		&lt;div id="ui-dialog-body"&gt;&lt;/div&gt;
	&lt;/div&gt;
	&lt;div id="ui-bar"&gt;
		&lt;div id="ui-bar-tray"&gt;
			&lt;button id="ui-bar-toggle" tabindex="0" title="" aria-label=""&gt;&lt;/button&gt;
			&lt;div id="ui-bar-history"&gt;
				&lt;button id="history-backward" tabindex="0" title="" aria-label=""&gt;&lt;/button&gt;
				&lt;button id="history-jumpto" tabindex="0" title="" aria-label=""&gt;&lt;/button&gt;
				&lt;button id="history-forward" tabindex="0" title="" aria-label=""&gt;&lt;/button&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;div id="ui-bar-body"&gt;
			&lt;header id="title" role="banner"&gt;
				&lt;div id="story-banner"&gt;&lt;/div&gt;
				&lt;h1 id="story-title"&gt;&lt;/h1&gt;
				&lt;div id="story-subtitle"&gt;&lt;/div&gt;
				&lt;div id="story-title-separator"&gt;&lt;/div&gt;
				&lt;p id="story-author"&gt;&lt;/p&gt;
			&lt;/header&gt;
			&lt;div id="story-caption"&gt;&lt;/div&gt;
			&lt;nav id="menu" role="navigation"&gt;
				&lt;ul id="menu-story"&gt;&lt;ul&gt;
				&lt;ul id="menu-core"&gt;
					&lt;li id="menu-item-saves"&gt;&lt;a tabindex="0"&gt;&lt;/a&gt;&lt;/li&gt;
					&lt;li id="menu-item-settings"&gt;&lt;a tabindex="0"&gt;&lt;/a&gt;&lt;/li&gt;
					&lt;li id="menu-item-restart"&gt;&lt;a tabindex="0"&gt;&lt;/a&gt;&lt;/li&gt;
					&lt;li id="menu-item-share"&gt;&lt;a tabindex="0"&gt;&lt;/a&gt;&lt;/li&gt;
				&lt;/ul&gt;
			&lt;/nav&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	&lt;div id="story" role="main"&gt;
		&lt;div id="passages"&gt;
			&lt;div class="passage " id="" data-passage=""&gt;
				&lt;!-- The active (present) passage content --&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	&lt;!-- The story data chunk, which depends on the compiler release (see below) --&gt;
	&lt;script id="script-sugarcube" type="text/javascript"&gt;&lt;!-- The main SugarCube module --&gt;&lt;/script&gt;
&lt;/body&gt;
</code></pre>
<h4>Story data chunks:</h4>
<p>Periods of ellipsis (<code></code>) signify data that is generated at compile time.</p>
<h5>Twine 2 style data chunk</h5>
<pre><code>&lt;tw-storydata name="" startnode="" creator="" creator-version=""
	ifid="" zoom="" format="" format-version="" options="" hidden&gt;
	&lt;!-- Passage data nodes --&gt;
&lt;/tw-storydata&gt;
</code></pre>
<h5>Twine 1 style data chunk</h5>
<pre><code>&lt;div id="store-area" data-size="" hidden&gt;
	&lt;!-- Passage data nodes --&gt;
&lt;/div&gt;
</code></pre>

<!-- ***********************************************************************************************
	Events
************************************************************************************************ -->
<h1 id="events"><a href="https://www.motoslave.net/sugarcube/2/docs/#events" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Events </span></h1>
<p>Events are messages that are sent (a.k.a.: fired, triggered) to notify code that something has taken place, from player interactions to automated happenings.  Each event is represented by an object that has properties that may be used to get additional information about what happened.</p>
<p>This section offers a list of SugarCube-specific events, triggered at various points during story operation.</p>
<p role="note" class="see"><b>See Also:</b>
For standard browser/DOM events, see the <a href="https://developer.mozilla.org/en-US/docs/Web/Events"><i>Event reference</i> @MDN</a>.
</p>
<!-- ***************************************************************************
	`Dialog` Events
**************************************************************************** -->
<h2 id="events-dialog"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-dialog" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Dialog</code> Events </span></h2>
<p><code>Dialog</code> events allow the execution of JavaScript code at specific points during the opening and closing of dialogs.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api"><code>Dialog</code> API</a>.
</p>
<!-- *********************************************************************** -->
<h3 id="events-dialog-event-dialogclosed"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-dialog-event-dialogclosed" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:dialogclosed</code> event<!-- legacy --><span id="dialog-api-event-dialogclosed"></span><!-- /legacy --> </span></h3>
<p>Global event triggered as the last step in closing the dialog when <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-close"><code>Dialog.close()</code></a> is called.</p>
<p role="note" class="warning"><b>Warning:</b>
You cannot obtain data about the closing dialog from the dialog itselfe.g., title or classeswhen using the <code>:dialogclosed</code> event, as the dialog has already closed and been reset by the time the event is fired.  If you need that kind of information from the dialog itself, then you may use the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-dialog-event-dialogclosing"><code>:dialogclosing</code> event</a> instead.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Event object properties: <em>none</em></h4>
<p role="note"><b>Note:</b>
While there are no custom properties, the event is fired from the dialog's body, thus the <code>target</code> property will refer to its body elementi.e., <code>#ui-dialog-body</code>.
</p>
<h4>Examples:</h4>
<pre><code>/* Execute the handler function when the event triggers. */
$(document).on(':dialogclosed', function (ev) {
	/* JavaScript code */
});

/* Execute the handler function exactly once. */
$(document).one(':dialogclosed', function (ev) {
	/* JavaScript code */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="events-dialog-event-dialogclosing"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-dialog-event-dialogclosing" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:dialogclosing</code> event<!-- legacy --><span id="dialog-api-event-dialogclosing"></span><!-- /legacy --> </span></h3>
<p>Global event triggered as the first step in closing the dialog when <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-close"><code>Dialog.close()</code></a> is called.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Event object properties: <em>none</em></h4>
<p role="note"><b>Note:</b>
While there are no custom properties, the event is fired from the dialog's body, thus the <code>target</code> property will refer to its body elementi.e., <code>#ui-dialog-body</code>.
</p>
<h4>Examples:</h4>
<pre><code>/* Execute the handler function when the event triggers. */
$(document).on(':dialogclosing', function (ev) {
	/* JavaScript code */
});

/* Execute the handler function exactly once. */
$(document).one(':dialogclosing', function (ev) {
	/* JavaScript code */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="events-dialog-event-dialogopened"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-dialog-event-dialogopened" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:dialogopened</code> event<!-- legacy --><span id="dialog-api-event-dialogopened"></span><!-- /legacy --> </span></h3>
<p>Global event triggered as the last step in opening the dialog when <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-open"><code>Dialog.open()</code></a> is called.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Event object properties: <em>none</em></h4>
<p role="note"><b>Note:</b>
While there are no custom properties, the event is fired from the dialog's body, thus the <code>target</code> property will refer to its body elementi.e., <code>#ui-dialog-body</code>.
</p>
<h4>Examples:</h4>
<pre><code>/* Execute the handler function when the event triggers. */
$(document).on(':dialogopened', function (ev) {
	/* JavaScript code */
});

/* Execute the handler function exactly once. */
$(document).one(':dialogopened', function (ev) {
	/* JavaScript code */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="events-dialog-event-dialogopening"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-dialog-event-dialogopening" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:dialogopening</code> event<!-- legacy --><span id="dialog-api-event-dialogopening"></span><!-- /legacy --> </span></h3>
<p>Global event triggered as the first step in opening the dialog when <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-open"><code>Dialog.open()</code></a> is called.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Event object properties: <em>none</em></h4>
<p role="note"><b>Note:</b>
While there are no custom properties, the event is fired from the dialog's body, thus the <code>target</code> property will refer to its body elementi.e., <code>#ui-dialog-body</code>.
</p>
<h4>Examples:</h4>
<pre><code>/* Execute the handler function when the event triggers. */
$(document).on(':dialogopening', function (ev) {
	/* JavaScript code */
});

/* Execute the handler function exactly once. */
$(document).one(':dialogopening', function (ev) {
	/* JavaScript code */
});
</code></pre>
<!-- ***************************************************************************
	Navigation Events
**************************************************************************** -->
<h2 id="events-navigation"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Navigation Events<!-- legacy --><span id="navigation-events-tasks"></span><span id="navigation-overview"></span><span id="navigation-events"></span><span id="navigation-tasks"></span><!-- /legacy --> </span></h2>
<p>Navigation events allow the execution of JavaScript code at specific points during passage navigation.</p>
<p>In order of processing: <em>(for reference, this also shows tasks and various special passages)</em></p>
<ol>
<li>Passage init.  Happens before the modification of the state history.
<ol>
<li><code>:passageinit</code> event.</li>
<li><span class="deprecated"><code>prehistory</code> tasks.</span> <em>(deprecated)</em></li>
</ol>
</li>
<li>Passage start. Happens before the rendering of the incoming passage.
<ol>
<li><span class="deprecated"><code>predisplay</code> tasks.</span> <em>(deprecated)</em></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-passageready"><code>PassageReady</code> special passage</a>.</li>
<li><code>:passagestart</code> event.</li>
<li><span class="deprecated"><code>prerender</code> tasks.</span> <em>(deprecated)</em></li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-passageheader"><code>PassageHeader</code> special passage</a>.</li>
</ol>
</li>
<li>Passage render.  Happens after the rendering of the incoming passage.
<ol>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-passagefooter"><code>PassageFooter</code> special passage</a>.</li>
<li><code>:passagerender</code> event.</li>
<li><span class="deprecated"><code>postrender</code> tasks.</span> <em>(deprecated)</em></li>
</ol>
</li>
<li>Passage display.  Happens after the displayi.e., outputof the incoming passage.
<ol>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-passagedone"><code>PassageDone</code> special passage</a>.</li>
<li><code>:passagedisplay</code> event.</li>
<li><span class="deprecated"><code>postdisplay</code> tasks.</span> <em>(deprecated)</em></li>
</ol>
</li>
<li>UI bar special passages update.  Happens before the end of passage navigation.
<ol>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storybanner"><code>StoryBanner</code> special passage</a>.</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storydisplaytitle"><code>StoryDisplayTitle</code> special passage</a>.</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storysubtitle"><code>StorySubtitle</code> special passage</a>.</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyauthor"><code>StoryAuthor</code> special passage</a>.</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storycaption"><code>StoryCaption</code> special passage</a>.</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storymenu"><code>StoryMenu</code> special passage</a>.</li>
</ol>
</li>
<li>Passage end.  Happens at the end of passage navigation.
<ol>
<li><code>:passageend</code> event.</li>
</ol>
</li>
</ol>
<!-- *********************************************************************** -->
<h3 id="events-navigation-event-passageinit"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passageinit" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:passageinit</code> event<!-- legacy --><span id="navigation-event-passageinit"></span><!-- /legacy --> </span></h3>
<p>Triggered before the modification of the state history.</p>
<h4>History:</h4>
<ul>
<li><code>v2.20.0</code>: Introduced.</li>
</ul>
<h4>Event object properties:</h4>
<ul>
<li><strong><code>passage</code>:</strong> (<em><code>Passage</code> object</em>) The incoming passage object.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api"><code>Passage</code> API</a> for more information.</li>
</ul>
<h4>Examples:</h4>
<pre><code>/* Execute the handler function each time the event triggers. */
$(document).on(':passageinit', function (ev) {
	/* JavaScript code */
});

/* Execute the handler function exactly once. */
$(document).one(':passageinit', function (ev) {
	/* JavaScript code */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="events-navigation-event-passagestart"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagestart" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:passagestart</code> event<!-- legacy --><span id="navigation-event-passagestart"></span><!-- /legacy --> </span></h3>
<p>Triggered before the rendering of the incoming passage.</p>
<h4>History:</h4>
<ul>
<li><code>v2.20.0</code>: Introduced.</li>
</ul>
<h4>Event object properties:</h4>
<ul>
<li><strong><code>content</code>:</strong> (<em><code>HTMLElement</code> object</em>) The, currently, empty element that will eventually hold the rendered content of the incoming passage.</li>
<li><strong><code>passage</code>:</strong> (<em><code>Passage</code> object</em>) The incoming passage object.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api"><code>Passage</code> API</a> for more information.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>/* Execute the handler function each time the event triggers. */
$(document).on(':passagestart', function (ev) {
	/* JavaScript code */
});

/* Execute the handler function exactly once. */
$(document).one(':passagestart', function (ev) {
	/* JavaScript code */
});
</code></pre>
<h5>Modifying the content buffer</h5>
<pre><code>/*
	Process the markup "In the //beginning//." and append the result
	to the incoming passage's element.
*/
$(document).on(':passagestart', function (ev) {
	$(ev.content).wiki("In the //beginning//.");
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="events-navigation-event-passagerender"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagerender" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:passagerender</code> event<!-- legacy --><span id="navigation-event-passagerender"></span><!-- /legacy --> </span></h3>
<p>Triggered after the rendering of the incoming passage.</p>
<h4>History:</h4>
<ul>
<li><code>v2.20.0</code>: Introduced.</li>
</ul>
<h4>Event object properties:</h4>
<ul>
<li><strong><code>content</code>:</strong> (<em><code>HTMLElement</code> object</em>) The element holding the fully rendered content of the incoming passage.</li>
<li><strong><code>passage</code>:</strong> (<em><code>Passage</code> object</em>) The incoming passage object.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api"><code>Passage</code> API</a> for more information.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>/* Execute the handler function each time the event triggers. */
$(document).on(':passagerender', function (ev) {
	/* JavaScript code */
});

/* Execute the handler function exactly once. */
$(document).one(':passagerender', function (ev) {
	/* JavaScript code */
});
</code></pre>
<h5>Modifying the content buffer</h5>
<pre><code>/*
	Process the markup "At the //end// of some renderings." and append the result
	to the incoming passage's element.
*/
$(document).on(':passagerender', function (ev) {
	$(ev.content).wiki("At the //end// of some renderings.");
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="events-navigation-event-passagedisplay"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagedisplay" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:passagedisplay</code> event<!-- legacy --><span id="navigation-event-passagedisplay"></span><!-- /legacy --> </span></h3>
<p>Triggered after the displayi.e., outputof the incoming passage.</p>
<h4>History:</h4>
<ul>
<li><code>v2.20.0</code>: Introduced.</li>
<li><code>v2.31.0</code>: Added <code>content</code> property to event object.</li>
</ul>
<h4>Event object properties:</h4>
<ul>
<li><strong><code>content</code>:</strong> (<em><code>HTMLElement</code> object</em>) The element holding the fully rendered content of the incoming passage.</li>
<li><strong><code>passage</code>:</strong> (<em><code>Passage</code> object</em>) The incoming passage object.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api"><code>Passage</code> API</a> for more information.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>/* Execute the handler function each time the event triggers. */
$(document).on(':passagedisplay', function (ev) {
	/* JavaScript code */
});

/* Execute the handler function exactly once. */
$(document).one(':passagedisplay', function (ev) {
	/* JavaScript code */
});
</code></pre>
<h5>Modifying the content buffer</h5>
<pre><code>/*
	Process the markup "It's //showtime//!" and append the result
	to the incoming passage's element.
*/
$(document).on(':passagedisplay', function (ev) {
	$(ev.content).wiki("It's //showtime//!");
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="events-navigation-event-passageend"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passageend" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:passageend</code> event<!-- legacy --><span id="navigation-event-passageend"></span><!-- /legacy --> </span></h3>
<p>Triggered at the end of passage navigation.</p>
<h4>History:</h4>
<ul>
<li><code>v2.20.0</code>: Introduced.</li>
<li><code>v2.31.0</code>: Added <code>content</code> property to event object.</li>
</ul>
<h4>Event object properties:</h4>
<ul>
<li><strong><code>content</code>:</strong> (<em><code>HTMLElement</code> object</em>) The element holding the fully rendered content of the incoming passage.</li>
<li><strong><code>passage</code>:</strong> (<em><code>Passage</code> object</em>) The incoming passage object.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api"><code>Passage</code> API</a> for more information.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>/* Execute the handler function each time the event triggers. */
$(document).on(':passageend', function (ev) {
	/* JavaScript code */
});

/* Execute the handler function exactly once. */
$(document).one(':passageend', function (ev) {
	/* JavaScript code */
});
</code></pre>
<h5>Modifying the content buffer</h5>
<pre><code>/*
	Process the markup "So long and //thanks for all the fish//!" and append the result
	to the incoming passage's element.
*/
$(document).on(':passageend', function (ev) {
	$(ev.content).wiki("So long and //thanks for all the fish//!");
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="events-navigation-task-prehistory"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-task-prehistory" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>prehistory</code> tasks</span><!-- legacy --><span id="navigation-task-prehistory"></span><!-- /legacy --> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
<code>prehistory</code> tasks have been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passageinit"><code>:passageinit</code> event</a> for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.31.0</code>: Deprecated.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="events-navigation-task-predisplay"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-task-predisplay" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>predisplay</code> tasks</span><!-- legacy --><span id="navigation-task-predisplay"></span><!-- /legacy --> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
<code>predisplay</code> tasks have been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagestart"><code>:passagestart</code> event</a> for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.31.0</code>: Deprecated.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="events-navigation-task-prerender"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-task-prerender" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>prerender</code> tasks</span><!-- legacy --><span id="navigation-task-prerender"></span><!-- /legacy --> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
<code>prerender</code> tasks have been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagestart"><code>:passagestart</code> event</a> for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.31.0</code>: Deprecated.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="events-navigation-task-postrender"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-task-postrender" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>postrender</code> tasks</span><!-- legacy --><span id="navigation-task-postrender"></span><!-- /legacy --> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
<code>postrender</code> tasks have been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagerender"><code>:passagerender</code> event</a> for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.31.0</code>: Deprecated.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="events-navigation-task-postdisplay"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-task-postdisplay" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>postdisplay</code> tasks</span><!-- legacy --><span id="navigation-task-postdisplay"></span><!-- /legacy --> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
<code>postdisplay</code> tasks have been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#events-navigation-event-passagedisplay"><code>:passagedisplay</code> event</a> for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.31.0</code>: Deprecated.</li>
</ul>
<!-- ***************************************************************************
	`SimpleAudio` Events
**************************************************************************** -->
<h2 id="events-simpleaudio"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-simpleaudio" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio</code> Events </span></h2>
<p><code>SimpleAudio</code> events allow the execution of JavaScript code at specific points during audio playback.</p>
<div role="note" class="see"><b>See:</b>
To add or remove event listeners to audio tracks managed by the <a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api"><code>SimpleAudio</code> API</a> see:
<ul>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api"><code>AudioTrack</code> API</a> methods: <a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-off"><code>&lt;AudioTrack&gt;.off()</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-on"><code>&lt;AudioTrack&gt;.on()</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-one"><code>&lt;AudioTrack&gt;.one()</code></a>.</li>
<li><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api"><code>AudioRunner</code> API</a> methods: <a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-off"><code>&lt;AudioRunner&gt;.off()</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-on"><code>&lt;AudioRunner&gt;.on()</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-one"><code>&lt;AudioRunner&gt;.one()</code></a>.</li>
</ul>
</div>
<!-- *********************************************************************** -->
<h3 id="events-simpleaudio-event-faded"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-simpleaudio-event-faded" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:faded</code> event<!-- legacy --><span id="audiotrack-api-event-faded"></span><!-- /legacy --> </span></h3>
<p>Track event triggered when a fade completes normally.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Event object properties: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>/* Execute the handler function when the event triggers for one track via &lt;AudioTrack&gt;. */
aTrack.on(':faded', function (ev) {
	/* JavaScript code */
});

/* Execute the handler function when the event triggers for multiple tracks via &lt;AudioRunner&gt;. */
someTracks.on(':faded', function (ev) {
	/* do something */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="events-simpleaudio-event-fading"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-simpleaudio-event-fading" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:fading</code> event<!-- legacy --><span id="audiotrack-api-event-fading"></span><!-- /legacy --> </span></h3>
<p>Track event triggered when a fade starts.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Event object properties: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>/* Execute the handler function when the event triggers for one track via &lt;AudioTrack&gt;. */
aTrack.on(':fading', function (ev) {
	/* JavaScript code */
});

/* Execute the handler function when the event triggers for multiple tracks via &lt;AudioRunner&gt;. */
someTracks.on(':fading', function (ev) {
	/* do something */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="events-simpleaudio-event-stopped"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-simpleaudio-event-stopped" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:stopped</code> event<!-- legacy --><span id="audiotrack-api-event-stopped"></span><!-- /legacy --> </span></h3>
<p>Track event triggered when playback is stopped after <a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-stop"><code>&lt;AudioTrack&gt;.stop()</code></a> or <a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-stop"><code>&lt;AudioRunner&gt;.stop()</code></a> is calledeither manually or as part of another process.</p>
<p role="note" class="see"><b>See Also:</b>
<a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/ended_event"><code>ended</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/pause_event"><code>pause</code></a> for information on somewhat similar native events.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Event object properties: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>/* Execute the handler function when the event triggers for one track via &lt;AudioTrack&gt;. */
aTrack.on(':stopped', function (ev) {
	/* JavaScript code */
});

/* Execute the handler function when the event triggers for multiple tracks via &lt;AudioRunner&gt;. */
someTracks.on(':stopped', function (ev) {
	/* do something */
});
</code></pre>
<!-- ***************************************************************************
	System Events
**************************************************************************** -->
<h2 id="events-system"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-system" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>System Events </span></h2>
<p>System events allow the execution of JavaScript code at specific points during story startup and teardown.</p>
<!-- *********************************************************************** -->
<h3 id="events-system-event-storyready"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-system-event-storyready" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:storyready</code> event </span></h3>
<p>Global event triggered once just before the dismissal of the loading screen at startup.</p>
<h4>History:</h4>
<ul>
<li><code>v2.31.0</code>: Introduced.</li>
</ul>
<h4>Event object properties: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>/* Execute the handler function exactly once, since it's only fired once. */
$(document).one(':storyready', function (ev) {
	/* JavaScript code */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="events-system-event-enginerestart"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-system-event-enginerestart" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:enginerestart</code> event<!-- legacy --><span id="engine-api-event-enginerestart"></span><!-- /legacy --> </span></h3>
<p>Global event triggered once just before the page is reloaded when <a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-restart"><code>Engine.restart()</code></a> is called.</p>
<h4>History:</h4>
<ul>
<li><code>v2.23.0</code>: Introduced.</li>
</ul>
<h4>Event object properties: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>/* Execute the handler function when the event triggers. */
$(document).one(':enginerestart', function (ev) {
	/* JavaScript code */
});
</code></pre>
<!-- ***************************************************************************
	`<<type>>` Events
**************************************************************************** -->
<h2 id="events-type-macro"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-type-macro" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;&lt;type&gt;&gt;</code> Events </span></h2>
<p><code>&lt;&lt;type&gt;&gt;</code> macro events allow the execution of JavaScript code at specific points during typing.</p>
<!-- *********************************************************************** -->
<h3 id="events-type-macro-event-typingcomplete"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-type-macro-event-typingcomplete" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:typingcomplete</code> event </span></h3>
<p>Global event triggered when all <code>&lt;&lt;type&gt;&gt;</code> macros within a passage have completed.</p>
<p role="note"><b>Note:</b>
Injecting additional <code>&lt;&lt;type&gt;&gt;</code> macro invocations <em>after</em> a <code>:typingcomplete</code> event has been fired will cause another event to eventually be generated, since you're creating a new sequence of typing.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.32.0</code>: Introduced.</li>
</ul>
<h4>Event object properties: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>/* Execute the handler function when the event triggers. */
$(document).on(':typingcomplete', function (ev) {
	/* JavaScript code */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="events-type-macro-event-typingstart"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-type-macro-event-typingstart" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:typingstart</code> event </span></h3>
<p>Local event triggered on the typing wrapper when the typing of a section starts.</p>
<h4>History:</h4>
<ul>
<li><code>v2.32.0</code>: Introduced</li>
<li><code>v2.33.0</code>: Changed to a local event that bubbles up the DOM tree.</li>
</ul>
<h4>Event object properties: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>/* Execute the handler function when the event triggers. */
$(document).on(':typingstart', function (ev) {
	/* JavaScript code */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="events-type-macro-event-typingstop"><a href="https://www.motoslave.net/sugarcube/2/docs/#events-type-macro-event-typingstop" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>:typingstop</code> event </span></h3>
<p>Local event triggered on the typing wrapper when the typing of a section stops.</p>
<h4>History:</h4>
<ul>
<li><code>v2.32.0</code>: Introduced</li>
<li><code>v2.33.0</code>: Changed to a local event that bubbles up the DOM tree.</li>
</ul>
<h4>Event object properties: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>/* Execute the handler function when the event triggers. */
$(document).on(':typingstop', function (ev) {
	/* JavaScript code */
});
</code></pre>

<!-- ***********************************************************************************************
	Config API
************************************************************************************************ -->
<h1 id="config-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config</code> API </span></h1>
<p>The <code>Config</code> object controls various aspects of SugarCube's behavior.</p>
<p role="note"><b>Note:</b>
<code>Config</code> object settings should be placed within your project's JavaScript section (Twine&nbsp;2: the Story JavaScript; Twine&nbsp;1/Twee: a <code>script</code>-tagged passage).
</p>
<!-- ***************************************************************************
	Audio
**************************************************************************** -->
<h2 id="config-api-audio"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-audio" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Audio Settings </span></h2>
<!-- *********************************************************************** -->
<h3 id="config-api-property-audio-pauseonfadetozero"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-audio-pauseonfadetozero" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.audio.pauseOnFadeToZero</code>  <em>boolean</em> (default: <code>true</code>) </span></h3>
<p>Determines whether the audio subsystem automatically pauses tracks that have been faded to <code>0</code> volume (silent).</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Config.audio.pauseOnFadeToZero = false;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-audio-preloadmetadata"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-audio-preloadmetadata" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.audio.preloadMetadata</code>  <em>boolean</em> (default: <code>true</code>) </span></h3>
<p>Determines whether the audio subsystem attempts to preload track metadatameaning information about the track (e.g., duration), not its audio frames.</p>
<p role="note"><b>Note:</b>
It is unlikely that you will ever want to disable this setting.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Config.audio.preloadMetadata = false;
</code></pre>
<!-- ***************************************************************************
	History
**************************************************************************** -->
<h2 id="config-api-history"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-history" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>History Settings </span></h2>
<!-- *********************************************************************** -->
<h3 id="config-api-property-history-controls"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-history-controls" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.history.controls</code>  <em>boolean</em> (default: <code>true</code>) </span></h3>
<p>Determines whether the story's history controls (Backward, Jump To, &amp; Forward buttons) are enabled within the UI bar.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Config.history.controls = false;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-history-maxstates"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-history-maxstates" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.history.maxStates</code>  <em>integer</em> (default: <code>40</code>) </span></h3>
<p>Sets the maximum number of states (moments) to which the history is allowed to grow.  Should the history exceed the limit, states will be dropped from the past (oldest first).</p>
<p role="note" class="tip"><b>Tip:</b>
For game-oriented projects, as opposed to more story-oriented interactive fiction, a setting of <code>1</code> is <strong><em>strongly recommended</em></strong>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.36.0</code>: Reduced the default to <code>40</code>.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Limit the history to a single state (recommended for games)
Config.history.maxStates = 1;

// Limit the history to 80 states
Config.history.maxStates = 80;
</code></pre>
<!-- ***************************************************************************
	Macros
**************************************************************************** -->
<h2 id="config-api-macros"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-macros" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Macros Settings </span></h2>
<!-- *********************************************************************** -->
<h3 id="config-api-property-macros-ifassignmenterror"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-macros-ifassignmenterror" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.macros.ifAssignmentError</code>  <em>boolean</em> (default: <code>true</code>) </span></h3>
<p>Determines whether the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-if"><code>&lt;&lt;if&gt;&gt;</code> macro</a> returns an error when the <code>=</code> assignment operator is used within its conditionale.g., <code>&lt;&lt;if $suspect = "Bob"&gt;&gt;</code>.  Does not flag other assignment operators.</p>
<p role="note"><b>Note:</b>
This setting exists because it's unlikely that you'll ever want to actually perform an assignment within a conditional expression and typing <code>=</code> when you meant <code>===</code> (or <code>==</code>) is a fairly easy to mistake makeeither from a finger slip or because you just don't know the difference between the operators.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// No error is returned when = is used within an &lt;&lt;if&gt;&gt; or &lt;&lt;elseif&gt;&gt; conditional
Config.macros.ifAssignmentError = false;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-macros-maxloopiterations"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-macros-maxloopiterations" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.macros.maxLoopIterations</code>  <em>integer</em> (default: <code>1000</code>) </span></h3>
<p>Sets the maximum number of iterations allowed before the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-for"><code>&lt;&lt;for&gt;&gt;</code> macro</a> conditional forms are terminated with an error.</p>
<p role="note"><b>Note:</b>
This setting exists to prevent a misconfigured loop from making the browser unresponsive.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Allow only 5000 iterations
Config.macros.maxLoopIterations = 5000;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-macros-typeskipkey"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-macros-typeskipkey" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.macros.typeSkipKey</code>  <em>string</em> (default: <code>" "</code>, space) </span></h3>
<p>Sets the default <a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key"><code>KeyboardEvent.key</code></a> value that causes the currently running <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-type"><code>&lt;&lt;type&gt;&gt;</code> macro</a> instance to finish typing its content immediately.</p>
<h4>History:</h4>
<ul>
<li><code>v2.33.1</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Change the default skip key to Control (CTRL)
Config.macros.typeSkipKey = "Control";
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-macros-typevisitedpassages"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-macros-typevisitedpassages" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.macros.typeVisitedPassages</code>  <em>boolean</em> (default: <code>true</code>) </span></h3>
<p>Determines whether the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-type"><code>&lt;&lt;type&gt;&gt;</code> macro</a> types out content on previously visited passages or simply outputs it immediately.</p>
<h4>History:</h4>
<ul>
<li><code>v2.32.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Do not type on previously visited passages
Config.macros.typeVisitedPassages = false;
</code></pre>
<!-- ***************************************************************************
	Navigation
**************************************************************************** -->
<h2 id="config-api-navigation"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-navigation" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Navigation Settings </span></h2>
<!-- *********************************************************************** -->
<h3 id="config-api-property-navigation-override"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-navigation-override" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.navigation.override</code>  <em>function</em> (default: <em>none</em>) </span></h3>
<p>Allows the destination of passage navigation to be overridden.  The callback is passed one parameter, the original destination passage title.  If its return value is falsy, the override is cancelled and navigation to the original destination continues unperturbed.  If its return value is truthy, the override succeeds and that value is used as the new destination of the navigation.</p>
<h4>History:</h4>
<ul>
<li><code>v2.13.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Config.navigation.override = function (destinationPassage) {
	/* code */
};
</code></pre>
<h5>Based upon a story variable</h5>
<pre><code>// Force the player to the "You Died" passage if they let $health get too low.
Config.navigation.override = function (dest) {
	var sv = State.variables;

	// If $health is less-than-or-equal to 0, go to the "You Died" passage instead.
	if (sv.health &lt;= 0) {
		return "You Died";
	}
};
</code></pre>
<!-- ***************************************************************************
	Passages
**************************************************************************** -->
<h2 id="config-api-passages"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-passages" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Passages Settings </span></h2>
<!-- *********************************************************************** -->
<h3 id="config-api-property-passages-descriptions"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-descriptions" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.passages.descriptions</code>  <em>boolean</em> | <em>object</em> | <em>function</em> (default: <em>none</em>) </span></h3>
<p>Determines whether alternate passage descriptions are used by the <em>Saves</em> and <em>Jump To</em> menusby default an excerpt from the passage is used.  Valid values are boolean <code>true</code>, which simply causes the passages' titles to be used, an object, which maps passages' titles to their descriptions, or a function, which should return the passages' description.</p>
<div role="note"><b>Note:</b>
<ul class="asnote">
<li><b>As boolean:</b> You should ensure that all encounterable passage titles are meaningful.</li>
<li><b>As object:</b> If the mapping object does not contain an entry for the passage in question, then the passage's excerpt is used instead.</li>
<li><b>As function:</b> The function is called with the passage in question as its <code>this</code> value.  If the function returns falsy, then the passage's excerpt is used instead.</li>
</ul>
</div>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Uses passages' titles
Config.passages.descriptions = true;

// Uses the description mapped by the title
Config.passages.descriptions = {
	"title" : "description"
};

// Returns the description to be used
Config.passages.descriptions = function () {
	if (this.title === "title") {
		return "description";
	}
};
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-passages-displaytitles"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-displaytitles" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.passages.displayTitles</code>  <em>boolean</em> (default: <code>false</code>) </span></h3>
<p>Determines whether passage titles are combined with the story title, within the browser's/tab's titlebar, when passages are displayed.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Config.passages.displayTitles = true;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-passages-nobr"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-nobr" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.passages.nobr</code>  <em>boolean</em> (default: <code>false</code>) </span></h3>
<p>Determines whether rendering passages have their leading/trailing newlines removed and all remaining sequences of newlines replaced with single spaces before they're rendered.  Equivalent to including the <a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-nobr"><code>nobr</code> special tag</a> on every passage.</p>
<p role="note"><b>Note:</b>
Does not affect <code>script</code> or <code>stylesheet</code> tagged passages, for Twine&nbsp;1/Twee, or the Story JavaScript or Story Stylesheet sections, for Twine&nbsp;2.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.19.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Config.passages.nobr = true;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-passages-onprocess"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-onprocess" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.passages.onProcess</code>  <em>function</em> (default: <em>none</em>) </span></h3>
<p>Allows custom processing of passage text.  The function is invoked each time the <a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api-prototype-method-processtext"><code>&lt;Passage&gt;.processText()</code> method</a> is called.  It is passed an abbreviated version of the associated passage's <a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api"><code>Passage</code> instance</a>containing only the <code>tags</code>, <code>text</code>, and <code>title</code> properties.  Its return value should be the post-processed text.</p>
<p role="note"><b>Note:</b>
Does not affect <code>script</code> or <code>stylesheet</code> tagged passages, for Twine&nbsp;1/Twee, or the Story JavaScript or Story Stylesheet sections, for Twine&nbsp;2.
</p>
<p role="note"><b>Note:</b>
The function will be called just before the built-in no-break passage processing if you're also using thatsee the <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-nobr"><code>Config.passages.nobr</code> setting</a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-nobr"><code>nobr</code> special tag</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.30.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>/* Change instancess of "cat" to "dog". */
Config.passages.onProcess = function (p) {
	return p.text.replace(/\bcat(s?)\b/g, 'dog$1');
};
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-passages-start"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-start" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.passages.start</code>  <em>string</em> (Twine&nbsp;2 default: <em>user-selected</em>; Twine&nbsp;1/Twee default: <code>"Start"</code>) </span></h3>
<p>Sets the starting passage, the very first passage that will be displayed.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Config.passages.start = "That Other Starting Passage";
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-passages-transitionout"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-transitionout" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.passages.transitionOut</code>  <em>string</em> | <em>integer</em> (default: <em>none</em>) </span></h3>
<p>Determines whether outgoing passage transitions are enabled.  Valid values are the name of the property being animated, which causes the outgoing passage element to be removed once that transition animation is complete, or an integer delay (in milliseconds), which causes the outgoing passage element to be removed once the delay has expired.  You will also need some CSS styles to make this workexamples given below.</p>
<p role="note"><b>Note:</b>
If using an integer delay, ideally, it should probably be slightly longer than the outgoing transition delay that you intend to usee.g., an additional 10ms or so should be sufficient.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Remove outgoing elements when their opacity animation ends
Config.passages.transitionOut = "opacity";

// Remove outgoing elements after 1010ms (1.01s)
Config.passages.transitionOut = 1010;
</code></pre>
<h4>CSS styles:</h4>
<p>At the very least you will need to specify a <code>.passage-out</code> style that defines the transition's end state.  For example:</p>
<pre><code>.passage-out {
	opacity: 0;
}
</code></pre>
<p>That probably won't be very pleasing to the eye, however, so you will likely need several styles to make something that looks half-decent.  For example, the following will give you a basic crossfade:</p>
<pre><code>#passages {
	position: relative;
}
.passage {
	left: 0;
	position: absolute;
	top: 0;
	transition: opacity 1s ease;
}
.passage-out {
	opacity: 0;
}
</code></pre>
<!-- ***************************************************************************
	Saves
**************************************************************************** -->
<h2 id="config-api-saves"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-saves" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Saves Settings </span></h2>
<!-- *********************************************************************** -->
<h3 id="config-api-property-saves-autoload"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-autoload" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.saves.autoload</code>  <em>boolean</em> | <em>string</em> | <em>function</em> (default: <em>none</em>) </span></h3>
<p>Determines whether the autosave, if it exists, is automatically loaded upon story startup.  Valid values are boolean <code>true</code>, which simply causes the autosave to be loaded, the string <code>"prompt"</code>, which prompts the player via a dialog to load the autosave, or a function, which causes the autosave to be loaded if its return value is truthy.</p>
<p role="note"><b>Note:</b>
If the autosave cannot be loaded, for any reason, then the start passage is loaded instead.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Automatically loads the autosave
Config.saves.autoload = true;

// Prompts the player about loading the autosave
Config.saves.autoload = "prompt";

// Loads the autosave if it returns a truthy value
Config.saves.autoload = function () {
	/* code */
};
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-saves-autosave"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-autosave" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.saves.autosave</code>  <em>boolean</em> | <em>Array&lt;string&gt;</em> | <em>function</em> (default: <em>none</em>) </span></h3>
<p>Determines whether the autosave is created/updated when passages are displayed.</p>
<p>Valid values are:</p>
<ul>
<li>Boolean <code>true</code>, which causes the autosave to be updated with every passage.</li>
<li>Boolean <code>false</code>, which causes the autosave to never update automaticallyi.e., you must do it manually via the <a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-autosave-save"><code>Save.autosave.save()</code> static method</a>.</li>
<li>An array of strings, which causes the autosave to be updated for each passage with at least one matching tag.</li>
<li>A function, which causes the autosave to be updated for each passage where its return value is truthy.</li>
</ul>
<p role="note" class="warning"><b>Warning:</b>
When setting the value to boolean <code>true</code>, you will likely also need to use the <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-isallowed"><code>Config.saves.isAllowed</code> property</a> to disallow saving on the start passage.  Or, if you use the start passage as real part of your story and allow the player to reenter it, rather than just as the initial landing/cover page, then you may wish to only disallow saving on the start passage the very first time it's displayedi.e., at story startup.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.30.0</code>: Added function values and deprecated string values.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Autosaves every passage
Config.saves.autosave = true;

// Allows manual autosaving
Config.saves.autosave = false;

// Autosaves on passages tagged with any of "bookmark" or "autosave"
Config.saves.autosave = ["bookmark", "autosave"];

// Autosaves on passages if it returns a truthy value
Config.saves.autosave = function () {
	/* code */
};
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-saves-id"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-id" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.saves.id</code>  <em>string</em> (default: <em>slugified story title</em>) </span></h3>
<p>Sets the story ID associated with saves.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Config.saves.id = "a-big-huge-story-part-1";
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-saves-isallowed"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-isallowed" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.saves.isAllowed</code>  <em>function</em> (default: <em>none</em>) </span></h3>
<p>Determines whether saving is allowed within the current context.  The callback is invoked each time a save is requested.  If its return value is falsy, the save is disallowed.  If its return value is truthy, the save is allowed to continue unperturbed.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Config.saves.isAllowed = function () {
	/* code */
};
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-saves-slots"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-slots" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.saves.slots</code> <em>integer</em> (default: <code>8</code>) </span></h3>
<p>Sets the maximum number of available save slots.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Config.saves.slots = 4;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-saves-trydiskonmobile"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-trydiskonmobile" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.saves.tryDiskOnMobile</code>  <em>boolean</em> (default: <code>true</code>) </span></h3>
<p>Determines whether saving to disk is enabled on mobile devicesi.e., smartphones, tablets, etc.</p>
<p role="note" class="warning"><b>Warning:</b>
Mobile browsers can be fickle, so saving to disk may not work as expected in all browsers.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.34.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>/* To disable saving to disk on mobile devices. */
Config.saves.tryDiskOnMobile = false;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-saves-version"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-version" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.saves.version</code>  <em>any</em> (default: <em>none</em>) </span></h3>
<p>Sets the <code>version</code> property of saves.</p>
<p role="note"><b>Note:</b>
This setting is only used to set the <code>version</code> property of saves.  Thus, it is only truly useful if you plan to upgrade out-of-date saves via a <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-onload"><code>Config.saves.onLoad</code></a> callback.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// As an integer (recommended)
Config.saves.version = 3;

// As a string (not recommended)
Config.saves.version = "v3";
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-saves-onload"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-onload" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>Config.saves.onLoad</code>  <em>function</em> (default: <em>none</em>)</span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This setting has been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-onload-add"><code>Save.onLoad.add()</code></a> method for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.36.0</code>: Deprecated in favor of the <a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-events"><code>Save</code> Events API</a>.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="config-api-property-saves-onsave"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-onsave" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>Config.saves.onSave</code>  <em>function</em> (default: <em>none</em>)</span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This setting has been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-onsave-add"><code>Save.onSave.add()</code></a> method for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.33.0</code>: Added save operation details object parameter to the callback function.</li>
<li><code>v2.36.0</code>: Deprecated in favor of the <a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-events"><code>Save</code> Events API</a>.</li>
</ul>
<!-- ***************************************************************************
	UI
**************************************************************************** -->
<h2 id="config-api-ui"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-ui" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>UI Settings </span></h2>
<!-- *********************************************************************** -->
<h3 id="config-api-property-ui-stowbarinitially"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-ui-stowbarinitially" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.ui.stowBarInitially</code>  <em>boolean</em> | <em>integer</em> (default: <code>800</code>) </span></h3>
<p>Determines whether the UI bar (sidebar) starts in the stowed (shut) state initially.  Valid values are boolean <code>true</code>/<code>false</code>, which causes the UI bar to always/never start in the stowed state, or an integer, which causes the UI bar to start in the stowed state if the viewport width is less-than-or-equal-to the specified number of pixels.</p>
<h4>History:</h4>
<ul>
<li><code>v2.11.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// As a boolean; always start stowed
Config.ui.stowBarInitially = true;

// As a boolean; never start stowed
Config.ui.stowBarInitially = false;

// As an integer; start stowed if the viewport is 800px or less
Config.ui.stowBarInitially = 800;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-ui-updatestoryelements"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-ui-updatestoryelements" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.ui.updateStoryElements</code>  <em>boolean</em> (default: <code>true</code>) </span></h3>
<p>Determines whether certain elements within the UI bar are updated when passages are displayed.  The affected elements are the story: banner, subtitle, author, caption, and menu.</p>
<p role="note"><b>Note:</b>
The story title is not included in updates because SugarCube uses it as the basis for the key used to store and load data used when playing the story and for saves.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// If you don't need those elements to update
Config.ui.updateStoryElements = false;
</code></pre>
<!-- ***************************************************************************
	Miscellaneous
**************************************************************************** -->
<h2 id="config-api-miscellaneous"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-miscellaneous" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Miscellaneous Settings </span></h2>
<!-- *********************************************************************** -->
<h3 id="config-api-property-addvisitedlinkclass"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-addvisitedlinkclass" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.addVisitedLinkClass</code>  <em>boolean</em> (default: <code>false</code>) </span></h3>
<p>Determines whether the <code>link-visited</code> class is added to internal passage links that go to previously visited passagesi.e., the passage already exists within the story history.</p>
<p role="note"><b>Note:</b>
You <em>must</em> provide your own styling for the <code>link-visited</code> class as none is provided by default.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Config.addVisitedLinkClass = true;
</code></pre>
<h4>CSS styles:</h4>
<p>You will also need to specify a <code>.link-visited</code> style that defines the properties visited links should have. For example:</p>
<pre><code>.link-visited {
	color: purple;
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-cleanupwikifieroutput"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-cleanupwikifieroutput" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.cleanupWikifierOutput</code>  <em>boolean</em> (default: <code>false</code>) </span></h3>
<p>Determines whether the output of the Wikifier is post-processed into more sane markupi.e., where appropriate, it tries to transition the plethora of <code>&lt;br&gt;</code> elements into <code>&lt;p&gt;</code> elements.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Config.cleanupWikifierOutput = true;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-debug"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-debug" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.debug</code>  <em>boolean</em> (default: <code>false</code>) </span></h3>
<p>Indicates whether SugarCube is running in test mode, which enables debug views.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-test-mode"><em>Test Mode</em> guide</a> for more information.</p>
<p role="note"><b>Note:</b>
This property is automatically set based on whether you're using a testing mode in a Twine compileri.e., <em>Test</em> mode in Twine&nbsp;2, <em>Test Play From Here</em> in Twine&nbsp;1, or the test mode option (<code>-t</code>, <code>--test</code>) in Tweego.  You may, however, forcibly enable it if you need to for some reasone.g., if you're using another compiler, which doesn't offer a way to enable test mode.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.2.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Forcibly enable test mode
Config.debug = true;

// Check if test mode is enabled in JavaScript
if (Config.debug) {
	/* do something debug related */
}

// Check if test mode is enabled via the &lt;&lt;if&gt;&gt; macro
&lt;&lt;if Config.debug&gt;&gt;
	/* do something debug related */
&lt;&lt;/if&gt;&gt;
</code></pre>
<!-- *********************************************************************** -->
<h3 id="config-api-property-loaddelay"><a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-loaddelay" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Config.loadDelay</code>  <em>integer</em> (default: <code>0</code>) </span></h3>
<p>Sets the integer delay (in milliseconds) before the loading screen is dismissed, once the document has signaled its readiness.  Not generally necessary, however, some browsers render slower than others and may need a little extra time to get a media-heavy page done.  This allows you to fine tune for those cases.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Delay the dismissal of the loading screen by 2000ms (2s)
Config.loadDelay = 2000;
</code></pre>

<!-- ***********************************************************************************************
	Dialog API
************************************************************************************************ -->
<h1 id="dialog-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Dialog</code> API </span></h1>
<!-- *********************************************************************** -->
<h3 id="dialog-api-method-append"><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-append" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Dialog.append(content)</code>  <em><code>Dialog</code> object</em> </span></h3>
<p>Appends the given content to the dialog's content area.  Returns a reference to the <code>Dialog</code> object for chaining.</p>
<p role="note"><b>Note:</b>
If your content contains any SugarCube markup, you'll need to use the <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-wiki"><code>Dialog.wiki()</code> method</a> instead.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.9.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>content</code>:</strong> The content to append.  As this method is essentially a shortcut for <code>jQuery(Dialog.body()).append()</code>, see <a href="https://api.jquery.com/append/">jQuery's <code>append()</code></a> method for the range of valid content types.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Dialog.append("Cry 'Havoc!', and let slip the &lt;em&gt;ponies&lt;/em&gt; of &lt;strong&gt;friendship&lt;/strong&gt;.");

Dialog.append( /* some DOM nodes */ );
</code></pre>
<!-- *********************************************************************** -->
<h3 id="dialog-api-method-body"><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-body" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Dialog.body()</code>  <em><code>HTMLElement</code> object</em> </span></h3>
<p>Returns a reference to the dialog's content area.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>jQuery(Dialog.body()).append("Cry 'Havoc!', and let slip the &lt;em&gt;ponies&lt;/em&gt; of &lt;strong&gt;friendship&lt;/strong&gt;.");

jQuery(Dialog.body()).wiki("Cry 'Havoc!', and let slip the //ponies// of ''friendship''.");
</code></pre>
<!-- *********************************************************************** -->
<h3 id="dialog-api-method-close"><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-close" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Dialog.close()</code>  <em><code>Dialog</code> object</em> </span></h3>
<p>Closes the dialog.  Returns a reference to the <code>Dialog</code> object for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Dialog.close();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="dialog-api-method-isopen"><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-isopen" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Dialog.isOpen([classNames])</code>  <em>boolean</em> </span></h3>
<p>Returns whether the dialog is currently open.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>classNames</code>:</strong> (optional, <em>string</em>) The space-separated-list of classes to check for when determining the state of the dialog.  Each of the built-in dialogs contains a name-themed class that can be tested for in this mannere.g., the Saves dialog contains the class <code>saves</code>.</li>
</ul>
<h4>Examples:</h4>
<pre><code>if (Dialog.isOpen()) {
	/* code to execute if the dialog is open */
}

if (Dialog.isOpen("saves")) {
	/* code to execute if the Saves dialog is open */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="dialog-api-method-open"><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-open" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Dialog.open([options [, closeFn]])</code>  <em><code>Dialog</code> object</em> </span></h3>
<p>Opens the dialog.  Returns a reference to the <code>Dialog</code> object for chaining.</p>
<p role="note"><b>Note:</b>
Call this only after populating the dialog with content.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>options</code>:</strong> (optional, <em>null</em> | <em>object</em>) The options to be used when opening the dialog.</li>
<li><strong><code>closeFn</code>:</strong> (optional, <em>null</em> | <em>function</em>) The function to execute whenever the dialog is closed.</li>
</ul>
<h4>Options object:</h4>
<p>An options object should have some of the following properties:</p>
<ul>
<li><strong><code>top</code>:</strong> Top y-coordinate of the dialog (default: <code>50</code>; in pixels, but without the unit).</li>
</ul>
<h4>Examples:</h4>
<pre><code>Dialog.open();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="dialog-api-method-setup"><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-setup" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Dialog.setup([title [, classNames]])</code>  <em><code>HTMLElement</code> object</em> </span></h3>
<p>Prepares the dialog for use and returns a reference to its content area.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>title</code>:</strong> (optional, <em>string</em>) The title of the dialog.</li>
<li><strong><code>classNames</code>:</strong> (optional, <em>string</em>) The space-separated-list of classes to add to the dialog.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Basic example.
Dialog.setup();
Dialog.wiki("Blah //blah// ''blah''.");
Dialog.open();

// Adding a title to the dialog.
Dialog.setup("Character Sheet");
Dialog.wiki(Story.get("PC Sheet").processText());
Dialog.open();

// Adding a title and class to the dialog.
Dialog.setup("Character Sheet", "charsheet");
Dialog.wiki(Story.get("PC Sheet").processText());
Dialog.open();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="dialog-api-method-wiki"><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-wiki" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Dialog.wiki(wikiMarkup)</code>  <em><code>Dialog</code> object</em> </span></h3>
<p>Renders the given <a href="https://www.motoslave.net/sugarcube/2/docs/#markup">markup</a> and appends it to the dialog's content area.  Returns a reference to the <code>Dialog</code> object for chaining.</p>
<p role="note"><b>Note:</b>
If your content consists of DOM nodes, you'll need to use the <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-append"><code>Dialog.append()</code> method</a> instead.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.9.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>wikiMarkup</code>:</strong> The markup to render.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Dialog.wiki("Cry 'Havoc!', and let slip the //ponies// of ''friendship''.");
</code></pre>
<!-- *********************************************************************** -->
<h3 id="dialog-api-method-addclickhandler"><a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-addclickhandler" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>Dialog.addClickHandler(targets [, options [, startFn [, doneFn [, closeFn]]]])</code></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This method has been deprecated and should no longer be used.  The core of what it does is simply to wrap a call to <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-open"><code>Dialog.open()</code></a> within a call to <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery-prototype-method-ariaclick"><code>&lt;jQuery&gt;.ariaClick()</code></a>, which can be done directly and with greater flexibility.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Deprecated.</li>
</ul>

<!-- ***********************************************************************************************
	Engine API
************************************************************************************************ -->
<h1 id="engine-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Engine</code> API </span></h1>
<!-- *********************************************************************** -->
<h3 id="engine-api-getter-lastplay"><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-getter-lastplay" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Engine.lastPlay</code>  <em>number</em> </span></h3>
<p>Returns a timestamp representing the last time <code>Engine.play()</code> was called.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Engine.lastPlay   The timestamp at which Engine.play() was last called
</code></pre>
<!-- *********************************************************************** -->
<h3 id="engine-api-getter-state"><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-getter-state" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Engine.state</code>  <em>string</em> </span></h3>
<p>Returns the current state of the engine (<code>"idle"</code>, <code>"playing"</code>, <code>"rendering"</code>).</p>
<h4>History:</h4>
<ul>
<li><code>v2.7.0</code>: Introduced.</li>
</ul>
<h4>States:</h4>
<ul>
<li><strong><code>"idle"</code>:</strong> The engine is idle, awaiting the triggering of passage navigationthe default state.</li>
<li><strong><code>"playing"</code>:</strong> Passage navigation has been triggered and a turn is being processed.</li>
<li><strong><code>"rendering"</code>:</strong> The incoming passage is being rendered and added to the pagetakes place during turn processing, so implies <code>"playing"</code>.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Engine.state   Returns the current state of the engine
</code></pre>
<!-- *********************************************************************** -->
<h3 id="engine-api-method-backward"><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-backward" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Engine.backward()</code>  <em>boolean</em> </span></h3>
<p>Moves backward one moment within the full history (past + future), if possible, activating and showing the moment moved to.  Returns whether the history navigation was successful (should only fail if already at the beginning of the full history).</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Engine.backward()   Rewinds the full history by one momenti.e., undoes the moment
</code></pre>
<!-- *********************************************************************** -->
<h3 id="engine-api-method-forward"><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-forward" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Engine.forward()</code>  <em>boolean</em> </span></h3>
<p>Moves forward one moment within the full history (past + future), if possible, activating and showing the moment moved to.  Returns whether the history navigation was successful (should only fail if already at the end of the full history).</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Engine.forward()   Fast forwards the full history by one momenti.e., redoes the moment
</code></pre>
<!-- *********************************************************************** -->
<h3 id="engine-api-method-go"><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-go" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Engine.go(offset)</code>  <em>boolean</em> </span></h3>
<p>Activates the moment at the given offset from the active (present) moment within the full state history and show it.  Returns whether the history navigation was successful (should only fail if the offset from the active (present) moment is not within the bounds of the full history).</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>offset</code>:</strong> (<em>integer</em>) The offset from the active (present) moment of the moment to go to.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Engine.go(2)    Fast forwards the full history by two momentsi.e., redoes the moments
Engine.go(-4)   Rewinds the full history by four momentsi.e., undoes the moments
</code></pre>
<!-- *********************************************************************** -->
<h3 id="engine-api-method-goto"><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-goto" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Engine.goTo(index)</code>  <em>boolean</em> </span></h3>
<p>Activates the moment at the given index within the full state history and show it.  Returns whether the history navigation was successful (should only fail if the index is not within the bounds of the full history).</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>index</code>:</strong> (<em>integer</em>) The index of the moment to go to.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Engine.goTo(0)   Goes to the first moment
Engine.goTo(9)   Goes to the tenth moment
</code></pre>
<!-- *********************************************************************** -->
<h3 id="engine-api-method-isidle"><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-isidle" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Engine.isIdle()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the engine is idle.</p>
<h4>History:</h4>
<ul>
<li><code>v2.16.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Engine.isIdle()   Returns whether the engine is idle
</code></pre>
<!-- *********************************************************************** -->
<h3 id="engine-api-method-isplaying"><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-isplaying" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Engine.isPlaying()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the engine is processing a turni.e., passage navigation has been triggered.</p>
<h4>History:</h4>
<ul>
<li><code>v2.16.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Engine.isPlaying()   Returns whether the engine is playing
</code></pre>
<!-- *********************************************************************** -->
<h3 id="engine-api-method-isrendering"><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-isrendering" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Engine.isRendering()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the engine is rendering the incoming passage.</p>
<h4>History:</h4>
<ul>
<li><code>v2.16.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Engine.isRendering()   Returns whether the engine is rendering
</code></pre>
<!-- *********************************************************************** -->
<h3 id="engine-api-method-play"><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-play" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Engine.play(passageTitle [, noHistory])</code>  <em><code>HTMLElement</code> object</em> </span></h3>
<p>Renders and displays the passage referenced by the given title, optionally without adding a new moment to the history.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>passageTitle</code>:</strong> (<em>string</em>) The title of the passage to play.</li>
<li><strong><code>noHistory</code>:</strong> (optional, <em>boolean</em>) Disables the update of the historyi.e., no moment is added to the history.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Engine.play("Foo")         Renders, displays, and adds a moment for the passage "Foo" to the history
Engine.play("Foo", true)   Renders and displays the passage "Foo", but does not add new history
</code></pre>
<!-- *********************************************************************** -->
<h3 id="engine-api-method-restart"><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-restart" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Engine.restart()</code> </span></h3>
<p>Restarts the story.</p>
<p role="note" class="warning"><b>Warning:</b>
The player will <em>not</em> be prompted and all unsaved state will be lost.
</p>
<p role="note"><b>Note:</b>
In general, you should not call this method directly.  Instead, call the <a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api-method-restart"><code>UI.restart()</code></a> static method, which prompts the player with an OK/Cancel dialog before itself calling <code>Engine.restart()</code>, if they accept.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Engine.restart()   Restarts the story
</code></pre>
<!-- *********************************************************************** -->
<h3 id="engine-api-method-show"><a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-show" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Engine.show()</code>  <em><code>HTMLElement</code> object</em> </span></h3>
<p>Renders and displays the active (present) moment's associated passage without adding a new moment to the history.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Engine.show()   Renders and displays the present passage without adding new history
</code></pre>

<!-- ***********************************************************************************************
	Fullscreen API
************************************************************************************************ -->
<h1 id="fullscreen-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Fullscreen</code> API </span></h1>
<p>Provides access to browsers' fullscreen functionality.</p>
<h4 id="fullscreen-api-backgrounds"><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-backgrounds" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Backgrounds in fullscreen </span></h4>
<p>If you wish to use custom backgrounds, either simply colors or with images, then you should place them on the <code>body</code> element.  For example:</p>
<pre><code>body {
	background: #111 fixed url("images/background.png") center / contain no-repeat;
}
</code></pre>
<p role="note" class="warning"><b>Warning:</b>
It is <strong><em>strongly recommended</em></strong> that you do not place background properties on the <code>html</code> element in addition to the <code>body</code> element as this can cause background jitter in Internet Explorer when scrolling outside of fullscreen mode.
</p>
<p role="note" class="warning"><b>Warning:</b>
If setting a background image via the <code>background</code> shorthand property, then you should also specify a <code>background-color</code> value with it or include a separate <code>background-color</code> property after the <code>background</code> property.  The reason being is that the <code>background</code> property resets the background color, so if you do not set one either as one of its values or via a following <code>background-color</code> property, then the browser's default background color could show through if the background image does not cover the entire viewport or includes transparency.
</p>
<h4 id="fullscreen-api-limitations"><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-limitations" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Fullscreen limitations </span></h4>
<p>The <code>Fullscreen</code> API comes with some built-in limitations:</p>
<ol>
<li>Fullscreen requests must be initiated by the player, generally via click/touchi.e., the request must be made as a result of player interaction; e.g., activating a button/link/etc whose code makes the request.</li>
</ol>
<!-- *********************************************************************** -->
<h3 id="fullscreen-api-getter-element"><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-getter-element" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Fullscreen.element</code>  <em><code>HTMLElement</code> object</em> | <em>null</em> </span></h3>
<p>Returns the current fullscreen element or, if fullscreen mode is not active, <code>null</code>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.31.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Fullscreen.element   The current fullscreen element
</code></pre>
<!-- *********************************************************************** -->
<h3 id="fullscreen-api-method-isenabled"><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-isenabled" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Fullscreen.isEnabled()</code>  <em>boolean</em> </span></h3>
<p>Returns whether fullscreen is both supported and enabled.</p>
<h4>History:</h4>
<ul>
<li><code>v2.31.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Fullscreen.isEnabled()   Whether fullscreen mode is available
</code></pre>
<!-- *********************************************************************** -->
<h3 id="fullscreen-api-method-isfullscreen"><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-isfullscreen" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Fullscreen.isFullscreen()</code>  <em>boolean</em> </span></h3>
<p>Returns whether fullscreen mode is currently active.</p>
<h4>History:</h4>
<ul>
<li><code>v2.31.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Fullscreen.isFullscreen()   Whether fullscreen mode is active
</code></pre>
<!-- *********************************************************************** -->
<h3 id="fullscreen-api-method-request"><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-request" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Fullscreen.request([options [, requestedEl]])</code>  <em><code>Promise</code> object</em> </span></h3>
<p>Request that the browser enter fullscreen mode.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-backgrounds">Backgrounds</a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-limitations">limitations</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.31.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>options</code>:</strong> (optional, <em>object</em>) The fullscreen options object.</li>
<li><strong><code>requestedEl</code>:</strong> (optional, <em><code>HTMLElement</code> object</em>) The element to enter fullscreen mode with.  If omitted, defaults to the entire page.</li>
</ul>
<h4>Options object:</h4>
<p>A fullscreen options object should have some of the following properties:</p>
<ul>
<li><strong><code>navigationUI</code>:</strong> (<em>string</em>) Determines the fullscreen navigation UI preference.  Valid values are (default: <code>"auto"</code>):
<ul>
<li><code>"auto"</code>: Indicates no preference.</li>
<li><code>"hide"</code>: Request that the browser's navigation UI be hidden.  The full dimensions of the screen will be used to display the element.</li>
<li><code>"show"</code>: Request that the browser's navigation UI be shown.  The screen dimensions allocated to the element will be clamped to leave room for the UI.</li>
</ul>
</li>
</ul>
<p role="note"><b>Note:</b>
Browsers are not currently required to honor the <code>navigationUI</code> setting.
</p>
<h4>Examples:</h4>
<h5>Basic usage (recommended)</h5>
<pre><code>/* Request to enter fullscreen mode. */
Fullscreen.request();
</code></pre>
<h5>With options and a specified element</h5>
<pre><code>/* Request to enter fullscreen mode while showing its navigation UI and with the given element. */
Fullscreen.request({ navigationUI : "show" }, myElement);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="fullscreen-api-method-exit"><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-exit" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Fullscreen.exit()</code>  <em><code>Promise</code> object</em> </span></h3>
<p>Request that the browser exit fullscreen mode.</p>
<h4>History:</h4>
<ul>
<li><code>v2.31.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>/* Request to exit fullscreen mode. */
Fullscreen.exit();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="fullscreen-api-method-toggle"><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-toggle" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Fullscreen.toggle([options [, requestedEl]])</code>  <em><code>Promise</code> object</em> </span></h3>
<p>Request that the browser toggle fullscreen modei.e., enter or exit as appropriate.</p>
<h4>History:</h4>
<ul>
<li><code>v2.31.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>options</code>:</strong> (optional, <em>object</em>) The fullscreen options object.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-request"><code>Fullscreen.request()</code></a> for more information.</li>
<li><strong><code>requestedEl</code>:</strong> (optional, <em><code>HTMLElement</code> object</em>) The element to toggle fullscreen mode with.  If omitted, defaults to the entire page.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage (recommended)</h5>
<pre><code>/* Request to toggle fullscreen mode. */
Fullscreen.toggle();
</code></pre>
<h5>With options and a specified element</h5>
<pre><code>/* Request to toggle fullscreen mode while showing its navigation UI and with the given element. */
Fullscreen.toggle({ navigationUI : "show" }, myElement);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="fullscreen-api-method-onchange"><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-onchange" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Fullscreen.onChange(handlerFn [, requestedEl])</code> </span></h3>
<p>Attaches fullscreen change event handlers.</p>
<h4>History:</h4>
<ul>
<li><code>v2.31.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>handlerFn</code>:</strong> (<em>function</em>) The function to invoke when fullscreen mode is changed.</li>
<li><strong><code>requestedEl</code>:</strong> (optional, <em><code>HTMLElement</code> object</em>) The element to attach the handler to.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage (recommended)</h5>
<pre><code>/* Attach a hander to listen for fullscreen change events. */
Fullscreen.onChange(function (ev) {
	/* Fullscreen mode changed, so do something. */
});
</code></pre>
<h5>With a specified element</h5>
<pre><code>/* Attach a hander to the given element to listen for fullscreen change events. */
Fullscreen.onChange(function (ev) {
	/* Fullscreen mode changed on myElement, so do something. */
}, myElement);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="fullscreen-api-method-offchange"><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-offchange" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Fullscreen.offChange([handlerFn [, requestedEl]])</code> </span></h3>
<p>Removes fullscreen change event handlers.</p>
<h4>History:</h4>
<ul>
<li><code>v2.31.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>handlerFn</code>:</strong> (optional, <em>function</em>) The function to remove.  If omitted, will remove all handler functions.</li>
<li><strong><code>requestedEl</code>:</strong> (optional, <em><code>HTMLElement</code> object</em>) The element to remove the handler(s) from.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage (recommended)</h5>
<pre><code>/* Remove all fullscreen change event handers. */
Fullscreen.offChange();
</code></pre>
<pre><code>/* Remove the given fullscreen change event hander. */
/* NOTE: Requires that the original handler function was saved. */
Fullscreen.offChange(originalHandlerFn);
</code></pre>
<h5>With a specified element</h5>
<pre><code>/* Remove all fullscreen change event handers from myElement. */
Fullscreen.offChange(null, myElement);
</code></pre>
<pre><code>/* Remove the given fullscreen change event hander from myElement. */
/* NOTE: Requires that the original handler function was saved. */
Fullscreen.offChange(originalHandlerFn, myElement);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="fullscreen-api-method-onerror"><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-onerror" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Fullscreen.onError(handlerFn [, requestedEl])</code> </span></h3>
<p>Attaches fullscreen error event handlers.</p>
<h4>History:</h4>
<ul>
<li><code>v2.31.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>handlerFn</code>:</strong> (<em>function</em>) The function to invoke when fullscreen mode encounters an error.</li>
<li><strong><code>requestedEl</code>:</strong> (optional, <em><code>HTMLElement</code> object</em>) The element to attach the handler to.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage (recommended)</h5>
<pre><code>/* Attach a hander to listen for fullscreen error events. */
Fullscreen.onError(function (ev) {
	/* Fullscreen mode changed, so do something. */
});
</code></pre>
<h5>With a specified element</h5>
<pre><code>/* Attach a hander to the given element to listen for fullscreen error events. */
Fullscreen.onError(function (ev) {
	/* Fullscreen mode changed on myElement, so do something. */
}, myElement);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="fullscreen-api-method-offerror"><a href="https://www.motoslave.net/sugarcube/2/docs/#fullscreen-api-method-offerror" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Fullscreen.offError([handlerFn [, requestedEl]])</code> </span></h3>
<p>Removes fullscreen error event handlers.</p>
<h4>History:</h4>
<ul>
<li><code>v2.31.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>handlerFn</code>:</strong> (optional, <em>function</em>) The function to remove.  If omitted, will remove all handler functions.</li>
<li><strong><code>requestedEl</code>:</strong> (optional, <em><code>HTMLElement</code> object</em>) The element to remove the handler(s) from.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage (recommended)</h5>
<pre><code>/* Remove all fullscreen error event handers. */
Fullscreen.offError();
</code></pre>
<pre><code>/* Remove the given fullscreen error event hander. */
/* NOTE: Requires that the original handler function was saved. */
Fullscreen.offError(originalHandlerFn);
</code></pre>
<h5>With a specified element</h5>
<pre><code>/* Remove all fullscreen error event handers from myElement. */
Fullscreen.offError(null, myElement);
</code></pre>
<pre><code>/* Remove the given fullscreen error event hander from myElement. */
/* NOTE: Requires that the original handler function was saved. */
Fullscreen.offError(originalHandlerFn, myElement);
</code></pre>

<!-- ***********************************************************************************************
	LoadScreen API
************************************************************************************************ -->
<h1 id="loadscreen-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#loadscreen-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>LoadScreen</code> API </span></h1>
<p role="note"><b>Note:</b>
To simply add a delay to the dismissal of the loading screen to hide initial flashes of unstyled content (<a href="https://www.wikipedia.org/wiki/Flash_of_unstyled_content">FOUC</a>)e.g., style changes and page reflowsyou do not need to use this API.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-loaddelay"><code>Config.loadDelay</code></a> configuration setting.
</p>
<!-- *********************************************************************** -->
<h3 id="loadscreen-api-method-lock"><a href="https://www.motoslave.net/sugarcube/2/docs/#loadscreen-api-method-lock" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>LoadScreen.lock()</code>  <em>number</em> </span></h3>
<p>Acquires a loading screen lock and returns its ID.  Displays the loading screen, if necessary.</p>
<h4>History:</h4>
<ul>
<li><code>v2.15.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>LoadScreen.lock()   Locks the loading screen and returns the lock ID
</code></pre>
<!-- *********************************************************************** -->
<h3 id="loadscreen-api-method-unlock"><a href="https://www.motoslave.net/sugarcube/2/docs/#loadscreen-api-method-unlock" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>LoadScreen.unlock(lockId)</code> </span></h3>
<p>Releases the loading screen lock with the given ID.  Hides the loading screen, if no other locks exist.</p>
<h4>History:</h4>
<ul>
<li><code>v2.15.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>lockId</code>:</strong> (<em>integer</em>) The loading screen lock ID.</li>
</ul>
<h4>Examples:</h4>
<pre><code>var lockId = LoadScreen.lock();

// Do something whose timing is unpredictable that should be hidden by the loading screen

LoadScreen.unlock(lockId);
</code></pre>

<!-- ***********************************************************************************************
	Macro API
************************************************************************************************ -->
<h1 id="macro-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Macro</code> API </span></h1>
<p role="note" class="see"><b>See Also:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api"><code>MacroContext</code> API</a>.
</p>
<!-- *********************************************************************** -->
<h3 id="macro-api-method-add"><a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api-method-add" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Macro.add(name , definition)</code> </span></h3>
<p>Add new macro(s).</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced</li>
<li><code>v2.33.0</code>: Obsoleted the <code>deep</code> parameter.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em> | <em>Array&lt;string&gt;</em>) Name, or array of names, of the macro(s) to add.  <strong>NOTE:</strong> Names must consist of characters from the basic Latin alphabet and start with a letter, which may be optionally followed by any number of letters, numbers, the underscore, or the hyphen.</li>
<li><strong><code>definition</code>:</strong> (<em>object</em> | <em>string</em>) Definition of the macro(s) or the name of an existing macro whose definition to copy.</li>
</ul>
<h4>Definition object:</h4>
<p>A macro definition object should have some of the following properties (only <code>handler</code> is absolutely required):</p>
<ul>
<li><strong><code>skipArgs</code>:</strong> (optional, <em>boolean</em> | <em>Array&lt;string&gt;</em>) Disables parsing argument strings into discrete arguments.  Used by macros that only use the raw/full argument strings.  Boolean <code>true</code> to affect all tags or an array of tag names to affect.</li>
<li><strong><code>tags</code>:</strong> (optional, <em>null</em> | <em>Array&lt;string&gt;</em>) Signifies that the macro is a container macroi.e., not self-closing.  An array child tag names or <code>null</code>, if there are no child tags.</li>
<li><strong><code>handler</code>:</strong> (<em>function</em>) The macro's main function.  It will be called without arguments, but with its <code>this</code> set to a <a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api">macro context object</a>.</li>
</ul>
<p>Additional properties may be added for internal use.</p>
<h4>Examples:</h4>
<pre><code>/*
	Example of a very simple/naive &lt;&lt;if&gt;&gt;/&lt;&lt;elseif&gt;&gt;/&lt;&lt;else&gt;&gt; macro implementation.
*/
Macro.add('if', {
	skipArgs : true,
	tags     : ['elseif', 'else'],
	handler  : function () {
		try {
			for (var i = 0, len = this.payload.length; i &lt; len; ++i) {
				if (
					this.payload[i].name === 'else' ||
					!!Scripting.evalJavaScript(this.payload[i].args.full)
				) {
					jQuery(this.output).wiki(this.payload[i].contents);
					break;
				}
			}
		}
		catch (ex) {
			return this.error('bad conditional expression: ' + ex.message);
		}
	}
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macro-api-method-delete"><a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api-method-delete" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Macro.delete(name)</code> </span></h3>
<p>Remove existing macro(s).</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em> | <em>Array&lt;string&gt;</em>) Name, or array of names, of the macro(s) to remove.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Macro.delete("amacro")
Macro.delete(["amacro", "bmacro"])
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macro-api-method-get"><a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api-method-get" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Macro.get(name)</code>  <em>object</em> </span></h3>
<p>Return the named macro definition, or <code>null</code> on failure.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em>) Name of the macro whose definition should be returned.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Macro.get("print")
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macro-api-method-has"><a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api-method-has" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Macro.has(name)</code>  <em>boolean</em> </span></h3>
<p>Returns whether the named macro exists.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em>) Name of the macro to search for.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Macro.has("print")
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macro-api-method-tags-get"><a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api-method-tags-get" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Macro.tags.get(name)</code>  <em>Array&lt;string&gt;</em> </span></h3>
<p>Return the named macro tag's parents array (includes the names of all macros who have registered the tag as a child), or <code>null</code> on failure.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em>) Name of the macro tag whose parents array should be returned.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Macro.tags.get("else")   For the standard library, returns: ["if"]
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macro-api-method-tags-has"><a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api-method-tags-has" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Macro.tags.has(name)</code>  <em>boolean</em> </span></h3>
<p>Returns whether the named macro tag exists.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em>) Name of the macro tag to search for.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Macro.tags.has("else")
</code></pre>

<!-- ***************************************************************************
	MacroContext API
**************************************************************************** -->
<h1 id="macrocontext-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>MacroContext</code> API </span></h1>
<p role="note" class="see"><b>See Also:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api"><code>Macro</code> API</a>.
</p>
<p>Macro handlers are called with no arguments, but with their <code>this</code> set to a macro (execution) context object.  Macro context objects contain the following data and method properties.</p>
<!-- *********************************************************************** -->
<h3 id="macrocontext-api-prototype-property-args"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-args" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;MacroContext&gt;.args</code>  <em>Array&lt;any&gt;</em> </span></h3>
<p>An array of discrete arguments parsed from the argument string.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: &lt;&lt;someMacro "a" "b" "c"&gt;&gt;
this.args.length   Returns 3
this.args[0]       Returns 'a'
this.args[1]       Returns 'b'
this.args[2]       Returns 'c'
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macrocontext-api-prototype-property-args-full"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-args-full" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;MacroContext&gt;.args.full</code>  <em>string</em> </span></h3>
<p>The argument string after converting all TwineScript syntax elements into their native JavaScript counterparts.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: &lt;&lt;if "a" is "b"&gt;&gt;
this.args.full   Returns '"a" === "b"'
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macrocontext-api-prototype-property-args-raw"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-args-raw" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;MacroContext&gt;.args.raw</code>  <em>string</em> </span></h3>
<p>The unprocessed argument string.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: &lt;&lt;if "a" is "b"&gt;&gt;
this.args.raw   Returns '"a" is "b"'
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macrocontext-api-prototype-property-name"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-name" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;MacroContext&gt;.name</code>  <em>string</em> </span></h3>
<p>The name of the macro.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: &lt;&lt;someMacro &gt;&gt;
this.name   Returns 'someMacro'
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macrocontext-api-prototype-property-output"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-output" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;MacroContext&gt;.output</code>  <em><code>HTMLElement</code> object</em> </span></h3>
<p>The current output element.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="macrocontext-api-prototype-property-parent"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-parent" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;MacroContext&gt;.parent</code>  <em>null</em> | <em>object</em> </span></h3>
<p>The (execution) context object of the macro's parent, or <code>null</code> if the macro has no parent.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="macrocontext-api-prototype-property-parser"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-parser" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;MacroContext&gt;.parser</code>  <em>object</em> </span></h3>
<p>The parser instance that generated the macro call.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="macrocontext-api-prototype-property-payload"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-payload" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;MacroContext&gt;.payload</code>  <em>null</em> | <em>Array&lt;object&gt;</em> </span></h3>
<p>The text of a container macro parsed into discrete payload objects by tag.  Payload objects have the following properties:</p>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em>) Name of the current tag.</li>
<li><strong><code>args</code>:</strong> (<em>Array&lt;any&gt;</em>) The current tag's argument string parsed into an array of discrete arguments.  Equivalent in function to <a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-args"><code>&lt;MacroContext&gt;.args</code></a>.
<ul>
<li><strong><code>args.full</code>:</strong> (<em>string</em>) The current tag's argument string after converting all TwineScript syntax elements into their native JavaScript counterparts.  Equivalent in function to <a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-args-full"><code>&lt;MacroContext&gt;.args.full</code></a>.</li>
<li><strong><code>args.raw</code>:</strong> (<em>string</em>) The current tag's unprocessed argument string.  Equivalent in function to <a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-args-raw"><code>&lt;MacroContext&gt;.args.raw</code></a>.</li>
</ul>
</li>
<li><strong><code>contents</code>:</strong> (<em>string</em>) The current tag's contentsi.e., the text between the current tag and the next.</li>
</ul>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="macrocontext-api-prototype-property-self"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-property-self" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;MacroContext&gt;.self</code>  <em>object</em> </span></h3>
<p>The macro's definitioncreated via <a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api-method-add"><code>Macro.add()</code></a>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="macrocontext-api-prototype-method-contexthas"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-method-contexthas" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;MacroContext&gt;.contextHas(filter)</code>  <em>boolean</em> </span></h3>
<p>Returns whether any of the macro's ancestors passed the test implemented by the given filter function.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>filter</code>:</strong> (<em>function</em>) The function used to test each ancestor execution context object, which is passed in as its sole parameter.</li>
</ul>
<h4>Examples:</h4>
<pre><code>var includeAncestor = function (ctx) { return ctx.name === "include"; };
this.contextHas(includeAncestor);   Returns true if any ancestor was an &lt;&lt;include&gt;&gt; macro
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macrocontext-api-prototype-method-contextselect"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-method-contextselect" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;MacroContext&gt;.contextSelect(filter)</code>  <em>null</em> | <em>object</em> </span></h3>
<p>Returns the first of the macro's ancestors that passed the test implemented by the given filter function or <code>null</code>, if no members pass.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>filter</code>:</strong> (<em>function</em>) The function used to test each ancestor execution context object, which is passed in as its sole parameter.</li>
</ul>
<h4>Examples:</h4>
<pre><code>var includeAncestor = function (ctx) { return ctx.name === "include"; };
this.contextSelect(includeAncestor);   Returns the first &lt;&lt;include&gt;&gt; macro ancestor
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macrocontext-api-prototype-method-contextselectall"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-method-contextselectall" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;MacroContext&gt;.contextSelectAll(filter)</code>  <em>Array&lt;object&gt;</em> </span></h3>
<p>Returns a new array containing all of the macro's ancestors that passed the test implemented by the given filter function or an empty array, if no members pass.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>filter</code>:</strong> (<em>function</em>) The function used to test each ancestor execution context object, which is passed in as its sole parameter.</li>
</ul>
<h4>Examples:</h4>
<pre><code>var includeAncestor = function (ctx) { return ctx.name === "include"; };
this.contextSelectAll(includeAncestor);   Returns an array of all &lt;&lt;include&gt;&gt; macro ancestors
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macrocontext-api-prototype-method-createshadowwrapper"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-method-createshadowwrapper" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;MacroContext&gt;.createShadowWrapper(callback [, doneCallback [, startCallback]])</code>  <em>function</em> </span></h3>
<p>Returns a callback function that wraps the specified callback functions to provide access to the variable shadowing system used by the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-capture"><code>&lt;&lt;capture&gt;&gt;</code> macro</a>.</p>
<p role="note" class="note"><b>Note:</b>
All of the specified callbacks are invoked as the wrapper is invokedmeaning, with their <code>this</code> set to the <code>this</code> of the wrapper and with whatever parameters were passed to the wrapper.
</p>
<p role="note" class="warning"><b>Warning:</b>
Only useful when you have an asynchronous callback that invokes code/content that needs to access story and/or temporary variables shadowed by <code>&lt;&lt;capture&gt;&gt;</code>.  If you don't know what that means, then this API is likely not for you.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.14.0</code>: Introduced.</li>
<li><code>v2.23.3</code>: Fixed an issue where shadows would fail for multiple layers of nested asynchronous code due to loss of context.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>callback</code>:</strong> (<em>function</em>) The main callback function, executed when the wrapper is invoked.  Receives access to variable shadows.</li>
<li><strong><code>doneCallback</code>:</strong> (optional, <em>function</em>) The finalization callback function, executed after the main <code>callback</code> returns.  Does not receive access to variable shadows.</li>
<li><strong><code>startCallback</code>:</strong> (optional, <em>function</em>) The initialization callback function, executed before the main <code>callback</code> is invoked.  Does not receive access to variable shadows.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>$someElement.on('some_event', this.createShadowWrapper(function (ev) {
	/* main asynchronous code */
}));
</code></pre>
<h5>With an optional <code>doneCallback</code></h5>
<pre><code>$someElement.on('some_event', this.createShadowWrapper(
	function (ev) {
		/* main asynchronous code */
	},
	function (ev) {
		/* asynchronous code invoked after the main code */
	}
));
</code></pre>
<h5>With an optional <code>doneCallback</code> and <code>startCallback</code></h5>
<pre><code>$someElement.on('some_event', this.createShadowWrapper(
	function (ev) {
		/* main asynchronous code */
	},
	function (ev) {
		/* asynchronous code invoked after the main code */
	},
	function (ev) {
		/* asynchronous code invoked before the main code */
	}
));
</code></pre>
<!-- *********************************************************************** -->
<h3 id="macrocontext-api-prototype-method-error"><a href="https://www.motoslave.net/sugarcube/2/docs/#macrocontext-api-prototype-method-error" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;MacroContext&gt;.error(message)</code>  <em>boolean:false</em> </span></h3>
<p>Renders the message prefixed with the name of the macro and returns <code>false</code>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>message</code>:</strong> (<em>string</em>) The error message to output.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Given: &lt;&lt;someMacro &gt;&gt;
return this.error("oops");   Outputs '&lt;&lt;someMacro&gt;&gt;: oops'
</code></pre>

<!-- ***********************************************************************************************
	Passage API
************************************************************************************************ -->
<h1 id="passage-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Passage</code> API </span></h1>
<p>Instances of the <code>Passage</code> object are returned by the <a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-method-get"><code>Story.get()</code></a> static method.</p>
<p>All properties of <code>Passage</code> objects should be treated as if they were <em><strong>read-only</strong></em>, as modifying them could result in unexpected behavior.</p>
<!-- *********************************************************************** -->
<h3 id="passage-api-prototype-getter-domid"><a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api-prototype-getter-domid" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Passage&gt;.domId</code>  <em>string</em> </span></h3>
<p>The DOM ID of the passage, created from the slugified passage title.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="passage-api-prototype-getter-tags"><a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api-prototype-getter-tags" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Passage&gt;.tags</code>  <em>Array&lt;string&gt;</em> </span></h3>
<p>The tags of the passage.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="passage-api-prototype-getter-text"><a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api-prototype-getter-text" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Passage&gt;.text</code>  <em>string</em> </span></h3>
<p>The raw text of the passage.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="passage-api-prototype-getter-title"><a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api-prototype-getter-title" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Passage&gt;.title</code>  <em>string</em> </span></h3>
<p>The title of the passage.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="passage-api-prototype-method-description"><a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api-prototype-method-description" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Passage&gt;.description()</code>  <em>string</em> </span></h3>
<p>Returns the description of the passage, created from either an excerpt of the passage or the <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-descriptions"><code>Config.passages.descriptions</code> setting</a>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>var passage = Story.get("The Ducky");

passage.description()   Returns the description of "The Ducky" passage
</code></pre>
<!-- *********************************************************************** -->
<h3 id="passage-api-prototype-method-processtext"><a href="https://www.motoslave.net/sugarcube/2/docs/#passage-api-prototype-method-processtext" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;Passage&gt;.processText()</code>  <em>string</em> </span></h3>
<p>Returns the processed text of the passage, created from applying <code>nobr</code> tag and image passage processing to its raw text.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>var passage = Story.get("The Ducky");

passage.processText()   Returns the fully processed text of "The Ducky" passage
</code></pre>

<!-- ***********************************************************************************************
	Save API
************************************************************************************************ -->
<h1 id="save-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save</code> API </span></h1>
<p role="note"><b>Note:</b>
There are several <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-saves">configuration settings for saves</a> that it would be wise for you to familiarize yourself with.
</p>
<p role="note" class="warning"><b>Warning:</b>
In-browser savesi.e., autosave and slot savesare largely incompatible with private browsing modes, which cause all in-browser storage mechanisms to either persist only for the lifetime of the browsing session or fail outright.
</p>
<!-- ***************************************************************************
	Save Objects
**************************************************************************** -->
<h2 id="save-api-save-objects"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-save-objects" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Save Objects </span></h2>
<p role="note"><b>Note:</b>
Adding additional properties directly to save objects is not recommended.  Instead, use the <code>metadata</code> property.
</p>
<p>Save objects have some of the following properties:</p>
<ul>
<li><strong><code>id</code>:</strong> (<em>string</em>) The story's save ID.</li>
<li><strong><code>state</code>:</strong> (<em>object</em>) The marshaled story history (see below for details).</li>
<li><strong><code>title</code>:</strong> (<em>string</em>) The title of the save.</li>
<li><strong><code>date</code>:</strong> (<em>integer</em>) The date when the save was created (in milliseconds elapsed since epoch).</li>
<li><strong><code>metadata</code>:</strong> (optional, <em>any</em>) Save metadata (end-user specified; must be JSON-serializable).</li>
<li><strong><code>version</code>:</strong> (optional, <em>any</em>) Save version (end-user specified via <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-version"><code>Config.saves.version</code></a>).</li>
</ul>
<p>The <strong><code>state</code></strong> object has the following properties:</p>
<ul>
<li><strong><code>history</code>:</strong> (<em>Array&lt;object&gt;</em>) The array of moment objects (see below for details).</li>
<li><strong><code>index</code>:</strong> (<em>integer</em>) The index of the active moment.</li>
<li><strong><code>expired</code>:</strong> (optional, <em>Array&lt;string&gt;</em>) The array of expired moment passage titles, exists only if any moments have expired.</li>
<li><strong><code>seed</code>:</strong> (optional, <em>string</em>) The seed of SugarCube's seedable PRNG, exists only if enabled.</li>
</ul>
<p>Each <strong><code>moment</code></strong> object has the following properties:</p>
<ul>
<li><strong><code>title</code>:</strong> (<em>string</em>) The title of the associated passage.</li>
<li><strong><code>variables</code>:</strong> (<em>object</em>) The current variable store object, which contains sigil-less name  value pairse.g., <code>$foo</code> exists as <code>foo</code>.</li>
<li><strong><code>pull</code>:</strong> (optional, <em>integer</em>) The current pull count of SugarCube's seedable PRNG, exists only if enabled.</li>
</ul>
<!-- ***************************************************************************
	Save General
**************************************************************************** -->
<h2 id="save-api-general"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-general" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>General </span></h2>
<!-- *********************************************************************** -->
<h3 id="save-api-method-clear"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-clear" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.clear()</code> </span></h3>
<p>Deletes all slot saves and the autosave, if it's enabled.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Save.clear()
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-get"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-get" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.get()</code> </span></h3>
<p>Returns the saves object.</p>
<!--

**NOTE:** Using `storage.get("saves")` to retrieve the saves object could return `null`, since an empty saves object does not get stored.  This method, which guarantees the return of a saves object, should be used instead.
-->
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Save.get()
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-ok"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-ok" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.ok()</code>  <em>boolean</em> </span></h3>
<p>Returns whether both the slot saves and autosave are available and ready.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (Save.ok()) {
	/* Code to manipulate saves. */
}
</code></pre>
<!-- ***************************************************************************
	Save Slots
**************************************************************************** -->
<h2 id="save-api-slots"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-slots" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Slots </span></h2>
<!-- *********************************************************************** -->
<h3 id="save-api-getter-slots-length"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-getter-slots-length" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.slots.length</code>  <em>integer</em> </span></h3>
<p>Returns the total number of available slots.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Save.slots.length
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-slots-count"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-count" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.slots.count()</code>  <em>integer</em> </span></h3>
<p>Returns the total number of filled slots.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Save.slots.count()
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-slots-delete"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-delete" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.slots.delete(slot)</code> </span></h3>
<p>Deletes a save from the given slot.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>slot</code>:</strong> (<em>integer</em>) Save slot index (0-based).</li>
</ul>
<h4>Examples:</h4>
<pre><code>Save.slots.delete(5)   Deletes the sixth slot save
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-slots-get"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-get" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.slots.get(slot)</code>  <em>object</em> </span></h3>
<p>Returns a save object from the given slot or <code>null</code>, if there was no save in the given slot.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>slot</code>:</strong> (<em>integer</em>) Save slot index (0-based).</li>
</ul>
<h4>Examples:</h4>
<pre><code>Save.slots.get(5)   Returns the sixth slot save
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-slots-has"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-has" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.slots.has(slot)</code>  <em>boolean</em> </span></h3>
<p>Returns whether the given slot is filled.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>slot</code>:</strong> (<em>integer</em>) Save slot index (0-based).</li>
</ul>
<h4>Examples:</h4>
<pre><code>if (Save.slots.has(5)) {
	/* Code to manipulate the sixth slot save. */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-slots-isempty"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-isempty" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.slots.isEmpty()</code>  <em>boolean</em> </span></h3>
<p>Returns whether there are any filled slots.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Save.slots.isEmpty()   Effectively returns: Save.slots.count() === 0
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-slots-load"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-load" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.slots.load(slot)</code> </span></h3>
<p>Loads a save from the given slot.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>slot</code>:</strong> (<em>integer</em>) Save slot index (0-based).</li>
</ul>
<h4>Examples:</h4>
<pre><code>Save.slots.load(5)   Load the sixth slot save
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-slots-ok"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-ok" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.slots.ok()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the slot saves are available and ready.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (Save.slots.ok()) {
	/* Code to manipulate slot saves. */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-slots-save"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-slots-save" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.slots.save(slot [, title [, metadata]])</code> </span></h3>
<p>Saves to the given slot.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>slot</code>:</strong> (<em>integer</em>) Save slot index (0-based).</li>
<li><strong><code>title</code>:</strong> (optional, <em>string</em>) The title of the save.  If omitted or <code>null</code>, defaults to the passage's description.</li>
<li><strong><code>metadata</code>:</strong> (optional, <em>any</em>) The data to be stored in the save object's <code>metadata</code> property.  Must be JSON-serializable.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Save to the sixth slot save with the default title and no metadata
Save.slots.save(5)

 Save to the sixth slot save with the title "Midgar" and no metadata
Save.slots.save(5, "Midgar")

 Save to the sixth slot save with the default title and metadata someMetadata
Save.slots.save(5, null, someMetadata)

 Save to the sixth slot save with the title "Midgar" and metadata someMetadata
Save.slots.save(5, "Midgar", someMetadata)
</code></pre>
<!-- ***************************************************************************
	Save Autosave
**************************************************************************** -->
<h2 id="save-api-autosave"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-autosave" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Autosave </span></h2>
<!-- *********************************************************************** -->
<h3 id="save-api-method-autosave-delete"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-autosave-delete" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.autosave.delete()</code> </span></h3>
<p>Deletes the autosave.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Save.autosave.delete()   Deletes the autosave
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-autosave-get"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-autosave-get" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.autosave.get()</code>  <em>object</em> </span></h3>
<p>Returns the save object from the autosave or <code>null</code>, if there was no autosave.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Save.autosave.get()   Returns the autosave
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-autosave-has"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-autosave-has" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.autosave.has()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the autosave is filled.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (Save.autosave.has()) {
	/* Code to manipulate the autosave. */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-autosave-load"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-autosave-load" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.autosave.load()</code> </span></h3>
<p>Loads the autosave.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Save.autosave.load()   Load the autosave
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-autosave-ok"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-autosave-ok" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.autosave.ok()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the autosave is available and ready.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (Save.autosave.ok()) {
	/* Code to manipulate the autosave. */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-autosave-save"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-autosave-save" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.autosave.save([title [, metadata]])</code> </span></h3>
<p>Saves to the autosave.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>title</code>:</strong> (optional, <em>string</em>) The title of the save.  If omitted or <code>null</code>, defaults to the passage's description.</li>
<li><strong><code>metadata</code>:</strong> (optional, <em>any</em>) The data to be stored in the save object's <code>metadata</code> property.  Must be JSON-serializable.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Save to the autosave with the default title and no metadata
Save.autosave.save()

 Save to the autosave with the title "Midgar" and no metadata
Save.autosave.save("Midgar")

 Save to the autosave with the default title and metadata someMetadata
Save.autosave.save(null, someMetadata)

 Save to the autosave with the title "Midgar" and metadata someMetadata
Save.autosave.save("Midgar", someMetadata)
</code></pre>
<!-- ***************************************************************************
	Save Disk
**************************************************************************** -->
<h2 id="save-api-disk"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-disk" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Disk </span></h2>
<!-- *********************************************************************** -->
<h3 id="save-api-method-export"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-export" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.export([filename [, metadata]])</code> </span></h3>
<p>Saves to disk.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.8.0</code>: Added <code>metadata</code> parameter.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>filename</code>:</strong> (optional, <em>string</em>) The base filename of the save, which gets slugified to remove most symbols.  Appended to this is a datestamp (format: <code>YYYMMDD-hhmmss</code>) and the file extension <code>.save</code>e.g., <code>"The Scooby Chronicles"</code> would result in the full filename: <code>the-scooby-chronicles-{datestamp}.save</code>.  If omitted or <code>null</code>, defaults to the story's title.</li>
<li><strong><code>metadata</code>:</strong> (optional, <em>any</em>) The data to be stored in the save object's <code>metadata</code> property.  Must be JSON-serializable.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Export a save with the default filename and no metadata
Save.export()

 Export a save with the filename "the-7th-fantasy-{datestamp}.save" and no metadata
Save.export("The 7th Fantasy")

 Export a save with the default filename and metadata someMetadata
Save.export(null, someMetadata)

 Export a save with the filename "the-7th-fantasy-{datestamp}.save" and metadata someMetadata
Save.export("The 7th Fantasy", someMetadata)
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-import"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-import" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.import(event)</code> </span></h3>
<p>Loads a save from disk.</p>
<p><strong>NOTE:</strong> You do not call this manually, it <em>must</em> be called by the <code>change</code> event handler of an <code>&lt;input type="file"&gt;</code> element.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>event</code>:</strong> (<em>event object</em>) The event object that was passed to the <code>change</code> event handler of the associated <code>&lt;input type="file"&gt;</code> element.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>// Assuming you're creating a file input something like the following
var input  = document.createElement('input');
input.type = 'file';
input.id   = 'saves-import-file';
input.name = 'saves-import-file';

// Set up Save.import() as the event handler for when a file has been chosen
jQuery(input).on('change', Save.import);
</code></pre>
<p>In case you needed to do more than simply load the save, you may do something like the following:</p>
<pre><code>// Assuming you're creating a file input something like the following
var input  = document.createElement('input');
input.type = 'file';
input.id   = 'saves-import-file';
input.name = 'saves-import-file';

// Set up a custom event handler for when a file has been chosen, which will call Save.import()
jQuery(input).on('change', function (ev) {
	// You must pass in the event when calling Save.import() manually
	Save.import(ev);

	// Put anything else you needed to do here
});
</code></pre>
<h5>As a self-contained link/button using macros</h5>
<pre><code>&lt;&lt;link "Load From Disk"&gt;&gt;
	&lt;&lt;script&gt;&gt;
	jQuery(document.createElement('input'))
		.prop('type', 'file')
		.on('change', Save.import)
		.trigger('click');
	&lt;&lt;/script&gt;&gt;
&lt;&lt;/link&gt;&gt;
</code></pre>
<!-- ***************************************************************************
	Save Serialization
**************************************************************************** -->
<h2 id="save-api-serialization"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-serialization" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Serialization </span></h2>
<!-- *********************************************************************** -->
<h3 id="save-api-method-serialize"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-serialize" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.serialize([metadata])</code>  <em>string</em> | <em>null</em> </span></h3>
<p>Returns a save as a serialized string, or <code>null</code> if saving is not allowed within the current context.</p>
<h4>History:</h4>
<ul>
<li><code>v2.21.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>metadata</code>:</strong> (optional, <em>any</em>) The data to be stored as metadata.  Must be JSON-serializable.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Serialize a save with no metadata
const myGameState = Save.serialize();
if (myGameState === null) {
	/* Failure.  You've disallowed saving. */
}

 Serialize a save with metadata someMetadata
const myGameState = Save.serialize(someMetadata);
if (myGameState === null) {
	/* Failure.  You've disallowed saving. */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-deserialize"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-deserialize" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.deserialize(saveStr)</code>  <em>any</em> | <em>null</em> </span></h3>
<p>Deserializes the given save string, created via <a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-serialize"><code>Save.serialize()</code></a>, and loads the save.  Returns the bundled metadata, if any, or <code>null</code> if the given save could not be deserialized and loaded.</p>
<h4>History:</h4>
<ul>
<li><code>v2.21.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>saveStr</code>:</strong> (<em>string</em>) The serialized save string.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Deserialize a save with no metadata
const loadResult = Save.deserialize(myGameState);
if (loadResult === null) {
	/* Failure.  An error was displayed to the player. */
}

 Deserialize a save with metadata
const loadResult = Save.deserialize(myGameState);
if (loadResult !== null) {
	/* Success.  Do something with loadResult, which contains the metadata. */
}
else {
	/* Failure.  An error was displayed to the player. */
}
</code></pre>
<!-- ***************************************************************************
	Save Events
**************************************************************************** -->
<h2 id="save-api-events"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-events" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Events </span></h2>
<!-- *********************************************************************** -->
<h3 id="save-api-method-onload-add"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-onload-add" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.onLoad.add(handler)</code> </span></h3>
<p>Performs any required processing before the save data is loadede.g., upgrading out-of-date save data.  The handler is passed one parameter, the save object to be processed.  If it encounters an unrecoverable problem during its processing, it may throw an exception containing an error message; the message will be displayed to the player and loading of the save will be terminated.</p>
<h4>History:</h4>
<ul>
<li><code>v2.36.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>handler</code>:</strong> (<em>function</em>) The handler function to be executed upon the loading of a save.</li>
</ul>
<h4>Handler parameters:</h4>
<ul>
<li><strong><code>save</code>:</strong> (<em>object</em>) The <a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-save-objects">save object</a> to be processed.</li>
</ul>
<h4>Examples:</h4>
<pre><code class="language-js">Save.onLoad.add(function (save) {
	/* code to process the save object before it's loaded */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-onload-clear"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-onload-clear" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.onLoad.clear()</code> </span></h3>
<p>Deletes all currently registered on-load handlers.</p>
<h4>History:</h4>
<ul>
<li><code>v2.36.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code class="language-js">Save.onLoad.clear();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-onload-delete"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-onload-delete" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.onLoad.delete(handler)</code>  <em>boolean</em> </span></h3>
<p>Deletes the specified on-load handler, returning <code>true</code> if the handler existed or <code>false</code> if not.</p>
<h4>History:</h4>
<ul>
<li><code>v2.36.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>handler</code>:</strong> (<em>function</em>) The handler function to be deleted.</li>
</ul>
<h4>Examples:</h4>
<pre><code class="language-js">// Given:
// 	let myOnLoadHandler = function (save) {
// 		/* code to process the save object before it's loaded */
// 	};
// 	Save.onLoad.add(myOnLoadHandler);

Save.onLoad.delete(myOnLoadHandler);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-getter-onload-size"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-getter-onload-size" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.onLoad.size</code>  <em>integer</em> </span></h3>
<p>Returns the number of currently registered on-load handlers.</p>
<h4>History:</h4>
<ul>
<li><code>v2.36.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code class="language-js">console.log('There are %d onLoad handlers registered.', Save.onLoad.size);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-onsave-add"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-onsave-add" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.onSave.add(handler)</code> </span></h3>
<p>Performs any required processing before the save data is saved.  The handlers is passed two parameters, the save object to be processed and save operation details object.</p>
<h4>History:</h4>
<ul>
<li><code>v2.36.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>handler</code>:</strong> (<em>function</em>) The handler function to be executed upon the saving of a save.</li>
</ul>
<h4>Handler parameters:</h4>
<ul>
<li><strong><code>save</code>:</strong> (<em>object</em>) The <a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-save-objects">save object</a> to be processed.</li>
<li><strong><code>details</code>:</strong> (<em>object</em>) The save operation details object.</li>
</ul>
<h4>Save operation details object:</h4>
<p>A save operation details object will have the following properties:</p>
<ul>
<li><strong><code>type</code>:</strong> (<em>string</em>) A string representing what caused the save operation.  Possible values are: <code>'autosave'</code>, <code>'disk'</code>, <code>'serialize'</code>, <code>'slot'</code>.</li>
</ul>
<h4>Examples:</h4>
<h5>Using only the save object parameter</h5>
<pre><code class="language-js">Save.onSave.add(function (save) {
	/* code to process the save object before it's saved */
});
</code></pre>
<h5>Using both the save object and operation details parameters</h5>
<pre><code class="language-js">Save.onSave.add(function (save, details) {
	switch (details.type) {
		case 'autosave': {
			/* code to process the save object from autosaves before it's saved */
			break;
		}

		case 'disk': {
			/* code to process the save object from disk saves before it's saved */
			break;
		}

		case 'serialize': {
			/* code to process the save object from serialize saves before it's saved */
			break;
		}

		default: { /* slot */
			/* code to process the save object from slot saves before it's saved */
			break;
		}
	}
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-onsave-clear"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-onsave-clear" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.onSave.clear()</code> </span></h3>
<p>Deletes all currently registered on-save handlers.</p>
<h4>History:</h4>
<ul>
<li><code>v2.36.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code class="language-js">Save.onSave.clear();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-method-onsave-delete"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-method-onsave-delete" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.onSave.delete(handler)</code>  <em>boolean</em> </span></h3>
<p>Deletes the specified on-save handler, returning <code>true</code> if the handler existed or <code>false</code> if not.</p>
<h4>History:</h4>
<ul>
<li><code>v2.36.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>handler</code>:</strong> (<em>function</em>) The handler function to be deleted.</li>
</ul>
<h4>Examples:</h4>
<pre><code class="language-js">// Given:
// 	let myOnSaveHandler = function (save, details) {
// 		/* code to process the save object before it's saved */
// 	};
// 	Save.onSave.add(myOnSaveHandler);

Save.onSave.delete(myOnSaveHandler);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="save-api-getter-onsave-size"><a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-getter-onsave-size" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Save.onSave.size</code>  <em>integer</em> </span></h3>
<p>Returns the number of currently registered on-save handlers.</p>
<h4>History:</h4>
<ul>
<li><code>v2.36.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code class="language-js">console.log('There are %d onSave handlers registered.', Save.onSave.size);
</code></pre>

<!-- ***********************************************************************************************
	Setting API
************************************************************************************************ -->
<h1 id="setting-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Setting</code> API </span></h1>
<p>Manages the Settings dialog and <a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-object-settings"><code>settings</code> object</a>.</p>
<p role="note" class="warning"><b>Warning:</b>
<code>Setting</code> API method calls <strong><em>must</em></strong> be placed within your project's JavaScript section (Twine&nbsp;2: the Story JavaScript; Twine&nbsp;1/Twee: a <code>script</code>-tagged passage) or settings will not function correctly.
</p>
<!-- *********************************************************************** -->
<h3 id="setting-api-method-addheader"><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-addheader" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Setting.addHeader(name [, desc])</code> </span></h3>
<p>Adds a header to the Settings dialog.</p>
<h4>History:</h4>
<ul>
<li><code>v2.7.1</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em>) Name of the header.</li>
<li><strong><code>desc</code>:</strong> (optional, <em>string</em>) Description explaining the header in greater detail.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Setting up a basic header
Setting.addHeader("Content Settings");

// Setting up a header w/ a description
Setting.addHeader("Content Settings", "Settings controlling what content is made available in the game.");
</code></pre>
<!-- *********************************************************************** -->
<h3 id="setting-api-method-addtoggle"><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-addtoggle" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Setting.addToggle(name, definition)</code> </span></h3>
<p>Adds the named property to the <code>settings</code> object and a toggle control for it to the Settings dialog.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.26.0</code>: Added <code>desc</code> property to definition object.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em>) Name of the <code>settings</code> property to add, which the control will manage.</li>
<li><strong><code>definition</code>:</strong> (<em>object</em>) Definition of the control.</li>
</ul>
<h4>Definition object:</h4>
<p>A toggle definition object should have some of the following properties:</p>
<ul>
<li><strong><code>label</code>:</strong> (<em>string</em>) Label to use for the control.</li>
<li><strong><code>desc</code>:</strong> (optional, <em>string</em>) Description explaining the control in greater detail.</li>
<li><strong><code>default</code>:</strong> (optional, <em>boolean</em>) The default value for the setting and default state of the control.  Leaving it undefined means to use <code>false</code> as the default.</li>
<li><strong><code>onInit</code>:</strong> (optional, <em>function</em>) The function to call during initialization.</li>
<li><strong><code>onChange</code>:</strong> (optional, <em>function</em>) The function to call when the control's state is changed.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic toggle setting</h5>
<pre><code>// Setting up a basic toggle control for the settings property 'mature'
Setting.addToggle("mature", {
	label : "Content for mature audiences?"
}); // default value not defined, so false is used
</code></pre>
<h5>Toggle that adds/removes a CSS class</h5>
<pre><code>// Setting up a toggle control for the settings property 'widescreen' w/ callbacks
var settingWidescreenHandler = function () {
	if (settings.widescreen) { // is true
		$("html").addClass("widescreen");
	}
	else { // is false
		$("html").removeClass("widescreen");
	}
};
Setting.addToggle("widescreen", {
	label    : "Allow the story to use the full width of your browser window?",
	default  : false,
	onInit   : settingWidescreenHandler,
	onChange : settingWidescreenHandler
});
</code></pre>
<p>And the requisite CSS style rule:</p>
<pre><code>html.widescreen #passages {
	max-width: none;
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="setting-api-method-addlist"><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-addlist" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Setting.addList(name, definition)</code> </span></h3>
<p>Adds the named property to the <code>settings</code> object and a list control for it to the Settings dialog.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.26.0</code>: Added <code>desc</code> property to definition object.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em>) Name of the <code>settings</code> property to add, which the control will manage.</li>
<li><strong><code>definition</code>:</strong> (<em>object</em>) Definition of the control.</li>
</ul>
<h4>Definition object:</h4>
<p>A list definition object should have some of the following properties:</p>
<ul>
<li><strong><code>label</code>:</strong> (<em>string</em>) Label to use for the control.</li>
<li><strong><code>list</code>:</strong> (<em>Array&lt;string&gt;</em>) The array of items.</li>
<li><strong><code>desc</code>:</strong> (optional, <em>string</em>) Description explaining the control in greater detail.</li>
<li><strong><code>default</code>:</strong> (optional, <em>[as <strong><code>list</code></strong> array]</em>) The default value for the setting and default state of the control.  It should have the same value as one of the members of the <strong><code>list</code></strong> array.  Leaving it undefined means to use the first array member as the default.</li>
<li><strong><code>onInit</code>:</strong> (optional, <em>function</em>) The function to call during initialization.</li>
<li><strong><code>onChange</code>:</strong> (optional, <em>function</em>) The function to call when the control's state is changed.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Setting up a basic list control for the settings property 'difficulty'
Setting.addList("difficulty", {
	label   : "Choose a difficulty level.",
	list    : ["Easy", "Normal", "Hard", "INSANE"],
	default : "Normal"
});

// Setting up a list control for the settings property 'theme' w/ callbacks
var settingThemeNames = ["(none)", "Bright Lights", "Charcoal", "Midnight", "Tinsel City"];
var settingThemeHandler = function () {
	// cache the jQuery-wrapped &lt;html&gt; element
	var $html = $("html");

	// remove any existing theme class
	$html.removeClass("theme-bright-lights theme-charcoal theme-midnight theme-tinsel-city");

	// switch on the theme name to add the requested theme class
	switch (settings.theme) {
	case "Bright Lights":
		$html.addClass("theme-bright-lights");
		break;
	case "Charcoal":
		$html.addClass("theme-charcoal");
		break;
	case "Midnight":
		$html.addClass("theme-midnight");
		break;
	case "Tinsel City":
		$html.addClass("theme-tinsel-city");
		break;
	}
};
Setting.addList("theme", {
	label    : "Choose a theme.",
	list     : settingThemeNames,
	onInit   : settingThemeHandler,
	onChange : settingThemeHandler
}); // default value not defined, so the first array member "(none)" is used
</code></pre>
<!--

// remove any existing theme class and add the requested one
$("html")
	.removeClass(this.list.slice(1).map(function (name) {
		return Util.slugify("theme-" + name);
	}).join(" "))
	.addClass(Util.slugify("theme-" + this.value));
-->
<!-- *********************************************************************** -->
<h3 id="setting-api-method-addrange"><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-addrange" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Setting.addRange(name, definition)</code> </span></h3>
<p>Adds the named property to the <code>settings</code> object and a range control for it to the Settings dialog.</p>
<h4>History:</h4>
<ul>
<li><code>v2.26.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em>) Name of the <code>settings</code> property to add, which the control will manage.</li>
<li><strong><code>definition</code>:</strong> (<em>object</em>) Definition of the control.</li>
</ul>
<h4>Definition object:</h4>
<p>A range definition object should have some of the following properties:</p>
<ul>
<li><strong><code>label</code>:</strong> (<em>string</em>) Label to use for the control.</li>
<li><strong><code>min</code>:</strong> (<em>number</em>) The minimum value.</li>
<li><strong><code>max</code>:</strong> (<em>number</em>) The maximum value.</li>
<li><strong><code>step</code>:</strong> (<em>number</em>) Limits the increments to which the value may be set.  It must be evenly divisible into the full rangei.e., <code>max - min</code>.</li>
<li><strong><code>desc</code>:</strong> (optional, <em>string</em>) Description explaining the control in greater detail.</li>
<li><strong><code>default</code>:</strong> (optional, <em>number</em>) The default value for the setting and default state of the control.  Leaving it undefined means to use the value of <code>max</code> as the default.</li>
<li><strong><code>onInit</code>:</strong> (optional, <em>function</em>) The function to call during initialization.</li>
<li><strong><code>onChange</code>:</strong> (optional, <em>function</em>) The function to call when the control's state is changed.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Setting up a volume control for the settings property 'masterVolume' w/ callback
Setting.addRange("masterVolume", {
	label    : "Master volume.",
	min      : 0,
	max      : 10,
	step     : 1,
	onChange : function () {
		SimpleAudio.volume(settings.masterVolume / 10);
	}
}); // default value not defined, so max value (10) is used
</code></pre>
<!--
// NOTE: Whole numbers (range: 010) are used within the control itself for
// the sake of Internet Explorer, whose range input value tooltip only does
// something useful if the value is an integer.  The value is divided by 10
// when passed to SimpleAudio.volume(), since volume levels range 01.
-->
<!-- *********************************************************************** -->
<h3 id="setting-api-method-load"><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-load" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Setting.load()</code> </span></h3>
<p>Loads the settings from storage.</p>
<p role="note"><b>Note:</b>
The API automatically calls this method at startup, so you should never need to call this method manually.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Setting.load();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="setting-api-method-reset"><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-reset" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Setting.reset([name])</code> </span></h3>
<p>Resets the setting with the given name to its default value.  If no name is given, resets all settings.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (optional, <em>string</em>) Name of the <code>settings</code> object property to reset.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Reset the setting 'difficulty'
Setting.reset("difficulty");

// Reset all settings
Setting.reset();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="setting-api-method-save"><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-save" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Setting.save()</code> </span></h3>
<p>Saves the settings to storage.</p>
<p role="note"><b>Note:</b>
The controls of the Settings dialog automatically call this method when settings are changed, so you should normally never need to call this method manually.  Only when manually modifying the values of <code>settings</code> object properties, outside of the controls, would you need to call this method.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>Setting.save();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="setting-api-object-settings"><a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-object-settings" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>settings</code> object </span></h3>
<p>A prototype-less generic object whose properties and values are defined by the <a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-addtoggle"><code>Setting.addToggle()</code></a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-addlist"><code>Setting.addList()</code></a>, and <a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-addrange"><code>Setting.addRange()</code></a> methods.</p>
<p>Normally, the values of its properties are automatically managed by their associated Settings dialog control.  If necessary, however, you may manually change their valuesn.b. you'll need to call the <a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api-method-save"><code>Setting.save()</code></a> after having done so.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>

<!-- ***********************************************************************************************
	SimpleAudio API
************************************************************************************************ -->
<h1 id="simpleaudio-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio</code> API </span></h1>
<p>The core audio subsystem and backend for the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-audio">audio macros</a>.</p>
<p role="note" class="see"><b>See Also:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api"><code>AudioTrack</code> API</a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api"><code>AudioRunner</code> API</a>, and <a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api"><code>AudioList</code> API</a>.
</p>
<h4 id="simpleaudio-api-limitations"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-limitations" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Audio limitations </span></h4>
<p>The audio subsystem is based upon the HTML Media Elements APIs and comes with some built-in limitations:</p>
<ol>
<li>True gapless transitions between tracks is not supported.</li>
<li>In mobile browsers, playback volume is controlled by the device hardware.  Thus, all volume adjustments are ignored by the device, though muting should work normally.</li>
<li>In mobile browsers and, more recently, most desktop browsers, playback must be initiated by the playergenerally via click/touch.  In these cases, audio will not automatically play on the starting passage, nor is it likely to play if initiated from within asynchronous codee.g., via <code>&lt;&lt;timed&gt;&gt;</code>though this ultimately depends on various factors.  A simple solution for the former is to use some kind of click/touch-through screene.g., a splash screen, which the player goes through to the real starting passage.  The latter is harder to resolve, so is best avoided.</li>
<li>The load and playback states of tracks are not currently recorded within the active play session or saves.  Thus, if you need either to be recoverable, then you'll have to handle that yourself.</li>
</ol>
<!-- ***************************************************************************
	SimpleAudio General
**************************************************************************** -->
<h2 id="simpleaudio-api-general"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-general" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>General </span></h2>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-load"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-load" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.load()</code> </span></h3>
<p>Pauses playback of <em>all</em> currently registered tracks and, if they're not already in the process of loading, force them to drop any existing data and begin loading.</p>
<p role="note" class="warning"><b>Warning:</b>
This <em>should not</em> be done lightly if your audio sources are on the network, as it forces players to begin downloading them.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>SimpleAudio.load();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-loadwithscreen"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-loadwithscreen" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.loadWithScreen()</code> </span></h3>
<p>Displays the loading screen until <em>all</em> currently registered audio tracks have either loaded to a playable state or aborted loading due to errors.  The loading process is as described in <a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-load"><code>SimpleAudio.load()</code></a>.</p>
<p role="note" class="warning"><b>Warning:</b>
This <em>should not</em> be done lightly if your audio sources are on the network, as it forces players to begin downloading them.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>SimpleAudio.loadWithScreen();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-mute"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-mute" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.mute([state])</code>  <strong>get:</strong> <em>boolean</em> | <strong>set:</strong> <em>undefined</em> </span></h3>
<p>Gets or sets the mute state for the master volume (default: <code>false</code>).</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>state</code>:</strong> (optional, <em>boolean</em>) The mute state.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Get the current master volume mute state.
var isMuted = SimpleAudio.mute();

// Mute the master volume.
SimpleAudio.mute(true);

// Unmute the master volume.
SimpleAudio.mute(false);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-muteonhidden"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-muteonhidden" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.muteOnHidden([state])</code>  <strong>get:</strong> <em>boolean</em> | <strong>set:</strong> <em>undefined</em> </span></h3>
<p>Gets or sets the mute-on-hidden state for the master volume (default: <code>false</code>).  The mute-on-hidden state controls whether the master volume is automatically muted/unmuted when the story's browser tab loses/gains visibility.  Loss of visibility is defined as when the browser window is either switched to another tab or minimized.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>state</code>:</strong> (optional, <em>boolean</em>) The mute-on-hidden state.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Get the current master volume mute-on-hidden state.
var isMuteOnHidden = SimpleAudio.muteOnHidden();

// Enable automatic muting of the master volume when visibility is lost.
SimpleAudio.muteOnHidden(true);

// Disable automatic muting of the master volume when visibility is lost.
SimpleAudio.muteOnHidden(false);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-select"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-select" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.select(selector)</code>  <em><code>AudioRunner</code> object</em> </span></h3>
<p>Returns an <a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api"><code>AudioRunner</code> instance</a> for the tracks matching the given selector.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>selector</code>:</strong> (<em>string</em>) The list of audio track(s) and/or group ID(s), separated by spaces.  There are several predefined group IDs (<code>:all</code>, <code>:looped</code>, <code>:muted</code>, <code>:paused</code>, <code>:playing</code>).  The <code>:not()</code> group modifier syntax (<code>groupId:not(selector)</code>) allows a group to have some of its tracks excluded from selection.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>SimpleAudio.select(":ui")   Returns the AudioRunner instance for the tracks matching ":ui"
</code></pre>
<h5>Typical usage</h5>
<pre><code>// Return the AudioTrack instance matching "swamped" and do something with it
SimpleAudio.select("swamped").volume(1).play();

// Start playback of paused audio tracks
SimpleAudio.select(":paused").play();

// Pause playback of playing audio tracks
SimpleAudio.select(":playing").pause();

// Stop playback of playing audio tracks
SimpleAudio.select(":playing").stop();

// Stop playback of all audio tracks (not uniquely part of a playlist)
SimpleAudio.select(":all").stop();

// Stop playback of playing audio tracks except those in the ":ui" group
SimpleAudio.select(":playing:not(:ui)").stop();

// Change the volume of all audio tracks except those in the ":ui" group
// to 40%, without changing the current playback state
SimpleAudio.select(":all:not(:ui)").volume(0.40);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-stop"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-stop" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.stop()</code> </span></h3>
<p>Stops playback of <em>all</em> currently registered tracks.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>SimpleAudio.stop();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-unload"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-unload" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.unload()</code> </span></h3>
<p>Stops playback of <em>all</em> currently registered tracks and force them to drop any existing data.</p>
<p role="note"><b>Note:</b>
Once a track has been unloaded, playback cannot occur until it is reloaded.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>SimpleAudio.unload();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-volume"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-volume" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.volume([level])</code>  <strong>get:</strong> <em>number</em> | <strong>set:</strong> <em>undefined</em> </span></h3>
<p>Gets or sets the master volume level (default: <code>1</code>).</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>level</code>:</strong> (optional, <em>number</em>) The volume level to set.  Valid values are floating-point numbers in the range <code>0</code> (silent) to <code>1</code> (loudest)e.g., <code>0</code> is 0%, <code>0.5</code> is 50%, <code>1</code> is 100%.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Get the current master volume level.
var currentMasterVolume = SimpleAudio.volume();

// Set the master volume level to 75%.
SimpleAudio.volume(0.75);
</code></pre>
<!-- ***************************************************************************
	SimpleAudio Tracks
**************************************************************************** -->
<h2 id="simpleaudio-api-tracks"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-tracks" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Tracks </span></h2>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-tracks-add"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-tracks-add" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.tracks.add(trackId, sources)</code> </span></h3>
<p>Adds an audio track with the given track ID.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>trackId</code>:</strong> (<em>string</em>) The ID of the track, which will be used to reference it.</li>
<li><strong><code>sources</code>:</strong> (<em>string</em> | <em>Array&lt;string&gt;</em>) The audio sources for the track, which may be a list of sources or an array.  Only one is required, though supplying additional sources in differing formats is recommended, as no single format is supported by all browsers.  A source must be either a URL (absolute or relative) to an audio resource, the name of an audio passage, or a data URI.  In rare cases where the audio format cannot be automatically detected from the source (URLs are parsed for a file extension, data URIs are parsed for the media type), a format specifier may be prepended to the front of each source to manually specify the format (syntax: <code>formatId|</code>, where <code>formatId</code> is the audio formatgenerally, whatever the file extension would normally be; e.g., <code>mp3</code>, <code>mp4</code>, <code>ogg</code>, <code>weba</code>, <code>wav</code>).</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Cache a track with the ID "boom" and one source via relative URL
SimpleAudio.tracks.add("boom", "media/audio/explosion.mp3");

// Cache a track with the ID "boom" and one source via audio passage
SimpleAudio.tracks.add("boom", "explosion");

// Cache a track with the ID "bgm_space" and two sources via relative URLs
SimpleAudio.tracks.add("bgm_space", "media/audio/space_quest.mp3", "media/audio/space_quest.ogg");

// Cache a track with the ID "what" and one source via URL with a format specifier
SimpleAudio.tracks.add("what", "mp3|http://an-audio-service.com/a-user/a-track-id");
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-tracks-clear"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-tracks-clear" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.tracks.clear()</code> </span></h3>
<p>Deletes all audio tracks.</p>
<p role="note"><b>Note:</b>
Cannot delete tracks solely under the control of a playlist.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>SimpleAudio.tracks.clear();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-tracks-delete"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-tracks-delete" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.tracks.delete(trackId)</code> </span></h3>
<p>Deletes the audio track with the given track ID.</p>
<p role="note"><b>Note:</b>
Cannot delete tracks solely under the control of a playlist.
</p>
<p role="note" class="warning"><b>Warning:</b>
Does not currently remove the track from either groups or playlists.  Thus, any groups or playlists containing the deleted track should be rebuilt.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>trackId</code>:</strong> (<em>string</em>) The ID of the track.</li>
</ul>
<h4>Examples:</h4>
<pre><code>SimpleAudio.tracks.delete("bgm_space");
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-tracks-get"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-tracks-get" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.tracks.get(trackId)</code>  <em><code>AudioTrack</code> object</em> | <em>null</em> </span></h3>
<p>Returns the <a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api"><code>AudioTrack</code> instance</a> with the given track ID, or <code>null</code> on failure.</p>
<p role="note"><b>Note:</b>
To affect multiple tracks and/or groups at once, see the <a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-select"><code>SimpleAudio.select()</code> method</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>trackId</code>:</strong> (<em>string</em>) The ID of the track.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>SimpleAudio.tracks.get("swamped")   Returns the AudioTrack instance matching "swamped"
</code></pre>
<h5>Typical usage</h5>
<pre><code>// Return the AudioTrack instance matching "swamped" and do something with it
SimpleAudio.tracks.get("swamped").volume(1).play();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-tracks-has"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-tracks-has" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.tracks.has(trackId)</code>  <em>boolean</em> </span></h3>
<p>Returns whether an audio track with the given track ID exists.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>trackId</code>:</strong> (<em>string</em>) The ID of the track.</li>
</ul>
<h4>Examples:</h4>
<pre><code>if (SimpleAudio.tracks.has("bgm_space")) {
	// Track "bgm_space" exists.
}
</code></pre>
<!-- ***************************************************************************
	SimpleAudio Groups
**************************************************************************** -->
<h2 id="simpleaudio-api-groups"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-groups" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Groups </span></h2>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-groups-add"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-groups-add" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.groups.add(groupId, trackIds)</code> </span></h3>
<p>Adds an audio group with the given group ID.  Groups are useful for applying actions to multiple tracks simultaneously and/or excluding the included tracks from a larger set when applying actions.</p>
<p role="note"><b>Note:</b>
If you want to play tracks in a sequence, then you want a <a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-lists-add">playlist</a> instead.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>groupId</code>:</strong> (<em>string</em>) The ID of the group, which will be used to reference it and <em>must</em> begin with a colon.  <strong>NOTE:</strong> There are several predefined group IDs (<code>:all</code>, <code>:looped</code>, <code>:muted</code>, <code>:paused</code>, <code>:playing</code>) and the <code>:not</code> group modifier that cannot be reused/overwritten.</li>
<li><strong><code>trackIds</code>:</strong> (<em>string</em> | <em>Array&lt;string&gt;</em>) The IDs of the tracks to make part of the group, which may be a list of track IDs or an array.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Set up a group ":ui" with the tracks: "ui_beep", "ui_boop", and "ui_swish"
SimpleAudio.groups.add(":ui", "ui_beep", "ui_boop", "ui_swish");
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-groups-clear"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-groups-clear" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.groups.clear()</code> </span></h3>
<p>Deletes all audio groups.</p>
<p role="note"><b>Note:</b>
Only deletes the groups themselves, does not affect their component tracks.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>SimpleAudio.groups.clear();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-groups-delete"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-groups-delete" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.groups.delete(groupId)</code> </span></h3>
<p>Deletes the audio group with the given group ID.</p>
<p role="note"><b>Note:</b>
Only deletes the group itself, does not affect its component tracks.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>groupId</code>:</strong> (<em>string</em>) The ID of the group.</li>
</ul>
<h4>Examples:</h4>
<pre><code>SimpleAudio.groups.delete(":ui");
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-groups-get"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-groups-get" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.groups.get(groupId)</code>  <em>Array&lt;string&gt;</em> | <em>null</em> </span></h3>
<p>Returns the array of track IDs with the given group ID, or <code>null</code> on failure.</p>
<p role="note"><b>Note:</b>
To actually affect multiple tracks and/or groups, see the <a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-select"><code>SimpleAudio.select()</code> method</a>.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>groupId</code>:</strong> (<em>string</em>) The ID of the group.</li>
</ul>
<h4>Examples:</h4>
<pre><code>SimpleAudio.groups.get(":ui")   Returns the array of track IDs matching ":ui"
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-groups-has"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-groups-has" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.groups.has(groupId)</code>  <em>boolean</em> </span></h3>
<p>Returns whether an audio group with the given group ID exists.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>groupId</code>:</strong> (<em>string</em>) The ID of the group.</li>
</ul>
<h4>Examples:</h4>
<pre><code>if (SimpleAudio.groups.has(":ui")) {
	// Group ":ui" exists.
}
</code></pre>
<!-- ***************************************************************************
	SimpleAudio Lists
**************************************************************************** -->
<h2 id="simpleaudio-api-lists"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-lists" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Lists </span></h2>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-lists-add"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-lists-add" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.lists.add(listId, sources)</code> </span></h3>
<p>Adds a playlist with the given list ID.  Playlists are useful for playing tracks in a sequencei.e., one after another.</p>
<p role="note"><b>Note:</b>
If you simply want to apply actions to multiple tracks simultaneously, then you want a <a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-groups-add">group</a> instead.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Changed descriptor object <code>copy</code> property to <code>own</code>.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>listId</code>:</strong> (<em>string</em>) The ID of the list, which will be used to reference it.</li>
<li><strong><code>sources</code>:</strong> (<em>string</em> | <em>object</em> | <em>Array&lt;string | object&gt;</em>) The track IDs or descriptors of the tracks to make part of the list, which may be specified as a list or an array.</li>
</ul>
<h4>Descriptor objects:</h4>
<p>Track descriptor objects come in two forms and should have some of the noted properties:</p>
<ul>
<li><strong>Existing track form: <code>{ id, [own], [volume] }</code></strong>
<ul>
<li><strong><code>id</code>:</strong> (<em>string</em>) The ID of an existing track.</li>
<li><strong><code>own</code>:</strong> (optional, <em>boolean</em>) When <code>true</code>, signifies that the playlist should create its own independent copy of the track, rather than simply referencing the existing instance.  Owned copies are solely under the control of their playlist and cannot be selected with either the <a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-tracks-get"><code>SimpleAudio.tracks.get()</code> method</a> or the <a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-select"><code>SimpleAudio.select()</code> method</a>.</li>
<li><strong><code>volume</code>:</strong> (optional, <em>number</em>) The base volume level of the track within the playlist.  If omitted, defaults to the track's current volume.  Valid values are floating-point numbers in the range <code>0</code> (silent) to <code>1</code> (loudest)e.g., <code>0</code> is 0%, <code>0.5</code> is 50%, <code>1</code> is 100%.</li>
</ul>
</li>
<li><strong>New track form: <code>{ sources, [volume] }</code></strong>
<ul>
<li><strong><code>sources</code>:</strong> (<em>Array&lt;string&gt;</em>) The audio sources for the track.  Only one is required, though supplying additional sources in differing formats is recommended, as no single format is supported by all browsers.  A source must be either a URL (absolute or relative) to an audio resource, the name of an audio passage, or a data URI.  In rare cases where the audio format cannot be automatically detected from the source (URLs are parsed for a file extension, data URIs are parsed for the media type), a format specifier may be prepended to the front of each source to manually specify the format (syntax: <code>formatId|</code>, where <code>formatId</code> is the audio formatgenerally, whatever the file extension would normally be; e.g., <code>mp3</code>, <code>mp4</code>, <code>ogg</code>, <code>weba</code>, <code>wav</code>).</li>
<li><strong><code>volume</code>:</strong> (optional, <em>number</em>) The base volume level of the track within the playlist.  If omitted, defaults to <code>1</code> (loudest).  Valid values are floating-point numbers in the range <code>0</code> (silent) to <code>1</code> (loudest)e.g., <code>0</code> is 0%, <code>0.5</code> is 50%, <code>1</code> is 100%.</li>
</ul>
</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage with track IDs</h5>
<pre><code>// Add existing tracks at their current volumes
SimpleAudio.lists.add("bgm_lacuna", "swamped", "heavens_a_lie", "closer", "to_the_edge");
</code></pre>
<h5>Using a mix of track IDs and descriptors</h5>
<pre><code>SimpleAudio.lists.add("bgm_lacuna",
	// Add existing track "swamped" at its current volume
	"swamped",

	// Add existing track "heavens_a_lie" at 50% volume
	{
		id     : "heavens_a_lie",
		volume : 0.5
	},

	// Add an owned copy of existing track "closer" at its current volume
	{
		id  : "closer",
		own : true
	},

	// Add an owned copy of existing track "to_the_edge" at 100% volume
	{
		id     : "to_the_edge",
		own    : true,
		volume : 1
	}
);
</code></pre>
<h5>Using descriptors with sources</h5>
<pre><code>SimpleAudio.lists.add("bgm_lacuna",
	// Add a track from the given sources at the default volume (100%)
	{
		sources : ["media/audio/Swamped.mp3"]
	}

	// Add a track from the given sources at 50% volume
	{
		sources : ["media/audio/Heaven's_A_Lie.mp3"],
		volume  : 0.5
	},

	// Add a track from the given sources at the default volume (100%)
	{
		sources : ["media/audio/Closer.mp3"]
	},

	// Add a track from the given sources at 100% volume
	{
		sources : ["media/audio/To_The_Edge.mp3"],
		volume  : 1
	}
);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-lists-clear"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-lists-clear" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.lists.clear()</code> </span></h3>
<p>Deletes all playlists.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>SimpleAudio.lists.clear();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-lists-delete"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-lists-delete" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.lists.delete(listId)</code> </span></h3>
<p>Deletes the playlist with the given list ID.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>listId</code>:</strong> (<em>string</em>) The ID of the playlist.</li>
</ul>
<h4>Examples:</h4>
<pre><code>SimpleAudio.lists.delete("bgm_lacuna");
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-lists-get"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-lists-get" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.lists.get(listId)</code>  <em><code>AudioList</code> object</em> | <em>null</em> </span></h3>
<p>Returns the <a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api"><code>AudioList</code> instance</a> with the given list ID, or <code>null</code> on failure.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>listId</code>:</strong> (<em>string</em>) The ID of the playlist.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>SimpleAudio.lists.get("bgm_lacuna")   Returns the AudioList instance matching "bgm_lacuna"
</code></pre>
<h5>Typical usage</h5>
<pre><code>// Return the AudioList instance matching "bgm_lacuna" and do something with it
SimpleAudio.lists.get("bgm_lacuna").volume(1).loop(true).play();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="simpleaudio-api-method-lists-has"><a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api-method-lists-has" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>SimpleAudio.lists.has(listId)</code>  <em>boolean</em> </span></h3>
<p>Returns whether a playlist with the given list ID exists.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>listId</code>:</strong> (<em>string</em>) The ID of the playlist.</li>
</ul>
<h4>Examples:</h4>
<pre><code>if (SimpleAudio.lists.has("bgm_lacuna")) {
	// Playlist "bgm_lacuna" exists.
}
</code></pre>

<!-- ***************************************************************************
	AudioTrack API
**************************************************************************** -->
<h1 id="audiotrack-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>AudioTrack</code> API </span></h1>
<p>Audio tracks encapsulate and provide a consistent interface to an audio resource.</p>
<p role="note" class="see"><b>See Also:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api"><code>SimpleAudio</code> API</a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api"><code>AudioRunner</code> API</a>, and <a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api"><code>AudioList</code> API</a>.
</p>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-clone"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-clone" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.clone()</code>  <em><code>AudioTrack</code> object</em> </span></h3>
<p>Returns a new independent copy of the track.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>var trackCopy = aTrack.clone();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-duration"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-duration" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.duration()</code>  <em>number</em> </span></h3>
<p>Returns the track's total playtime in seconds, <code>Infinity</code> for a stream, or <code>NaN</code> if no metadata exists.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>var trackLength = aTrack.duration();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-fade"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-fade" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.fade(duration , toVol [, fromVol])</code>  <em><code>Promise</code> object</em> </span></h3>
<p>Starts playback of the track and fades it between the specified starting and destination volume levels over the specified number of seconds.</p>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-audio-pauseonfadetozero"><code>Config.audio.pauseOnFadeToZero</code> setting</a> (default: <code>true</code>) determines whether the audio subsystem automatically pauses tracks that have been faded to <code>0</code> volume (silent).
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>duration</code>:</strong> (<em>number</em>) The number of seconds over which the track should be faded.</li>
<li><strong><code>toVol</code>:</strong> (<em>number</em>) The destination volume level.</li>
<li><strong><code>fromVol</code>:</strong> (optional, <em>number</em>) The starting volume level.  If omitted, defaults to the track's current volume level.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Fade the track from volume 0 to 1 over 6 seconds.
aTrack.fade(6, 1, 0);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-fadein"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-fadein" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.fadeIn(duration [, fromVol])</code>  <em><code>Promise</code> object</em> </span></h3>
<p>Starts playback of the track and fades it from the specified volume level to <code>1</code> (loudest) over the specified number of seconds.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Updated to return a <code>Promise</code>.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>duration</code>:</strong> (<em>number</em>) The number of seconds over which the track should be faded.</li>
<li><strong><code>fromVol</code>:</strong> (optional, <em>number</em>) The starting volume level.  If omitted, defaults to the track's current volume level.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Fade the track in from volume 0 over 5 seconds.
aTrack.fadeIn(5, 0);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-fadeout"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-fadeout" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.fadeOut(duration [, fromVol])</code>  <em><code>Promise</code> object</em> </span></h3>
<p>Starts playback of the track and fades it from the specified volume level to <code>0</code> (silent) over the specified number of seconds.</p>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-audio-pauseonfadetozero"><code>Config.audio.pauseOnFadeToZero</code> setting</a> (default: <code>true</code>) determines whether the audio subsystem automatically pauses tracks that have been faded to <code>0</code> volume (silent).
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Updated to return a <code>Promise</code>.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>duration</code>:</strong> (<em>number</em>) The number of seconds over which the track should be faded.</li>
<li><strong><code>fromVol</code>:</strong> (optional, <em>number</em>) The starting volume level.  If omitted, defaults to the track's current volume level.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Fade the track out from volume 1 over 8 seconds.
aTrack.fadeOut(8, 1);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-fadestop"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-fadestop" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.fadeStop()</code> </span></h3>
<p>Interrupts an in-progress fade of the track, or does nothing if no fade is progressing.</p>
<p role="note"><b>Note:</b>
This does not alter the volume level.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>aTrack.fadeStop();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-hasdata"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-hasdata" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.hasData()</code>  <em>boolean</em> </span></h3>
<p>Returns whether enough data has been loaded to play the track through to the end without interruption.</p>
<p role="note"><b>Note:</b>
This is an estimate calculated by the browser based upon the currently downloaded data and the download rate.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.hasData()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-hasmetadata"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-hasmetadata" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.hasMetadata()</code>  <em>boolean</em> </span></h3>
<p>Returns whether, at least, the track's metadata has been loaded.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.hasMetadata()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-hasnodata"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-hasnodata" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.hasNoData()</code>  <em>boolean</em> </span></h3>
<p>Returns whether none of the track's data has been loaded.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.hasNoData()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-hassomedata"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-hassomedata" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.hasSomeData()</code>  <em>boolean</em> </span></h3>
<p>Returns whether, at least, some of the track's data has been loaded.</p>
<p role="note" class="tip"><b>Tip:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-hasdata"><code>&lt;AudioTrack&gt;.hasData()</code> method</a> is generally more useful.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.hasSomeData()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-hassource"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-hassource" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.hasSource()</code>  <em>boolean</em> </span></h3>
<p>Returns whether any valid sources were registered.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.hasSource()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-isended"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isended" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.isEnded()</code>  <em>boolean</em> </span></h3>
<p>Returns whether playback of the track has ended.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.isEnded()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-isfading"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isfading" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.isFading()</code>  <em>boolean</em> </span></h3>
<p>Returns whether a fade is in-progress on the track.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.isFading()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-isfailed"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isfailed" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.isFailed()</code>  <em>boolean</em> </span></h3>
<p>Returns whether an error has occurred.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.isFailed()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-isloading"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isloading" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.isLoading()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the track is loading data.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.isLoading()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-ispaused"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-ispaused" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.isPaused()</code>  <em>boolean</em> </span></h3>
<p>Returns whether playback of the track has been paused.</p>
<!-- **NOTE:** This does not have a 1-to-1 correspondence with the track's `paused` state, which is set whenever playback is not progressinge.g., the `paused` state is also set when a track is in the `ended` state. -->
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.isPaused()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-isplaying"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isplaying" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.isPlaying()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the track is playing.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.isPlaying()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-isseeking"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isseeking" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.isSeeking()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the track is seeking.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.isSeeking()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-isstopped"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isstopped" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.isStopped()</code>  <em>boolean</em> </span></h3>
<p>Returns whether playback of the track has been stopped.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.isStopped()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-isunavailable"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isunavailable" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.isUnavailable()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the track is currently unavailable for playback.  Possible reasons include: no valid sources are registered, no sources are currently loaded, an error has occurred.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.isUnavailable()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-isunloaded"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-isunloaded" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.isUnloaded()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the track's sources are currently unloaded.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aTrack.isUnloaded()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-load"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-load" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.load()</code> </span></h3>
<p>Pauses playback of the track and, if it's not already in the process of loading, forces it to drop any existing data and begin loading.</p>
<p role="note" class="warning"><b>Warning:</b>
This <em>should not</em> be done lightly if your audio sources are on the network, as it forces players to begin downloading them.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>aTrack.load();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-loop"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-loop" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.loop([state])</code>  <strong>get:</strong> <em>boolean</em> | <strong>set:</strong> <em><code>AudioTrack</code> object</em> </span></h3>
<p>Gets or sets the track's repeating playback state (default: <code>false</code>).  When used to set the loop state, returns a reference to the current <code>AudioTrack</code> instance for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>state</code>:</strong> (optional, <em>boolean</em>) The loop state.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Get the track's current loop state.
var isLooped = aTrack.loop();

// Loop the track.
aTrack.loop(true);

// Unloop the track.
aTrack.loop(false);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-mute"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-mute" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.mute([state])</code>  <strong>get:</strong> <em>boolean</em> | <strong>set:</strong> <em><code>AudioTrack</code> object</em> </span></h3>
<p>Gets or sets the track's volume mute state (default: <code>false</code>).  When used to set the mute state, returns a reference to the current <code>AudioTrack</code> instance for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>state</code>:</strong> (optional, <em>boolean</em>) The mute state.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Get the track's current volume mute state.
var isMuted = aTrack.mute();

// Mute the track's volume.
aTrack.mute(true);

// Unmute the track's volume.
aTrack.mute(false);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-off"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-off" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.off(...args)</code>  <em><code>AudioTrack</code> object</em> </span></h3>
<p>Removes event handlers from the track.  Returns a reference to the current <code>AudioTrack</code> instance for chaining.</p>
<p role="note"><b>Note:</b>
Shorthand for <a href="http://api.jquery.com/off/">jQuery's <code>.off()</code> method</a> applied to the audio element.
</p>
<p role="note" class="warning"><b>Warning:</b>
The <code>SimpleAudio</code> APIs use events internally for various pieces of functionality.  To prevent conflicts, it is <strong><em>strongly</em></strong> suggested that you specify a custom user namespacee.g., <code>.myEvents</code>when attaching your own handlers.  It is further <strong><em>strongly</em></strong> suggested that you provide that same custom user namespace when removing them.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<p role="note" class="see"><b>See:</b>
<a href="http://api.jquery.com/off/"><code>&lt;jQuery&gt;.off()</code></a> in the jQuery API docs for more information.
</p>
<h4>Examples:</h4>
<pre><code>// Remove any handlers for the ended event.
aTrack.off('ended.myEvents');
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-on"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-on" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.on(...args)</code>  <em><code>AudioTrack</code> object</em> </span></h3>
<p>Attaches event handlers to the track.  Returns a reference to the current <code>AudioTrack</code> instance for chaining.</p>
<p role="note"><b>Note:</b>
Shorthand for <a href="http://api.jquery.com/on/">jQuery's <code>.on()</code> method</a> applied to the audio element.
</p>
<p role="note" class="warning"><b>Warning:</b>
The <code>SimpleAudio</code> APIs use events internally for various pieces of functionality.  To prevent conflicts, it is <strong><em>strongly</em></strong> suggested that you specify a custom user namespacee.g., <code>.myEvents</code>when attaching your own handlers.  It is further <strong><em>strongly</em></strong> suggested that you provide that same custom user namespace when removing them.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<p role="note" class="see"><b>See:</b>
<a href="http://api.jquery.com/on/"><code>&lt;jQuery&gt;.on()</code></a> in the jQuery API docs for more information.
</p>
<h4>Examples:</h4>
<pre><code>// Add a handler for the ended event.
aTrack.on('ended.myEvents', function () {
	/* do something */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-one"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-one" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.one(...args)</code>  <em><code>AudioTrack</code> object</em> </span></h3>
<p>Attaches single-use event handlers to the track.  Returns a reference to the current <code>AudioTrack</code> instance for chaining.</p>
<p role="note"><b>Note:</b>
Shorthand for <a href="http://api.jquery.com/one/">jQuery's <code>.one()</code> method</a> applied to the audio element.
</p>
<p role="note" class="warning"><b>Warning:</b>
The <code>SimpleAudio</code> APIs use events internally for various pieces of functionality.  To prevent conflicts, it is <strong><em>strongly</em></strong> suggested that you specify a custom user namespacee.g., <code>.myEvents</code>when attaching your own handlers.  It is further <strong><em>strongly</em></strong> suggested that you provide that same custom user namespace when removing them.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<p role="note" class="see"><b>See:</b>
<a href="http://api.jquery.com/one/"><code>&lt;jQuery&gt;.one()</code></a> in the jQuery API docs for more information.
</p>
<h4>Examples:</h4>
<pre><code>// Add a single-use handler for the ended event.
aTrack.one('ended.myEvents', function () {
	/* do something */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-pause"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-pause" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.pause()</code> </span></h3>
<p>Pauses playback of the track.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>aTrack.pause();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-play"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-play" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.play()</code>  <em><code>Promise</code> object</em> </span></h3>
<p>Begins playback of the track.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>aTrack.play();
</code></pre>
<h5>Using the returned <code>Promise</code></h5>
<pre><code>aTrack.play()
	.then(function () {
		console.log('The track is playing.');
	})
	.catch(function (problem) {
		console.warn('There was a problem with playback: ' + problem);
	});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-playwhenallowed"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-playwhenallowed" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.playWhenAllowed()</code> </span></h3>
<p>Begins playback of the track or, failing that, sets the track to begin playback as soon as the player has interacted with the document.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>aTrack.playWhenAllowed();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-remaining"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-remaining" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.remaining()</code>  <em>number</em> </span></h3>
<p>Returns how much remains of the track's total playtime in seconds, <code>Infinity</code> for a stream, or <code>NaN</code> if no metadata exists.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>var trackRemains = aTrack.remaining();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-stop"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-stop" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.stop()</code> </span></h3>
<p>Stops playback of the track.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>someTrack.stop();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-time"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-time" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.time([seconds])</code>  <strong>get:</strong> <em>number</em> | <strong>set:</strong> <em><code>AudioTrack</code> object</em> </span></h3>
<p>Gets or sets the track's current time in seconds.  When used to set a value, returns a reference to the current <code>AudioTrack</code> instance for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>seconds</code>:</strong> (optional, <em>number</em>) The time to set.  Valid values are floating-point numbers in the range <code>0</code> (start) to the maximum duratione.g., <code>60</code> is <code>60</code> is sixty seconds in, <code>90.5</code> is ninety-point-five seconds in.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Get the track's current time.
var trackTime = aTrack.time();

// Set the track's current time to 30 seconds from its beginning.
aTrack.time(30);

// Set the track's current time to 30 seconds from its end.
aTrack.time(aTrack.duration() - 30);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-unload"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-unload" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.unload()</code> </span></h3>
<p>Stops playback of the track and forces it to drop any existing data.</p>
<p role="note"><b>Note:</b>
Once unloaded, playback cannot occur until the track's data is loaded again.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>aTrack.unload();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiotrack-api-prototype-method-volume"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api-prototype-method-volume" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioTrack&gt;.volume([level])</code>  <strong>get:</strong> <em>number</em> | <strong>set:</strong> <em><code>AudioTrack</code> object</em> </span></h3>
<p>Gets or sets the track's volume level (default: <code>1</code>).  When used to set the volume, returns a reference to the current <code>AudioTrack</code> instance for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>level</code>:</strong> (optional, <em>number</em>) The volume level to set.  Valid values are floating-point numbers in the range <code>0</code> (silent) to <code>1</code> (loudest)e.g., <code>0</code> is 0%, <code>0.5</code> is 50%, <code>1</code> is 100%.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Get the track's current volume level.
var trackVolume = aTrack.volume();

// Set the track's volume level to 75%.
aTrack.volume(0.75);
</code></pre>

<!-- ***************************************************************************
	AudioRunner API
**************************************************************************** -->
<h1 id="audiorunner-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>AudioRunner</code> API </span></h1>
<p>Audio runners are useful for performing actions on multiple tracks at once.</p>
<p role="note" class="see"><b>See Also:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api"><code>SimpleAudio</code> API</a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api"><code>AudioTrack</code> API</a>, and <a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api"><code>AudioList</code> API</a>.
</p>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-fade"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-fade" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.fade(duration , toVol [, fromVol])</code> </span></h3>
<p>Starts playback of the selected tracks and fades them between the specified starting and destination volume levels over the specified number of seconds.</p>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-audio-pauseonfadetozero"><code>Config.audio.pauseOnFadeToZero</code> setting</a> (default: <code>true</code>) determines whether the audio subsystem automatically pauses tracks that have been faded to <code>0</code> volume (silent).
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>duration</code>:</strong> (<em>number</em>) The number of seconds over which the tracks should be faded.</li>
<li><strong><code>toVol</code>:</strong> (<em>number</em>) The destination volume level.</li>
<li><strong><code>fromVol</code>:</strong> (optional, <em>number</em>) The starting volume level.  If omitted, defaults to the tracks' current volume level.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Fade the selected tracks from volume 0 to 1 over 6 seconds.
someTracks.fade(6, 1, 0);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-fadein"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-fadein" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.fadeIn(duration [, fromVol])</code> </span></h3>
<p>Starts playback of the selected tracks and fades them from the specified volume level to <code>1</code> (loudest) over the specified number of seconds.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>duration</code>:</strong> (<em>number</em>) The number of seconds over which the tracks should be faded.</li>
<li><strong><code>fromVol</code>:</strong> (optional, <em>number</em>) The starting volume level.  If omitted, defaults to the tracks' current volume level.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Fade the selected tracks in from volume 0 over 5 seconds.
someTracks.fadeIn(5, 0);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-fadeout"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-fadeout" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.fadeOut(duration [, fromVol])</code> </span></h3>
<p>Starts playback of the selected tracks and fades them from the specified volume level to <code>0</code> (silent) over the specified number of seconds.</p>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-audio-pauseonfadetozero"><code>Config.audio.pauseOnFadeToZero</code> setting</a> (default: <code>true</code>) determines whether the audio subsystem automatically pauses tracks that have been faded to <code>0</code> volume (silent).
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>duration</code>:</strong> (<em>number</em>) The number of seconds over which the tracks should be faded.</li>
<li><strong><code>fromVol</code>:</strong> (optional, <em>number</em>) The starting volume level.  If omitted, defaults to the tracks' current volume level.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Fade the selected tracks out from volume 1 over 8 seconds.
someTracks.fadeOut(8, 1);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-fadestop"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-fadestop" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.fadeStop()</code> </span></h3>
<p>Interrupts an in-progress fade of the selected tracks, or does nothing if no fade is progressing.</p>
<p role="note"><b>Note:</b>
This does not alter the volume level.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>someTracks.fadeStop();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-load"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-load" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.load()</code> </span></h3>
<p>Pauses playback of the selected tracks and, if they're not already in the process of loading, forces them to drop any existing data and begin loading.</p>
<p role="note" class="warning"><b>Warning:</b>
This <em>should not</em> be done lightly if your audio sources are on the network, as it forces players to begin downloading them.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>someTracks.load();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-loop"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-loop" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.loop(state)</code>  <em><code>AudioRunner</code> object</em> </span></h3>
<p>Sets the selected tracks' repeating playback state (default: <code>false</code>).  Returns a reference to the current <code>AudioRunner</code> instance for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>state</code>:</strong> (<em>boolean</em>) The loop state.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Loop the selected tracks.
someTracks.loop(true);

// Unloop the selected tracks.
someTracks.loop(false);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-mute"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-mute" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.mute(state)</code>  <em><code>AudioRunner</code> object</em> </span></h3>
<p>Sets the selected tracks' volume mute state (default: <code>false</code>).  Returns a reference to the current <code>AudioRunner</code> instance for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>state</code>:</strong> (<em>boolean</em>) The mute state.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Mute the selected tracks' volume.
someTracks.mute(true);

// Unmute the selected tracks' volume.
someTracks.mute(false);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-off"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-off" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.off(...args)</code>  <em><code>AudioRunner</code> object</em> </span></h3>
<p>Removes event handlers from the selected tracks.  Returns a reference to the current <code>AudioRunner</code> instance for chaining.</p>
<p role="note"><b>Note:</b>
Shorthand for <a href="http://api.jquery.com/off/">jQuery's <code>.off()</code> method</a> applied to each of the audio elements.
</p>
<p role="note" class="warning"><b>Warning:</b>
The <code>SimpleAudio</code> APIs use events internally for various pieces of functionality.  To prevent conflicts, it is <strong><em>strongly</em></strong> suggested that you specify a custom user namespacee.g., <code>.myEvents</code>when attaching your own handlers.  It is further <strong><em>strongly</em></strong> suggested that you provide that same custom user namespace when removing them.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<p role="note" class="see"><b>See:</b>
<a href="http://api.jquery.com/off/"><code>&lt;jQuery&gt;.off()</code></a> in the jQuery API docs for more information.
</p>
<h4>Examples:</h4>
<pre><code>// Remove any handlers for the ended event.
someTracks.off('ended.myEvents');
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-on"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-on" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.on(...args)</code>  <em><code>AudioRunner</code> object</em> </span></h3>
<p>Attaches event handlers to the selected tracks.  Returns a reference to the current <code>AudioRunner</code> instance for chaining.</p>
<p role="note"><b>Note:</b>
Shorthand for <a href="http://api.jquery.com/on/">jQuery's <code>.on()</code> method</a> applied to each of the audio elements.
</p>
<p role="note" class="warning"><b>Warning:</b>
The <code>SimpleAudio</code> APIs use events internally for various pieces of functionality.  To prevent conflicts, it is <strong><em>strongly</em></strong> suggested that you specify a custom user namespacee.g., <code>.myEvents</code>when attaching your own handlers.  It is further <strong><em>strongly</em></strong> suggested that you provide that same custom user namespace when removing them.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<p role="note" class="see"><b>See:</b>
<a href="http://api.jquery.com/on/"><code>&lt;jQuery&gt;.on()</code></a> in the jQuery API docs for more information.
</p>
<h4>Examples:</h4>
<pre><code>// Add a handler for the ended event.
someTracks.on('ended.myEvents', function () {
	/* do something */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-one"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-one" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.one(...args)</code>  <em><code>AudioRunner</code> object</em> </span></h3>
<p>Attaches single-use event handlers to the selected tracks.  Returns a reference to the current <code>AudioRunner</code> instance for chaining.</p>
<p role="note"><b>Note:</b>
Shorthand for <a href="http://api.jquery.com/one/">jQuery's <code>.one()</code> method</a> applied to each of the audio elements.
</p>
<p role="note" class="warning"><b>Warning:</b>
The <code>SimpleAudio</code> APIs use events internally for various pieces of functionality.  To prevent conflicts, it is <strong><em>strongly</em></strong> suggested that you specify a custom user namespacee.g., <code>.myEvents</code>when attaching your own handlers.  It is further <strong><em>strongly</em></strong> suggested that you provide that same custom user namespace when removing them.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<p role="note" class="see"><b>See:</b>
<a href="http://api.jquery.com/one/"><code>&lt;jQuery&gt;.one()</code></a> in the jQuery API docs for more information.
</p>
<h4>Examples:</h4>
<pre><code>// Add a single-use handler for the ended event.
someTracks.one('ended.myEvents', function () {
	/* do something */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-pause"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-pause" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.pause()</code> </span></h3>
<p>Pauses playback of the selected tracks.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>someTracks.pause();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-play"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-play" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.play()</code> </span></h3>
<p>Begins playback of the selected tracks.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>someTracks.play();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-playwhenallowed"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-playwhenallowed" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.playWhenAllowed()</code> </span></h3>
<p>Begins playback of the selected tracks or, failing that, sets the tracks to begin playback as soon as the player has interacted with the document.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>someTracks.playWhenAllowed();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-stop"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-stop" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.stop()</code> </span></h3>
<p>Stops playback of the selected tracks.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>someTracks.stop();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-time"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-time" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.time(seconds)</code>  <em><code>AudioRunner</code> object</em> </span></h3>
<p>Sets the selected tracks' current time in seconds.  Returns a reference to the current <code>AudioRunner</code> instance for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>seconds</code>:</strong> (<em>number</em>) The time to set.  Valid values are floating-point numbers in the range <code>0</code> (start) to the maximum duratione.g., <code>60</code> is <code>60</code> is sixty seconds in, <code>90.5</code> is ninety-point-five seconds in.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Set the selected tracks' current time to 30 seconds from their beginning.
someTracks.time(30);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-unload"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-unload" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.unload()</code> </span></h3>
<p>Stops playback of the selected tracks and forces them to drop any existing data.</p>
<p role="note"><b>Note:</b>
Once unloaded, playback cannot occur until the selected tracks' data is loaded again.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>someTracks.unload();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiorunner-api-prototype-method-volume"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api-prototype-method-volume" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioRunner&gt;.volume(level)</code>  <em><code>AudioRunner</code> object</em> </span></h3>
<p>Sets the selected tracks' volume level (default: <code>1</code>).  Returns a reference to the current <code>AudioRunner</code> instance for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>level</code>:</strong> (<em>number</em>) The volume level to set.  Valid values are floating-point numbers in the range <code>0</code> (silent) to <code>1</code> (loudest)e.g., <code>0</code> is 0%, <code>0.5</code> is 50%, <code>1</code> is 100%.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Set the selected tracks' volume level to 75%.
someTracks.volume(0.75);
</code></pre>

<!-- ***************************************************************************
	AudioList API
**************************************************************************** -->
<h1 id="audiolist-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>AudioList</code> API </span></h1>
<p>Audio lists (playlists) are useful for playing tracks in a sequencei.e., one after another.</p>
<p role="note" class="see"><b>See Also:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#simpleaudio-api"><code>SimpleAudio</code> API</a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#audiotrack-api"><code>AudioTrack</code> API</a>, and <a href="https://www.motoslave.net/sugarcube/2/docs/#audiorunner-api"><code>AudioRunner</code> API</a>.
</p>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-duration"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-duration" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.duration()</code>  <em>number</em> </span></h3>
<p>Returns the playlist's total playtime in seconds, <code>Infinity</code> if it contains any streams, or <code>NaN</code> if no metadata exists.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>var listLength = aList.duration();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-fade"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-fade" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.fade(duration , toVol [, fromVol])</code>  <em><code>Promise</code> object</em> </span></h3>
<p>Starts playback of the playlist and fades the currently playing track between the specified starting and destination volume levels over the specified number of seconds.</p>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-audio-pauseonfadetozero"><code>Config.audio.pauseOnFadeToZero</code> setting</a> (default: <code>true</code>) determines whether the audio subsystem automatically pauses tracks that have been faded to <code>0</code> volume (silent).
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Updated to return a <code>Promise</code>.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>duration</code>:</strong> (<em>number</em>) The number of seconds over which the currently playing track should be faded.</li>
<li><strong><code>toVol</code>:</strong> (<em>number</em>) The destination volume level.</li>
<li><strong><code>fromVol</code>:</strong> (optional, <em>number</em>) The starting volume level.  If omitted, defaults to the currently playing track's current volume level.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Fade the playlist from volume 0 to 1 over 6 seconds.
aList.fade(6, 1, 0);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-fadein"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-fadein" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.fadeIn(duration [, fromVol])</code>  <em><code>Promise</code> object</em> </span></h3>
<p>Starts playback of the playlist and fades the currently playing track from the specified volume level to <code>1</code> (loudest) over the specified number of seconds.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Updated to return a <code>Promise</code>.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>duration</code>:</strong> (<em>number</em>) The number of seconds over which the currently playing track should be faded.</li>
<li><strong><code>fromVol</code>:</strong> (optional, <em>number</em>) The starting volume level.  If omitted, defaults to the currently playing track's current volume level.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Fade the playlist in from volume 0 over 5 seconds.
aList.fadeIn(5, 0);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-fadeout"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-fadeout" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.fadeOut(duration [, fromVol])</code>  <em><code>Promise</code> object</em> </span></h3>
<p>Starts playback of the playlist and fades the currently playing track from the specified volume level to <code>0</code> (silent) over the specified number of seconds.</p>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-audio-pauseonfadetozero"><code>Config.audio.pauseOnFadeToZero</code> setting</a> (default: <code>true</code>) determines whether the audio subsystem automatically pauses tracks that have been faded to <code>0</code> volume (silent).
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Updated to return a <code>Promise</code>.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>duration</code>:</strong> (<em>number</em>) The number of seconds over which the currently playing track should be faded.</li>
<li><strong><code>fromVol</code>:</strong> (optional, <em>number</em>) The starting volume level.  If omitted, defaults to the currently playing track's current volume level.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Fade the playlist out from volume 1 over 8 seconds.
aList.fadeOut(8, 1);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-fadestop"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-fadestop" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.fadeStop()</code> </span></h3>
<p>Interrupts an in-progress fade of the currently playing track, or does nothing if no fade is progressing.</p>
<p role="note"><b>Note:</b>
This does not alter the volume level.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>aList.fadeStop();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-isended"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-isended" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.isEnded()</code>  <em>boolean</em> </span></h3>
<p>Returns whether playback of the playlist has ended.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aList.isEnded()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-isfading"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-isfading" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.isFading()</code>  <em>boolean</em> </span></h3>
<p>Returns whether a fade is in-progress on the currently playing track.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aList.isFading()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-ispaused"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-ispaused" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.isPaused()</code>  <em>boolean</em> </span></h3>
<p>Returns whether playback of the playlist has been paused.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aList.isPaused()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-isplaying"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-isplaying" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.isPlaying()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the playlist is playing.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aList.isPlaying()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-isstopped"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-isstopped" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.isStopped()</code>  <em>boolean</em> </span></h3>
<p>Returns whether playback of the playlist has been stopped.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (aList.isStopped()) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-load"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-load" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.load()</code> </span></h3>
<p>Pauses playback of the playlist and, if they're not already in the process of loading, forces its tracks to drop any existing data and begin loading.</p>
<p role="note" class="warning"><b>Warning:</b>
This <em>should not</em> be done lightly if your audio sources are on the network, as it forces players to begin downloading them.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>aList.load();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-loop"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-loop" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.loop([state])</code>  <strong>get:</strong> <em>boolean</em> | <strong>set:</strong> <em><code>AudioList</code> object</em> </span></h3>
<p>Gets or sets the playlist's repeating playback state (default: <code>false</code>).  When used to set the loop state, returns a reference to the current <code>AudioList</code> instance for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>state</code>:</strong> (optional, <em>boolean</em>) The loop state.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Get the playlist's current loop state.
var isLooped = aList.loop();

// Loop the playlist.
aList.loop(true);

// Unloop the playlist.
aList.loop(false);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-mute"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-mute" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.mute([state])</code>  <strong>get:</strong> <em>boolean</em> | <strong>set:</strong> <em><code>AudioList</code> object</em> </span></h3>
<p>Gets or sets the playlist's volume mute state (default: <code>false</code>).  When used to set the mute state, returns a reference to the current <code>AudioList</code> instance for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>state</code>:</strong> (optional, <em>boolean</em>) The mute state.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Get the playlist's current volume mute state.
var isMuted = aList.mute();

// Mute the playlist's volume.
aList.mute(true);

// Unmute the playlist's volume.
aList.mute(false);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-pause"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-pause" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.pause()</code> </span></h3>
<p>Pauses playback of the playlist.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>aList.pause();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-play"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-play" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.play()</code>  <em><code>Promise</code> object</em> </span></h3>
<p>Begins playback of the playlist.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Updated to return a <code>Promise</code>.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>aList.play();
</code></pre>
<h5>Using the returned <code>Promise</code></h5>
<pre><code>aList.play()
	.then(function () {
		console.log('The playlist is playing.');
	})
	.catch(function (problem) {
		console.warn('There was a problem with playback: ' + problem);
	});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-playwhenallowed"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-playwhenallowed" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.playWhenAllowed()</code> </span></h3>
<p>Begins playback of the playlist or, failing that, sets the playlist to begin playback as soon as the player has interacted with the document.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>aList.playWhenAllowed();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-remaining"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-remaining" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.remaining()</code>  <em>number</em> </span></h3>
<p>Returns how much remains of the playlist's total playtime in seconds, <code>Infinity</code> if it contains any streams, or <code>NaN</code> if no metadata exists.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>var listRemains = aList.remaining();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-shuffle"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-shuffle" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.shuffle([state])</code>  <strong>get:</strong> <em>boolean</em> | <strong>set:</strong> <em><code>AudioList</code> object</em> </span></h3>
<p>Gets or sets the playlist's randomly shuffled playback state (default: <code>false</code>).  When used to set the shuffle state, returns a reference to the current <code>AudioList</code> instance for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>state</code>:</strong> (optional, <em>boolean</em>) The shuffle state.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Get the playlist's current shuffle state.
var isShuffled = aList.shuffle();

// Enable shuffling of the playlist.
aList.shuffle(true);

// Disable shuffling of the playlist.
aList.shuffle(false);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-skip"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-skip" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.skip()</code> </span></h3>
<p>Skips ahead to the next track in the playlist, if any.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>someTrack.skip();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-stop"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-stop" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.stop()</code> </span></h3>
<p>Stops playback of the playlist.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>someTrack.stop();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-time"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-time" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.time()</code>  <em>number</em> </span></h3>
<p>Returns the playlist's current time in seconds, or <code>NaN</code> if no metadata exists.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>var listTime = aList.time();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-unload"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-unload" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.unload()</code> </span></h3>
<p>Stops playback of the playlist and forces its tracks to drop any existing data.</p>
<p role="note"><b>Note:</b>
Once unloaded, playback cannot occur until the track's data is loaded again.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>aList.unload();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="audiolist-api-prototype-method-volume"><a href="https://www.motoslave.net/sugarcube/2/docs/#audiolist-api-prototype-method-volume" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>&lt;AudioList&gt;.volume([level])</code>  <strong>get:</strong> <em>number</em> | <strong>set:</strong> <em><code>AudioList</code> object</em> </span></h3>
<p>Gets or sets the playlist's volume level (default: <code>1</code>).  When used to set the volume, returns a reference to the current <code>AudioList</code> instance for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.28.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>level</code>:</strong> (optional, <em>number</em>) The volume level to set.  Valid values are floating-point numbers in the range <code>0</code> (silent) to <code>1</code> (loudest)e.g., <code>0</code> is 0%, <code>0.5</code> is 50%, <code>1</code> is 100%.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Get the playlist's current volume level.
var trackVolume = aList.volume();

// Set the playlist's volume level to 75%.
aList.volume(0.75);
</code></pre>

<!-- ***********************************************************************************************
	State API
************************************************************************************************ -->
<h1 id="state-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State</code> API </span></h1>
<p>The story history contains moments (states) created during play.  Since it is possible to navigate the historyi.e., move backward and forward though the moments within the historyit may contain both past momentsi.e., moments that have been playedand future momentsi.e., moments that had been played, but have been rewound/undone, yet are still available to be restored.</p>
<p>In addition to the history, there is also the active momenti.e., presentand expired momentsi.e., moments that had been played, but have expired from the history, thus cannot be navigated to.</p>
<p>API members dealing with the history work upon either the active momenti.e., presentor one of the history subsets: the full in-play historyi.e., past + futurethe past in-play subseti.e., past onlyor the extended past subseti.e., expired + past.  These instances will be noted.</p>
<!-- *********************************************************************** -->
<h3 id="state-api-getter-active"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-active" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.active</code>  <em>object</em> </span></h3>
<p>Returns the active (present) moment.</p>
<p role="note"><b>Note:</b>
Using <code>State.active</code> directly is generally unnecessary as there exist a number of shortcut properties, <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-passage"><code>State.passage</code></a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-variables"><code>State.variables</code></a>, and story functions, <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-passage"><code>passage()</code></a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-variables"><code>variables()</code></a>, which grant access to its normal properties.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.active.title       The title of the present moment
State.active.variables   The variables of the present moment
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-getter-bottom"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-bottom" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.bottom</code>  <em>object</em> </span></h3>
<p>Returns the bottommost (least recent) moment from the full in-play history (past + future).</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.bottom.title       The title of the least recent moment within the full in-play history
State.bottom.variables   The variables of the least recent moment within the full in-play history
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-getter-current"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-current" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.current</code>  <em>object</em> </span></h3>
<p>Returns the current moment from the full in-play history (past + future), which is the pre-play version of the active moment.</p>
<p role="note" class="warning"><b>Warning:</b>
<code>State.current</code> <em>is not</em> a synonym for <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-active"><code>State.active</code></a>.  You will, very likely, never need to use <code>State.current</code> directly within your code.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.8.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.current.title       The title of the current moment within the full in-play history
State.current.variables   The variables of the current moment within the full in-play history
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-getter-length"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-length" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.length</code>  <em>integer</em> </span></h3>
<p>Returns the number of moments within the past in-play history (past only).</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>if (State.length === 0) {
	/* No moments within the past in-play history. Egad! */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-getter-passage"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-passage" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.passage</code>  <em>string</em> </span></h3>
<p>Returns the title of the passage associated with the active (present) moment.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.passage   The passage title of the present moment
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-getter-size"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-size" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.size</code>  <em>integer</em> </span></h3>
<p>Returns the number of moments within the full in-play history (past + future).</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (State.size === 0) {
	/* No moments within the full in-play history. Egad! */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-getter-temporary"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-temporary" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.temporary</code>  <em>object</em> </span></h3>
<p>Returns the current temporary variables.</p>
<h4>History:</h4>
<ul>
<li><code>v2.13.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.temporary   The current temporary variables
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-getter-top"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-top" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.top</code>  <em>object</em> </span></h3>
<p>Returns the topmost (most recent) moment from the full in-play history (past + future).</p>
<p role="note" class="warning"><b>Warning:</b>
<code>State.top</code> <em>is not</em> a synonym for <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-active"><code>State.active</code></a>.  You will, very likely, never need to use <code>State.top</code> directly within your code.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.top.title       The title of the most recent moment within the full in-play history
State.top.variables   The variables of the most recent moment within the full in-play history
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-getter-turns"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-turns" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.turns</code>  <em>integer</em> </span></h3>
<p>Returns the total number (count) of played moments within the extended past history (expired + past).</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>if (State.turns === 1) {
	/* Initial turn.  The starting passage is displayed. */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-getter-variables"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-variables" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.variables</code>  <em>object</em> </span></h3>
<p>Returns the variables from the active (present) moment.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.variables   The variables of the present moment
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-getvar"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-getvar" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.getVar(varName)</code>  <em>any</em> </span></h3>
<p>Returns the value of the story or temporary variable by the given name.</p>
<h4>History:</h4>
<ul>
<li><code>v2.22.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>varName</code>:</strong> (<em>string</em>) The name of the story or temporary variable, including its sigile.g., <code>$charName</code>.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.getVar("$charName")   Returns the value of $charName
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-has"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-has" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.has(passageTitle)</code>  <em>boolean</em> </span></h3>
<p>Returns whether any moments with the given title exist within the past in-play history (past only).</p>
<p role="note"><b>Note:</b>
<code>State.has()</code> <em>does not</em> check expired moments.  If you need to know if the player has ever been to a particular passage, then you <em>must</em> use the <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-hasplayed"><code>State.hasPlayed()</code></a> method or the <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-hasvisited"><code>hasVisited()</code></a> story function.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>passageTitle</code>:</strong> (<em>string</em>) The title of the moment whose existence will be verified.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.has("The Ducky")   Returns whether a moment matching "The Ducky" exists
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-hasplayed"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-hasplayed" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.hasPlayed(passageTitle)</code>  <em>boolean</em> </span></h3>
<p>Returns whether any moments with the given title exist within the extended past history (expired + past).</p>
<p role="note"><b>Note:</b>
If you need to check for multiple passages, the <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-hasvisited"><code>hasVisited()</code></a> story function will likely be more convenient to use.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>passageTitle</code>:</strong> (<em>string</em>) The title of the moment whose existence will be verified.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.hasPlayed("The Ducky")   Returns whether a moment matching "The Ducky" ever existed
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-index"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-index" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.index(index)</code>  <em>object</em> </span></h3>
<p>Returns the moment, relative to the bottom of the past in-play history (past only), at the given index.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>index</code>:</strong> (<em>integer</em>) The index of the moment to return.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.index(0)                  Returns the least recent moment within the past in-play history
State.index(1)                  Returns the second to least recent moment within the past in-play history
State.index(State.length - 1)   Returns the most recent moment within the past in-play history
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-isempty"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-isempty" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.isEmpty()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the full in-play history (past + future) is empty.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (State.isEmpty()) {
	/* No moments within the full in-play history. Egad! */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-peek"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-peek" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.peek([offset])</code>  <em>object</em> </span></h3>
<p>Returns the moment, relative to the top of the past in-play history (past only), at the, optional, offset.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>offset</code>:</strong> (optional, <em>integer</em>) The offset, from the top of the past in-play history, of the moment to return.  If not given, an offset of <code>0</code> is used.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.peek()                   Returns the most recent moment within the past in-play history
State.peek(0)                  Returns the most recent moment within the past in-play history
State.peek(1)                  Returns the second most recent moment within the past in-play history
State.peek(State.length - 1)   Returns the least recent moment within the past in-play history
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-metadata-size"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-size" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.metadata.size</code>  <em>integer</em> </span></h3>
<p>Returns the size of the story metadata storei.e., the number of stored pairs.</p>
<h4>History:</h4>
<ul>
<li><code>v2.30.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Determines whether the metadata store has any members.
if (State.metadata.size &gt; 0) {
	/* store is not empty */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-metadata-clear"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-clear" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.metadata.clear()</code> </span></h3>
<p>Empties the story metadata store.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>// Removes all values from the metadata store.
State.metadata.clear();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-metadata-delete"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-delete" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.metadata.delete(key)</code> </span></h3>
<p>Removes the specified key, and its associated value, from the story metadata store.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>key</code>:</strong> (<em>string</em>) The key to delete.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Removes 'achievements' from the metadata store.
State.metadata.delete('achievements');
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-metadata-entries"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-entries" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.metadata.entries()</code>  <em>Array&lt;Array&lt;string, any&gt;&gt;</em> </span></h3>
<p>Returns an array of the story metadata store's key/value pairs as <code>[key, value]</code> arrays.</p>
<h4>History:</h4>
<ul>
<li><code>v2.36.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code class="language-js">// Iterate over the pairs with a `for` loop.
var metadata = State.metadata.entries();
for (var i = 0; i &lt; metadata.length; ++i) {
	var key   = metadata[i][0];
	var value = metadata[i][1];

	/* do something */
}
</code></pre>
<pre><code class="language-js">// Iterate over the pairs with `&lt;Array&gt;.forEach()`.
State.metadata.entries().forEach(function (pair) {
	var key   = pair[0];
	var value = pair[1];

	/* do something */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-metadata-get"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-get" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.metadata.get(key)</code>  <em>any</em> </span></h3>
<p>Returns the value associated with the specified key from the story metadata store.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>key</code>:</strong> (<em>string</em>) The key whose value should be returned.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Returns the value of 'achievements' from the metadata store.
var playerAchievements = State.metadata.get('achievements');
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-metadata-has"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-has" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.metadata.has(key)</code>  <em>boolean</em> </span></h3>
<p>Returns whether the specified key exists within the story metadata store.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>key</code>:</strong> (<em>string</em>) The key whose existence should be tested.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Returns whether 'achievements' exists within the metadata store.
if (State.metadata.has('achievements')) {
	/* do something */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-metadata-keys"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-keys" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.metadata.keys()</code>  <em>Array&lt;string&gt;</em> </span></h3>
<p>Returns an array of the story metadata store's keys.</p>
<h4>History:</h4>
<ul>
<li><code>v2.36.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code class="language-js">// Iterate over the keys with a `for` loop.
var metadataKeys = State.metadata.keys();
for (var i = 0; i &lt; metadataKeys.length; ++i) {
	var key = metadataKeys[i];

	/* do something */
}
</code></pre>
<pre><code class="language-js">// Iterate over the keys with `&lt;Array&gt;.forEach()`.
State.metadata.keys().forEach(function (key) {
	/* do something */
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-metadata-set"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-metadata-set" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.metadata.set(key, value)</code> </span></h3>
<p>Sets the specified key and value within the story metadata store, which causes them to persist over story and browser restartsn.b. private browsing modes do interfere with this.  To update the value associated with a key, simply set it again.</p>
<p role="note"><b>Note:</b>
The story metadata, like saves, is tied to the specific story it was generated with.  It is not a mechanism for moving data between stories.
</p>
<p role="note" class="warning"><b>Warning:</b>
The story metadata store <strong><em>is not</em></strong>, and should not be used as, a replacement for saves.  Examples of good uses: achievement tracking, new game+ data, playthrough statistics, etc.
</p>
<p role="note" class="warning"><b>Warning:</b>
This feature is largely incompatible with private browsing modes, which cause all in-browser storage mechanisms to either persist only for the lifetime of the browsing session or fail outright.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>key</code>:</strong> (<em>string</em>) The key that should be set.</li>
<li><strong><code>value</code>:</strong> (<em>any</em>) The value to set.</li>
</ul>
<h4>Examples:</h4>
<pre><code>// Sets 'achievements', with the given value, in the metadata store.
State.metadata.set('achievements', { ateYellowSnow : true });

// Sets 'ngplus', with the given value, in the metadata store.
State.metadata.set('ngplus', true);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-prng-init"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-prng-init" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.prng.init([seed [, useEntropy]])</code> </span></h3>
<p>Initializes the seedable pseudo-random number generator (PRNG) and integrates it into the story state and saves.  Once initialized, the <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-random"><code>State.random()</code></a> method and story functions, <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-random"><code>random()</code></a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-randomfloat"><code>randomFloat()</code></a>, return deterministic results from the seeded PRNGby default, they return non-deterministic results from <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random"><code>Math.random()</code></a>.</p>
<p role="note"><b>Note:</b>
<code>State.prng.init()</code> <em>must be</em> called during story initialization, within either your project's JavaScript section (Twine&nbsp;2: the Story JavaScript; Twine&nbsp;1/Twee: a <code>script</code>-tagged passage) or the <code>StoryInit</code> special passage.  Additionally, it is <strong><em>strongly</em></strong> recommended that you do not specify any arguments to <code>State.prng.init()</code> and allow it to automatically seed itself.  If you should chose to use an explicit seed, however, it is <strong><em>strongly</em></strong> recommended that you also enable additional entropy, otherwise all playthroughs for all players will be exactly the same.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>seed</code>:</strong> (optional, <em>string</em>) The explicit seed used to initialize the pseudo-random number generator.</li>
<li><strong><code>useEntropy</code>:</strong> (optional, <em>boolean</em>) Enables the use of additional entropy to pad the specified explicit seed.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.prng.init()                        Automatically seed the PRNG (recommended)
State.prng.init("aVeryLongSeed")         Seed the PRNG with "aVeryLongSeed" (not recommended)
State.prng.init("aVeryLongSeed", true)   Seed the PRNG with "aVeryLongSeed" and pad it with extra entropy
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-prng-isenabled"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-prng-isenabled" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.prng.isEnabled()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-prng-init">seedable PRNG</a> has been enabled.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.prng.isEnabled()   Returns whether the seedable PRNG is enabled
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-getter-prng-pull"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-prng-pull" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.prng.pull</code>  <em>integer</em> | <em>NaN</em> </span></h3>
<p>Returns the current pull counti.e., how many requests have been madefrom the <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-prng-init">seedable PRNG</a> or, if the PRNG is not enabled, <code>NaN</code>.</p>
<p role="note"><b>Note:</b>
The pull count is automatically included within saves and sessions, so this is not especially useful outside of debugging purposes.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.prng.pull   Returns the current PRNG pull count
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-getter-prng-seed"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-getter-prng-seed" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.prng.seed</code>  <em>string</em> | <em>null</em> </span></h3>
<p>Returns the seed from the <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-prng-init">seedable PRNG</a> or, if the PRNG is not enabled, <code>null</code>.</p>
<p role="note"><b>Note:</b>
The seed is automatically included within saves and sessions, so this is not especially useful outside of debugging purposes.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.prng.seed   Returns the PRNG seed
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-random"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-random" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.random()</code>  <em>number</em> </span></h3>
<p>Returns a pseudo-random decimal number (floating-point) in the range <code>0</code> (inclusive) up to, but not including, <code>1</code> (exclusive).</p>
<p role="note"><b>Note:</b>
By default, it simply returns non-deterministic results from <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random"><code>Math.random()</code></a>, however, when the seedable PRNG has been enabled, via <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-prng-init"><code>State.prng.init()</code></a>, it returns deterministic results from the seeded PRNG instead.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>State.random()   Returns a pseudo-random floating-point number in the range [0, 1)
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-setvar"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-setvar" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>State.setVar(varName, value)</code>  <em>boolean</em> </span></h3>
<p>Sets the value of the story or temporary variable by the given name.  Returns whether the operation was successful.</p>
<h4>History:</h4>
<ul>
<li><code>v2.22.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>varName</code>:</strong> (<em>string</em>) The name of the story or temporary variable, including its sigile.g., <code>$charName</code>.</li>
<li><strong><code>value</code>:</strong> (<em>any</em>) The value to assign.</li>
</ul>
<h4>Examples:</h4>
<pre><code>State.setVar("$charName", "Jane Doe")   Assigns the string "Jane Doe" to $charName
</code></pre>
<!-- *********************************************************************** -->
<h3 id="state-api-method-initprng"><a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-initprng" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><span class="deprecated"><code>State.initPRNG([seed [, useEntropy]])</code></span> </span></h3>
<p role="note" class="warning"><b>Deprecated:</b>
This method has been deprecated and should no longer be used.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-prng-init"><code>State.prng.init()</code></a> method for its replacement.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Deprecated in favor of <code>State.prng.init()</code>.</li>
</ul>

<!-- ***********************************************************************************************
	Story API
************************************************************************************************ -->
<h1 id="story-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Story</code> API </span></h1>
<!-- *********************************************************************** -->
<h3 id="story-api-getter-domid"><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-getter-domid" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Story.domId</code>  <em>string</em> </span></h3>
<p>The DOM ID of the story, created from the slugified story title.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="story-api-getter-ifid"><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-getter-ifid" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Story.ifId</code>  <em>string</em> </span></h3>
<p>The IFID (Interactive Fiction IDentifier) of the story, if any.</p>
<h4>History:</h4>
<ul>
<li><code>v2.5.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="story-api-getter-title"><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-getter-title" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Story.title</code>  <em>string</em> </span></h3>
<p>The title of the story.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<!-- *********************************************************************** -->
<h3 id="story-api-method-get"><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-method-get" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Story.get(title)</code>  <em><code>Passage</code> object</em> </span></h3>
<p>Returns the <code>Passage</code> object referenced by the given title, or an empty <code>Passage</code> object on failure.</p>
<p role="note"><b>Note:</b>
This method will not return "code" passagesi.e., script, stylesheet, and widget passages.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>title</code>:</strong> (<em>string</em>) The title of the <code>Passage</code> object to return.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Story.get("The Ducky")   Returns the Passage object matching "The Ducky"
</code></pre>
<!-- *********************************************************************** -->
<h3 id="story-api-method-has"><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-method-has" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Story.has(title)</code>  <em>boolean</em> </span></h3>
<p>Returns whether a <code>Passage</code> object referenced by the given title exists.</p>
<p role="note"><b>Note:</b>
This method will not detect "code" passagesi.e., script, stylesheet, and widget passages.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>title</code>:</strong> (<em>string</em>) The title of the <code>Passage</code> object whose existence will be verified.</li>
</ul>
<h4>Examples:</h4>
<pre><code>Story.has("The Ducky")   Returns whether a Passage object matching "The Ducky" exists
</code></pre>
<!-- *********************************************************************** -->
<h3 id="story-api-method-lookup"><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-method-lookup" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Story.lookup(propertyName , searchValue [, sortProperty])</code>  <em><code>Passage</code> object array</em> </span></h3>
<p>Returns a new array filled with all <code>Passage</code> objects that contain the given property, whose value matches the given search value, or an empty array, if no matches are made.</p>
<p role="note"><b>Note:</b>
This method will not return "code" passagesi.e., script, stylesheet, and widget passages.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>propertyName</code>:</strong> (<em>string</em>) The name of property whose value will be compared to the search value.</li>
<li><strong><code>searchValue</code>:</strong> (<em>string</em> | <em>number</em>) The value to search for within the matched property.  The type of the property determines how the search occursnon-arrays are directly compared, while arrays are searched.  If the property's value, for non-arrays, or any of its members, for arrays, match, then the <code>Passage</code> object is added to the results.</li>
<li><strong><code>sortProperty</code>:</strong> (optional, <em>string</em>) The property whose value will be used to lexicographically sort the returned array.  If not given, the <code>Passage</code> object's <code>title</code> property is used.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Returns all 'forest'-tagged Passage objects, sorted by their titles
Story.lookup("tags", "forest");
</code></pre>
<!-- *********************************************************************** -->
<h3 id="story-api-method-lookupwith"><a href="https://www.motoslave.net/sugarcube/2/docs/#story-api-method-lookupwith" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Story.lookupWith(predicate [, sortProperty])</code>  <em><code>Passage</code> object array</em> </span></h3>
<p>Returns a new array filled with all <code>Passage</code> objects that pass the test implemented by the given predicate function or an empty array, if no objects pass.</p>
<p role="note"><b>Note:</b>
This method will not return "code" passagesi.e., script, stylesheet, and widget passages.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.11.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>predicate</code>:</strong> (<em>function</em>) The function used to test each <code>Passage</code> object, which is passed into the function as its sole parameter.  If the function returns <code>true</code>, then the <code>Passage</code> object is added to the results.</li>
<li><strong><code>sortProperty</code>:</strong> (optional, <em>string</em>) The property whose value will be used to lexicographically sort the returned array.  If not given, the <code>Passage</code> object's <code>title</code> property is used.</li>
</ul>
<h4>Examples:</h4>
<pre><code> Returns all 'forest'-tagged Passage objects, sorted by their titles
Story.lookupWith(function (p) {
	return p.tags.includes("forest");
});

 Returns all Passage objects whose titles contain whitespace, sorted by their titles
var hasWhitespaceRegExp = /\s/;
Story.lookupWith(function (p) {
	return hasWhitespaceRegExp.test(p.title);
});
</code></pre>

<!-- ***********************************************************************************************
	Template API
************************************************************************************************ -->
<h1 id="template-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#template-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Template</code> API </span></h1>
<!-- *********************************************************************** -->
<h3 id="template-api-getter-size"><a href="https://www.motoslave.net/sugarcube/2/docs/#template-api-getter-size" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Template.size</code>  <em>number</em> </span></h3>
<p>Returns the number of existing templates.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Examples:</h4>
<pre><code>if (Template.size === 0) {
	/* No templates exist. */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="template-api-method-add"><a href="https://www.motoslave.net/sugarcube/2/docs/#template-api-method-add" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Template.add(name , definition)</code> </span></h3>
<p>Add new template(s).</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em> | <em>Array&lt;string&gt;</em>) Name, or array of names, of the template(s) to add.  <strong>NOTE:</strong> Names must consist of characters from the basic Latin alphabet and start with a letter, which may be optionally followed by any number of letters, numbers, the underscore, or the hyphen.</li>
<li><strong><code>definition</code>:</strong> (<em>function</em> | <em>string</em> | <em>Array&lt;function | string&gt;</em>) Definition of the template(s), which may be a: function, string, or an array of either.  <strong>NOTE:</strong> Each time array definitions are referenced, one of their member templates is randomly selected to be the output source.</li>
</ul>
<h4>Function templates:</h4>
<p>Function templates should return a string, which may itself contain markup.  They are called with no arguments, but with their <code>this</code> set to a template (execution) context object that contains the following data properties:</p>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em>) The template's name.</li>
</ul>
<h4>String templates:</h4>
<p>String templates consist solely of a string, which may itself contain markup.</p>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>/* Define a function template named ?yolo. */
Template.add('yolo', function () {
	return either('YOLO', 'You Only Live Once');
});

/* Define a string template named ?nolf. */
Template.add('nolf', 'No One Lives Forever');

/* Define an array of string templates named ?alsoYolo. */
Template.add('alsoYolo', ['YOLO', 'You Only Live Once']);

/* Define an array of mixed string and function templates named ?cmyk. */
Template.add('cmyk', [
	'Cyan',
	function () {
		return either('Magenta', 'Yellow');
	},
	'Black'
]);
</code></pre>
<h5>Using the context object (<code>this</code>)</h5>
<pre><code>/* Define a function template with two names, ?color and ?Color, whose output changes based on its name. */
Template.add(['color', 'Color'], function () {
	var color = either('red', 'green', 'blue');
	return this.name === 'Color' ? color.toUpperFirst() : color;
});
</code></pre>
<!-- *********************************************************************** -->
<h3 id="template-api-method-delete"><a href="https://www.motoslave.net/sugarcube/2/docs/#template-api-method-delete" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Template.delete(name)</code> </span></h3>
<p>Remove existing template(s).</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em> | <em>Array&lt;string&gt;</em>) Name, or array of names, of the template(s) to remove.</li>
</ul>
<h4>Examples:</h4>
<pre><code>/* Deletes the template ?yolo. */
Template.delete('yolo');

/* Deletes the templates ?yolo and ?nolf. */
Template.delete(['yolo', 'nolf']);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="template-api-method-get"><a href="https://www.motoslave.net/sugarcube/2/docs/#template-api-method-get" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Template.get(name)</code>  <em>function</em> | <em>string</em> | <em>Array&lt;function | string&gt;</em> </span></h3>
<p>Return the named template definition, or <code>null</code> on failure.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em>) Name of the template whose definition should be returned.</li>
</ul>
<h4>Examples:</h4>
<pre><code>/* Returns the template ?yolo, or null if it doesn't exist. */
var yolo = Template.get('yolo');
</code></pre>
<!-- *********************************************************************** -->
<h3 id="template-api-method-has"><a href="https://www.motoslave.net/sugarcube/2/docs/#template-api-method-has" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>Template.has(name)</code>  <em>boolean</em> </span></h3>
<p>Returns whether the named template exists.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>name</code>:</strong> (<em>string</em>) Name of the template to search for.</li>
</ul>
<h4>Examples:</h4>
<pre><code>if (Template.has('yolo')) {
	/* A ?yolo template exists. */
}
</code></pre>

<!-- ***********************************************************************************************
	UI API
************************************************************************************************ -->
<h1 id="ui-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UI</code> API </span></h1>
<!-- *********************************************************************** -->
<h3 id="ui-api-method-alert"><a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api-method-alert" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UI.alert(message [, options [, closeFn]])</code> </span></h3>
<p>Opens the built-in alert dialog, displaying the given message to the player.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>message</code>:</strong> (<em>string</em>) The message to display to the player.</li>
<li><strong><code>options</code>:</strong> (optional, <em>null</em> | <em>object</em>) The options object.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-open"><code>Dialog.open()</code></a> for more information.</li>
<li><strong><code>closeFn</code>:</strong> (optional, <em>null</em> | <em>function</em>) The function to execute whenever the dialog is closed.</li>
</ul>
<h4>Examples:</h4>
<pre><code>UI.alert("You smell of elderberries!");
</code></pre>
<!-- *********************************************************************** -->
<h3 id="ui-api-method-jumpto"><a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api-method-jumpto" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UI.jumpto([options [, closeFn]])</code> </span></h3>
<p>Opens the built-in jump to dialog, which is populated via the <a href="https://www.motoslave.net/sugarcube/2/docs/#special-tag-bookmark"><code>bookmark</code> tag</a>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>options</code>:</strong> (optional, <em>null</em> | <em>object</em>) The options object.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-open"><code>Dialog.open()</code></a> for more information.</li>
<li><strong><code>closeFn</code>:</strong> (optional, <em>null</em> | <em>function</em>) The function to execute whenever the dialog is closed.</li>
</ul>
<h4>Examples:</h4>
<pre><code>UI.jumpto();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="ui-api-method-restart"><a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api-method-restart" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UI.restart([options])</code> </span></h3>
<p>Opens the built-in restart dialog, prompting the player to restart the story.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>options</code>:</strong> (optional, <em>null</em> | <em>object</em>) The options object.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-open"><code>Dialog.open()</code></a> for more information.</li>
</ul>
<h4>Examples:</h4>
<pre><code>UI.restart();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="ui-api-method-saves"><a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api-method-saves" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UI.saves([options [, closeFn]])</code> </span></h3>
<p>Opens the built-in saves dialog.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>options</code>:</strong> (optional, <em>null</em> | <em>object</em>) The options object.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-open"><code>Dialog.open()</code></a> for more information.</li>
<li><strong><code>closeFn</code>:</strong> (optional, <em>null</em> | <em>function</em>) The function to execute whenever the dialog is closed.</li>
</ul>
<h4>Examples:</h4>
<pre><code>UI.saves();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="ui-api-method-settings"><a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api-method-settings" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UI.settings([options [, closeFn]])</code> </span></h3>
<p>Opens the built-in settings dialog, which is populated from the <a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api"><code>Setting</code> API</a>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>options</code>:</strong> (optional, <em>null</em> | <em>object</em>) The options object.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-open"><code>Dialog.open()</code></a> for more information.</li>
<li><strong><code>closeFn</code>:</strong> (optional, <em>null</em> | <em>function</em>) The function to execute whenever the dialog is closed.</li>
</ul>
<h4>Examples:</h4>
<pre><code>UI.settings();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="ui-api-method-share"><a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api-method-share" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UI.share([options [, closeFn]])</code> </span></h3>
<p>Opens the built-in share dialog, which is populated from the <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyshare"><code>StoryShare</code> passage</a>.</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>options</code>:</strong> (optional, <em>null</em> | <em>object</em>) The options object.  See <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-open"><code>Dialog.open()</code></a> for more information.</li>
<li><strong><code>closeFn</code>:</strong> (optional, <em>null</em> | <em>function</em>) The function to execute whenever the dialog is closed.</li>
</ul>
<h4>Examples:</h4>
<pre><code>UI.share();
</code></pre>

<!-- ***********************************************************************************************
	UIBar API
************************************************************************************************ -->
<h1 id="uibar-api"><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UIBar</code> API </span></h1>
<!-- *********************************************************************** -->
<h3 id="uibar-api-method-destroy"><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-destroy" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UIBar.destroy()</code> </span></h3>
<p>Completely removes the UI bar and all of its associated styles and event handlers.</p>
<h4>History:</h4>
<ul>
<li><code>v2.17.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>UIBar.destroy();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="uibar-api-method-hide"><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-hide" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UIBar.hide()</code>  <em><code>UIBar</code> object</em> </span></h3>
<p>Hides the UI bar.  Returns a reference to the <code>UIBar</code> object for chaining.</p>
<p role="note"><b>Note:</b>
This does not reclaim the space reserved for the UI bar.  Thus, a call to <a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-stow"><code>UIBar.stow()</code></a> may also be necessary.  Alternatively, if you simply want the UI bar gone completely and permanently, either using <a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-destroy"><code>UIBar.destroy()</code></a> or the <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyinterface"><code>StoryInterface</code> special passage</a> may be a better choice.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>UIBar.hide();
</code></pre>
<h5>With stow</h5>
<pre><code>UIBar.hide().stow();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="uibar-api-method-ishidden"><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-ishidden" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UIBar.isHidden()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the UI bar is currently hidden.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (UIBar.isHidden()) {
	/* code to execute if the UI bar is hidden */
}

if (!UIBar.isHidden()) {
	/* code to execute if the UI bar is not hidden */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="uibar-api-method-isstowed"><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-isstowed" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UIBar.isStowed()</code>  <em>boolean</em> </span></h3>
<p>Returns whether the UI bar is currently stowed.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>if (UIBar.isStowed()) {
	/* code to execute if the UI bar is stowed */
}

if (!UIBar.isStowed()) {
	/* code to execute if the UI bar is not stowed */
}
</code></pre>
<!-- *********************************************************************** -->
<h3 id="uibar-api-method-show"><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-show" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UIBar.show()</code>  <em><code>UIBar</code> object</em> </span></h3>
<p>Shows the UI bar.  Returns a reference to the <code>UIBar</code> object for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>UIBar.show();
</code></pre>
<h5>With unstow</h5>
<pre><code>UIBar.unstow().show();
</code></pre>
<!-- *********************************************************************** -->
<h3 id="uibar-api-method-stow"><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-stow" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UIBar.stow([noAnimation])</code>  <em><code>UIBar</code> object</em> </span></h3>
<p>Stows the UI bar, so that it takes up less space.  Returns a reference to the <code>UIBar</code> object for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.17.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Added returned <code>UIBar</code> chaining reference.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>noAnimation</code>:</strong> (optional, <em>boolean</em>) Whether to skip the default animation.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>UIBar.stow();
</code></pre>
<h5>With no animation</h5>
<pre><code>UIBar.stow(true);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="uibar-api-method-unstow"><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-unstow" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UIBar.unstow([noAnimation])</code>  <em><code>UIBar</code> object</em> </span></h3>
<p>Unstows the UI bar, so that it is fully accessible again.  Returns a reference to the <code>UIBar</code> object for chaining.</p>
<h4>History:</h4>
<ul>
<li><code>v2.17.0</code>: Introduced.</li>
<li><code>v2.29.0</code>: Added returned <code>UIBar</code> chaining reference.</li>
</ul>
<h4>Parameters:</h4>
<ul>
<li><strong><code>noAnimation</code>:</strong> (optional, <em>boolean</em>) Whether to skip the default animation.</li>
</ul>
<h4>Examples:</h4>
<h5>Basic usage</h5>
<pre><code>UIBar.unstow();
</code></pre>
<h5>With no animation</h5>
<pre><code>UIBar.unstow(true);
</code></pre>
<!-- *********************************************************************** -->
<h3 id="uibar-api-method-update"><a href="https://www.motoslave.net/sugarcube/2/docs/#uibar-api-method-update" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span><code>UIBar.update()</code> </span></h3>
<p>Updates all sections of the UI bar that are populated by special passagese.g., <code>StoryBanner</code>, <code>StoryCaption</code>, <code>StoryMenu</code>, etc.</p>
<p role="note" class="warning"><b>Warning:</b>
As <em>all</em> special passage populated sections are updated it is recommended that <code>UIBar.update()</code> be used sparingly.  Ideally, if you need to update UI bar content outside of the normal passage navigation update, then you should update only the specific areas you need to rather than the entire UI bar.
</p>
<h4>History:</h4>
<ul>
<li><code>v2.29.0</code>: Introduced.</li>
</ul>
<h4>Parameters: <em>none</em></h4>
<h4>Examples:</h4>
<pre><code>UIBar.update();
</code></pre>

<h1 id="guide-state-sessions-and-saving"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Guide: State, Sessions, and Saving </span></h1>
<p>SugarCube preserves the state of the story as it's being played in a number of ways to both prevent the loss of progress and allow players to save stories.  This guide will detail how these features work.</p>
<h2 id="guide-state-sessions-and-saving-story-history"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving-story-history" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Story History </span></h2>
<p>The story history is a collection of <strong>moments</strong>.  A new moment is created whenever passage navigation occurs, and <strong>only when passage navigation occurs</strong>.  Each moment contains data regarding the active passage and the state of all <a href="https://www.motoslave.net/sugarcube/2/docs/#twinescript-variables">story variables</a>that is, the ones you use the <code>$</code> sigil to interact withas they exist when the moment is created.  The history allows players to navigate through these moments.</p>
<p>The number of moments contained within the story history is, generally, limited, via the <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-history-maxstates"><code>Config.history.maxStates</code> setting</a>.  As new moments are added, older moments that exceed the maximum number are expired in order of age, oldest first.  Expired moments are recorded in a separate expired collection and can no longer be navigated to.  If you limit the moments within the history to <code>1</code>, via setting <code>Config.history.maxStates</code> to <code>1</code>, then there will only ever be one moment in the history, but passage navigation is still required for new moments to be created.</p>
<p role="note"><b>Note:</b>
All user functions and macros that check for the existence of moments within the history check both the story history and expired moments, so will work as expected even if the history is limited to a single moment as described above.
</p>
<p>Saving the story records the story's state up until the last moment that was created.  This is not necessarily the same as the current state of the story: because moment creation is tied to passage navigation, changes that occur <em>between</em> one passage navigation and the next are <em>not</em> part of the current moment and will not be preserved by a moment until the <em>next</em> navigation, when the next moment is created.</p>
<p>Consider the following:</p>
<pre><code>:: one passage
&lt;&lt;set $var to 1&gt;&gt;

[[another passage]]

:: another passage
&lt;&lt;link "Click me!"&gt;&gt;
	&lt;&lt;set $var to 2&gt;&gt;
&lt;&lt;/link&gt;&gt;
</code></pre>
<p>In the above example, if you save the story after reaching the passage called <em><code>another passage</code></em>, the <code>$var</code> variable will be saved in the state as <code>1</code>, as you would expect.  If you click the link that sets the variable to <code>2</code>, and then save the story, the <code>$var</code> variable will <em>still</em> be saved as <code>1</code>, because a new moment has not yet been created.</p>
<h2 id="guide-state-sessions-and-saving-playthrough-session"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving-playthrough-session" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Playthrough Session </span></h2>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving-autosave">autosave feature</a> is occasionally confused with the playthrough session feature, but they are in fact distinct systems.
</p>
<p>SugarCube automatically stores the current playthrough state to the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage">browser's session storage</a> whenever a new moment is created.  This can be thought of as a special, temporary saved story, which is automatically deleted after the player's current browsing session ends.  This temporary playthrough session is intended to prevent players from losing data.  Some browsers, particularly mobile ones, will free up memory by unloading web pages that are running in the background.  This functionally refreshes the webpage, and can cause users to lose their progress.  When SugarCube is reloaded by the browser, it checks if a playthrough session exists and loads it to prevent any inadvertent loss of progress.</p>
<p>This feature also prevents players from losing progress if they try to use the browser back and forward buttons to navigate, or if they refresh their browser for any reason.  The built-in <em><code>Restart</code></em> button, along with the methods <a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api-method-restart"><code>UI.restart()</code></a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-restart"><code>Engine.restart()</code></a> are provided so that the story can be restarted without restoring a session.</p>
<p>To recap:</p>
<ul>
<li>When a new moment is created, SugarCube stores the playthrough state to session storage.</li>
<li>If SugarCube is reloaded by the browser for whatever reasone.g., due to a refresh, back/forward navigation, being unloaded in the background, etc.then the session is restored.</li>
<li>If SugarCube is reloaded by one of its own built-in restart methods, then the session is <em>not</em> restored.</li>
</ul>
<h2 id="guide-state-sessions-and-saving-autosave"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving-autosave" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Autosave </span></h2>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving-playthrough-session">playthrough session feature</a> is occasionally confused with the autosave feature, but they are in fact distinct systems.
</p>
<p>SugarCube features a configurable autosave system.  The autosave is, for the most part, a normal save slot, but with a few special features built in.  You can set the autosave to save either on every passage or only on certain passages.  It can be loaded manually by the player or automatically by the autoload feature, which can be configured to, upon start up, either load the autosave automatically or prompt the player about loading it.</p>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-autosave"><code>Config.saves.autosave</code> setting</a>, <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-autoload"><code>Config.saves.autoload</code> setting</a>, and <a href="https://www.motoslave.net/sugarcube/2/docs/#save-api-autosave"><code>Save</code> API: Autosave</a>.
</p>
<h2 id="guide-state-sessions-and-saving-what-happens-when-a-save-is-loaded"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving-what-happens-when-a-save-is-loaded" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>What Happens When a Save is Loaded? </span></h2>
<p>When a saved story is loaded, the state loaded from the save <em>replaces</em> the current state.  This process is the same regardless of where the loaded state is coming from: it could be a normal save, the autosave, or the playthrough session.  The previous state is completely lostthe new state is not added to or combined with the current state, instead it <strong>replaces it in its entirety</strong>.  The easiest way to understand this is to look at what happens when you make some changes to <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyinit"><code>StoryInit</code></a> and then load a saved story from before those changes were made.  For example:</p>
<pre><code>:: StoryInit
&lt;&lt;set $x to 0&gt;&gt;

:: Start
$$x is &lt;&lt;if def $x&gt;&gt; $x &lt;&lt;else&gt;&gt; undefined &lt;&lt;/if&gt;&gt;
</code></pre>
<p>If you run the above, you'll see <code>$x is 0</code>.  Create a save, then edit the code as follows:</p>
<pre><code>:: StoryInit
&lt;&lt;set $x to 0&gt;&gt;
&lt;&lt;set $y to 1&gt;&gt;

:: Start
$$x is &lt;&lt;if def $x&gt;&gt; $x &lt;&lt;else&gt;&gt; undefined &lt;&lt;/if&gt;&gt;
$$y is &lt;&lt;if def $y&gt;&gt; $y &lt;&lt;else&gt;&gt; undefined &lt;&lt;/if&gt;&gt;
</code></pre>
<p>Running that, you'll see <code>$x is 0</code> and <code>$y is 1</code>.  Now, load the saved story from before the changes were made, and you'll see <code>$y is undefined</code>, since it doesn't exist at all in the loaded state.</p>
<h2 id="guide-state-sessions-and-saving-refreshing-and-restarting"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving-refreshing-and-restarting" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Refreshing and Restarting </span></h2>
<p>Whenever your story is first started or, <em>for any reason</em>, restartede.g., the browser window/tab was refreshed/reloadedit undergoes its startup sequence.  Several things occur <strong>each and every time startup happens</strong>, regardless of whether or not a playthrough session will be restored, an autosave loaded, or the starting passage run.  First, the CSS, JavaScript, and Widget sections are processed.  Next, the <code>StoryInit</code> special passage is processed.  Finally, one of three things happen (in order): the existing playthrough session is restored, if it exists, else the autosave is loaded, if it exists and is configured to do so, else the starting passage is run.</p>
<p>Some users have the false impression that <code>StoryInit</code> is not run when the story is restarted when the playthrough session is restored or autosave is loaded.  Code like <code>&lt;&lt;set $y to 1&gt;&gt;</code> <em>seems</em> to have no effect because the startup state is replaced by the of the incoming state, <strong>but they are still executed by the engine</strong>.  You can see this effect by changing data <em>outside</em> the state.  For example, let's return to the example above and change it again:</p>
<pre><code>:: StoryInit
&lt;&lt;set $x to 0&gt;&gt;
&lt;&lt;set setup.y to 1&gt;&gt;

:: Start
$$x is &lt;&lt;if def $x&gt;&gt; $x &lt;&lt;else&gt;&gt; undefined &lt;&lt;/if&gt;&gt;
setup.y is &lt;&lt;if def setup.y&gt;&gt; &lt;&lt;= setup.y&gt;&gt; &lt;&lt;else&gt;&gt; undefined &lt;&lt;/if&gt;&gt;
</code></pre>
<p>You'll see that <code>setup.y</code> is being set to <code>1</code> and displayed properly regardless of whether you load a saved story or not, because it is not part of the state.</p>
<p>When the story is restarted by SugarCube rather than refreshed via the browser, the playthrough session, if any, is not loaded.  <code>StoryInit</code> is run, as always.  If the autosave exists and the story is <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-autoload">configured to automatically load it</a>, then the autosave is loaded and the state is replaced by the autosave's state and the active passage is rendered, just as if the user had loaded any other save.  If no autosave exists, then the starting passage is rendered.</p>

<!-- ***********************************************************************************************
	Guide: Tips
************************************************************************************************ -->
<h1 id="guide-tips"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-tips" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Guide: Tips </span></h1>
<p>This is a collection of tips, from how-tos to best practices.</p>
<p>Suggestions for new entries may be submitted by <a href="https://github.com/tmedwards/sugarcube-2/issues">creating a new issue</a> at SugarCube's <a href="https://github.com/tmedwards/sugarcube-2">source code repository</a>.</p>
<!-- *********************************************************************** -->
<h3 id="guide-tips-arbitrarily-long-return"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-tips-arbitrarily-long-return" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Arbitrarily long return </span></h3>
<p role="note" class="warning"><b>Warning:</b>
Navigating back to a previous passage, for whatever reason, can be problematic.  There's no way for the system to know ahead of time whether it's safe to re-execute a passage's contents.  Even if it did know that, there's no way for it to know which operations may or may not have side-effectse.g., changing variables.  Thus, if you allow players to return to passages, then you should either: ensure the passages contain no code that has side-effects or wrap that code in something to prevent re-executione.g., <code>&lt;&lt;if visited() is 1&gt;&gt;side-effects&lt;&lt;/if&gt;&gt;</code>.
</p>
<p role="note" class="note"><b>Note:</b>
An alternative to navigating to passages to create menus, inventories, and the like would be to use the <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api"><code>Dialog</code> API</a>.
</p>
<p>When you have a situation where you're using a set of passages as some kind of menu/inventory/etc and it's possible for the player to interact with several of those passages, or even simply the same one multiple times, then returning them to the passage they were at before entering the menu can be problematic as they're possibly several passages removed from that originating passagethus, the <code>&lt;&lt;return&gt;&gt;</code> macro and link constructs like <code>[[Return|previous()]]</code> will not work.</p>
<p>The most common way to resolve this arbitrarily long return issue is to use a bit of JavaScript to record the last non-menu passage the player visited into a story variable and then to create a link with that.</p>
<p>For example, you may use the following JavaScript code to record the last non-menu passage into the <code>$return</code> story variable: (Twine&nbsp;2: the Story JavaScript, Twine&nbsp;1/Twee: a <code>script</code>-tagged passage)</p>
<pre><code>$(document).on(':passagestart', function (ev) {
	if (!ev.passage.tags.includes('noreturn')) {
		State.variables.return = ev.passage.title;
	}
});
</code></pre>
<p>You'll need to tag each and every one of your menu passages with <code>noreturn</code>you may use any tag you wish (e.g., <code>menu</code>, <code>inventory</code>), just ensure you change the name in the code if you decide upon another.  If necessary, you may also use multiple tags by switching from <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-includes"><code>&lt;Array&gt;.includes()</code></a> to <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-includesany"><code>&lt;Array&gt;.includesAny()</code></a> in the above example.</p>
<p>In your menu passages, your long return links will simply reference the <code>$return</code> story variable, like so:</p>
<pre><code> Using link markup
[[Return|$return]]

 Using &lt;&lt;link&gt;&gt; macro (separate argument form)
&lt;&lt;link "Return" $return&gt;&gt;&lt;&lt;/link&gt;&gt;
</code></pre>
<p role="note" class="warning"><b>Warning (Twine&nbsp;2):</b>
Due to how the Twine&nbsp;2 automatic passage creation feature currently works, using the link markup form will cause a passage named <code>$return</code> to be created that will need to be deleted.  To avoid this problem, it's suggested that you use the separate argument form of the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-link"><code>&lt;&lt;link&gt;&gt;</code> macro</a> in Twine&nbsp;2as shown above.
</p>
<!-- *********************************************************************** -->
<h3 id="guide-tips-non-generic-object-types"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-tips-non-generic-object-types" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Non-generic object types (a.k.a. classes) </span></h3>
<p>As a basic working definition, non-generic object typesa.k.a. classesare instantiable objects whose own prototype is not <code>Object</code>e.g., <code>Array</code> is a native non-generic object type.</p>
<p>Many of the commonly used native non-generic object types are already fully compatible with and supported for use within story variablese.g., <code>Array</code>, <code>Date</code>, <code>Map</code>, and <code>Set</code>.  All other non-generic object types, on the other hand, must be made compatible to be successfully stored within story variables.</p>
<p>Making custom non-generic object types fully compatible requires that two methods be added to their prototype, <code>.clone()</code> and <code>.toJSON()</code>, to support cloningi.e., deep copyinginstances of the type.</p>
<ul>
<li>The <code>.clone()</code> method needs to return a clone of the instance.</li>
<li>The <code>.toJSON()</code> method needs to return a code string that when evaluated will return a clone of the instance.</li>
</ul>
<p>In both cases, since the end goal is roughly the same, this means creating a new instance of the base object type and populating it with clones of the original instance's data.  There is no one size fits all example for either of these methods because an instance's properties, and the data contained therein, are what determine what you need to do.</p>
<p role="note" class="see"><b>See Also:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-json-method-revivewrapper"><code>JSON.reviveWrapper()</code> method</a> for additional information on implementing the <code>.toJSON()</code> method.
</p>
<h4>Examples: <em>(not an exhaustive list)</em></h4>
<h5>Config/option object parameter constructor (automatic copying of own data)</h5>
<p>Here's a simple example whose constructor takes a single config/option object parameter:</p>
<pre><code>window.ContactInfo = function (config) {
	// Set up our own data properties with some defaults.
	this.name    = '';
	this.address = '';
	this.phone   = '';
	this.email   = '';

	// Clone the given config object's own properties into our own properties.
	//
	// NOTE: We use the SugarCube built-in `clone()` function to make deep
	// copies of each of the properties' values.
	Object.keys(config).forEach(function (pn) {
		this[pn] = clone(config[pn]);
	}, this);
};

ContactInfo.prototype.clone = function () {
	// Return a new instance containing our own data.
	return new ContactInfo(this);
};

ContactInfo.prototype.toJSON = function () {
	// Return a code string that will create a new instance containing our
	// own data.
	//
	// NOTE: Supplying `this` directly as the `reviveData` parameter to the
	// `JSON.reviveWrapper()` call will trigger out of control recursion in
	// the serializer, so we must pass it a clone of our own data instead.
	var ownData = {};
	Object.keys(this).forEach(function (pn) {
		ownData[pn] = clone(this[pn]);
	}, this);
	return JSON.reviveWrapper('new ContactInfo($ReviveData$)', ownData);
};
</code></pre>
<p>Creating a new instance of this <code>ContactInfo</code> example would be something like:</p>
<pre><code>&lt;&lt;set $Joe to new ContactInfo({
	name  : 'Joe Blow',
	phone : '1 555 555 1212',
	email : 'joe@blow.com'
})&gt;&gt;
</code></pre>
<h5>Discrete parameters constructor (manual copying of own data)</h5>
<p>Here's a simple example whose constructor takes multiple discrete parameters:</p>
<pre><code>window.ContactInfo = function (name, addr, phone, email) {
	// Set up our own data properties with the given values or defaults.
	this.name    = name || '';
	this.address = addr || '';
	this.phone   = phone || '';
	this.email   = email || '';
};

ContactInfo.prototype.clone = function () {
	// Return a new instance containing our own data.
	return new ContactInfo(
		this.name,
		this.address,
		this.phone,
		this.email
	);
};

ContactInfo.prototype.toJSON = function () {
	// Return a code string that will create a new instance containing our
	// own data.
	return JSON.reviveWrapper(String.format(
		'new ContactInfo({0},{1},{2},{3})',
		JSON.stringify(this.name),
		JSON.stringify(this.address),
		JSON.stringify(this.phone),
		JSON.stringify(this.email)
	));
};
</code></pre>
<p>Creating a new instance of this <code>ContactInfo</code> example would be something like:</p>
<pre><code>&lt;&lt;set $Joe to new ContactInfo(
	'Joe Blow',
	'',
	'1 555 555 1212',
	'joe@blow.com'
)&gt;&gt;
</code></pre>
<h5>Discrete parameters constructor (automatic copying of own data)</h5>
<p>Here's a simple example whose constructor takes multiple discrete parameters, but also includes an <code>._init()</code> helper method to allow the <code>.clone()</code> and <code>.toJSON()</code> methods to require less manual tinkering than the previous discrete parameters example by automatically copying an instance's own data:</p>
<pre><code>window.ContactInfo = function (name, addr, phone, email) {
	// Set up our own data properties with the given values or defaults.
	this.name    = name || '';
	this.address = addr || '';
	this.phone   = phone || '';
	this.email   = email || '';
};

ContactInfo.prototype._init = function (obj) {
	// Clone the given object's own properties into our own properties.
	Object.keys(obj).forEach(function (pn) {
		this[pn] = clone(obj[pn]);
	}, this);

	// Return `this` to make usage easier.
	return this;
};

ContactInfo.prototype.clone = function () {
	// Return a new instance containing our own data.
	return (new ContactInfo())._init(this);
};

ContactInfo.prototype.toJSON = function () {
	// Return a code string that will create a new instance containing our
	// own data.
	//
	// NOTE: Supplying `this` directly as the `reviveData` parameter to the
	// `JSON.reviveWrapper()` call will trigger out of control recursion in
	// the serializer, so we must pass it a clone of our own data instead.
	var ownData = {};
	Object.keys(this).forEach(function (pn) {
		ownData[pn] = clone(this[pn]);
	}, this);
	return JSON.reviveWrapper('(new ContactInfo())._init($ReviveData$)', ownData);
};
</code></pre>
<p>Creating a new instance of this <code>ContactInfo</code> example would be something like:</p>
<pre><code>&lt;&lt;set $Joe to new ContactInfo(
	'Joe Blow',
	'',
	'1 555 555 1212',
	'joe@blow.com'
)&gt;&gt;
</code></pre>

<!-- ***********************************************************************************************
	Guide: Media Passages
************************************************************************************************ -->
<h1 id="guide-media-passages"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-media-passages" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Guide: Media Passages </span></h1>
<p>Media passages are simply a way to embed media into your projectspecially tagged passages that contain the <a href="https://en.wikipedia.org/wiki/Data_URI_scheme">data URI</a> of a Base64-encoded media source.  Audio, image, video, and <abbr title="Video Text Track">VTT</abbr> passages are supported.</p>
<p>For example, the following is the data URI of a Base64-encoded PNG image of a red dot (<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==" alt="Red dot">):</p>
<pre><code>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHE
lEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==
</code></pre>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Image passages.</li>
<li><code>v2.24.0</code>: Added audio, video, and <abbr title="Video Text Track">VTT</abbr> passages.</li>
</ul>
<!-- ***************************************************************************
	Creation
**************************************************************************** -->
<h2 id="guide-media-passages-creation"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-media-passages-creation" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Creation </span></h2>
<p>Generally, it's expected that you will use a compiler that supports the automatic creation of media passages, however, they may be created manually.</p>
<h3>Automatically</h3>
<p>Compilers supporting automatic creation of media passages:</p>
<ul>
<li><a href="http://www.motoslave.net/tweego/">Tweego</a> supports all media passages.</li>
<li><a href="http://www.twinery.org/">Twine&nbsp;1</a> supports image passages.</li>
</ul>
<h3>Manually</h3>
<p role="note" class="warning"><b>Warning (Twine&nbsp;2):</b>
Due to various limitations in its design, if you're using Twine&nbsp;2 as your IDE/compiler, then it is <strong><em>strongly</em></strong> recommended that you do not create more than a few media passages and definitely do not use large sources.
</p>
<p>To manually create a media passage:</p>
<ol>
<li>Create a new passage, which will only be used as a media passageone per media source.</li>
<li>Tag it with the appropriate media passage special tag, and only that tagsee below.</li>
<li>Paste in the Base64-encoded media source as the passage's content.</li>
</ol>
<p>See the MDN article <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats"><i>Media formats for HTML audio and video</i></a> for more information on formats commonly supported in browserspay special attention to the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats#Browser_compatibility"><i>Browser compatibility</i></a> section.</p>
<h4>Media passage special tags</h4>
<p role="note"><b>Note:</b>
As with all special tags, media passage tags are case sensitive, so their spelling and capitalization must be <em>exactly</em> as shown.
</p>
<table>
<thead>
	<tr>
		<th>Passage type</th>
		<th>Tag</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>Audio passage</td>
		<td><code>Twine.audio</code></td>
	</tr>
	<tr>
		<td>Image passage</td>
		<td><code>Twine.image</code></td>
	</tr>
	<tr>
		<td>Video passage</td>
		<td><code>Twine.video</code></td>
	</tr>
	<tr>
		<td><abbr title="Video Text Track">VTT</abbr> passage</td>
		<td><code>Twine.vtt</code></td>
	</tr>
</tbody>
</table>

<!-- ***********************************************************************************************
	Guide: Harlowe to SugarCube
************************************************************************************************ -->
<h1 id="guide-harlowe-to-sugarcube"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-harlowe-to-sugarcube" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Guide: Harlowe to SugarCube </span></h1>
<p>There are many differences between Harlowe and SugarCube, this guide will document some of the most critical you will need to account for if you're coming to SugarCube from a background in Harlowe.</p>
<!-- ***************************************************************************
	Macro Overview
**************************************************************************** -->
<h2 id="guide-harlowe-to-sugarcube-macro-overview"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-harlowe-to-sugarcube-macro-overview" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Macro Overview </span></h2>
<p>Aside from general syntax, SugarCube macros do not use hooks, separate arguments differently, and don't allow other macros to be passed as arguments.</p>
<h3>Macro Arguments</h3>
<p>Like in Harlowe, some SugarCube macros accept expressions and others accept discreet arguments.  In SugarCube, discreet arguments passed to a macro are separated by spaces instead of commas.  To pass expressions or the results of functions to macros as an argument, you must wrap the expression in backquotes (<code>`</code>).</p>
<p>Additionally, macros in SugarCube do not return values, so macros cannot be used as arguments to other macros.  SugarCube provides a variety of functions and methods that may be used instead, and standard JavaScript functions and methods may also be used.</p>
<p>Consider the following Harlowe code:</p>
<pre><code>(link-goto: "Go somewhere else", (either: "this passage", "that passage", "the other passage"))
</code></pre>
<p>A version of the above code in SugarCube might look like this:</p>
<pre><code>&lt;&lt;link "Go somewhere else" `either("this passage", "that passage", "the other passage")`&gt;&gt;&lt;&lt;/link&gt;&gt;
</code></pre>
<p role="note" class="see"><b>See:</b>
<a href="https://www.motoslave.net/sugarcube/2/docs/#macros-arguments">Macro Arguments</a>.
</p>
<h3>Container Macros</h3>
<p>Where Harlowe uses its hook syntax (square brackets) to associate a macro with its contents, SugarCube instead uses "container" macrosmacros that can have content associated with them have opening and closing tags.</p>
<p>Consider the following Harlowe code:</p>
<pre><code>(if: $var is 1)[
	The variable is 1.
]
</code></pre>
<p>In SugarCube, you instead open and close the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-if"><code>&lt;&lt;if&gt;&gt;</code></a> macro itself:</p>
<pre><code>&lt;&lt;if $var is 1&gt;&gt;
	The variable is 1.
&lt;&lt;/if&gt;&gt;
</code></pre>
<!-- ***************************************************************************
	Specific Macros
**************************************************************************** -->
<h2 id="guide-harlowe-to-sugarcube-specific-macros"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-harlowe-to-sugarcube-specific-macros" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Specific Macros </span></h2>
<p>Some macros in Harlowe and SugarCube share a name but work a bit differently.  We'll cover some of these differences below.</p>
<h3>Link and Click Macros</h3>
<p>SugarCube does not have any equivalents to Harlowe's <code>(click:)</code> family of macros.  Additionally, SugarCube's normal <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-link"><code>&lt;&lt;link&gt;&gt;</code></a> macro does not have an output element associated with it and is not, by default, a single-use link like its Harlowe equivalent.  Both of these features can be constructed in SugarCube, however, using macros like <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-linkreplace"><code>&lt;&lt;linkreplace&gt;&gt;</code></a> or by combining <code>&lt;&lt;link&gt;&gt;</code> macros with <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-dom">DOM macros</a>.  Additionally, SugarCube's link macro accepts a passage argument, that, if included, turns any <code>&lt;&lt;link&gt;&gt;</code> into something similar to Harlowe's <code>(link-goto:)</code> macro.</p>
<p>Consider the following Harlowe link macros:</p>
<pre><code>(link: "Hey there.")[Hay is for horses.]
(link-repeat: "Get some money")[(set: $cash to it + 1)]
(link-goto: "Move on", "next passage")
</code></pre>
<p>The equivalent SugarCube code for each link might look something like this:</p>
<pre><code>&lt;&lt;linkreplace "Hey there."&gt;&gt;Hay is for horses.&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link "Get some money"&gt;&gt;&lt;&lt;set $cash += 1&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link "Move on" "next passage"&gt;&gt;&lt;&lt;/link&gt;&gt;
</code></pre>
<p>SugarCube's <code>&lt;&lt;link&gt;&gt;</code> and <code>&lt;&lt;button&gt;&gt;</code> macros can also accept the link markup as an argument:</p>
<pre><code>&lt;&lt;link [[Move on|next passage]]&gt;&gt;&lt;&lt;/link&gt;&gt;
</code></pre>
<h3>DOM Macros</h3>
<p role="note"><b>Note:</b>
Harlowe refers to these as "revision macros".
</p>
<p>SugarCube's DOM macros can target any HTML element on the page, not just hooks, and unlike their Harlowe equivalents, they cannot target arbitrary strings.  You can use custom style markup or HTML to create the elements, and then target them with a query selector.</p>
<p>Consider the following Harlowe code:</p>
<pre><code>(set: _greetings to (a: "hi", "hello", "good day", "greetings"))\
The man says, "|target&gt;[(either: ..._greetings)]."

{
(link-repeat: "Change")[
	(replace: ?target)[(either: ..._greetings)]
]
}
</code></pre>
<p>The equivalent SugarCube code to achieve a similar result would be:</p>
<pre><code>&lt;&lt;set _greetings to ["hi", "hello", "good day", "greetings"]&gt;&gt;\
The man says, "@@#target;&lt;&lt;= _greetings.random()&gt;&gt;@@."

&lt;&lt;link "Change"&gt;&gt;
	&lt;&lt;replace "#target"&gt;&gt;&lt;&lt;= _greetings.random()&gt;&gt;&lt;&lt;/replace&gt;&gt;
&lt;&lt;/link&gt;&gt;
</code></pre>
<p role="note"><b>Note:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-dom">DOM macros</a> do have a limitation that you should familiarize yourself with.
</p>
<h3>The Goto Macro</h3>
<p>Harlowe's implementation of the <code>(goto:)</code> macro terminates the rendering passage.  In SugarCube, the passage is not terminated, and anything in the code below the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-goto"><code>&lt;&lt;goto&gt;&gt;</code></a> macro will have side effects.</p>
<p>Consider this Harlowe code:</p>
<pre><code>:: some passage
(set: $count to 0)
(goto: "next")
(set: $count to it + 1)

:: next
$count &lt;!-- 0 --&gt;
</code></pre>
<p>In the above, the second <code>(set:)</code> macro is never run, and the <code>$count</code> variable remains at 0.</p>
<p>The equivalent SugarCube code works a bit differently:</p>
<pre><code>:: some passage
&lt;&lt;set $count to 0&gt;&gt;
&lt;&lt;goto "next"&gt;&gt;
&lt;&lt;set $count += 1&gt;&gt;

:: next
$count /* 1 */
</code></pre>
<p>SugarCube does not terminate the parsing of the calling passage, so some care is required when calling <code>&lt;&lt;goto&gt;&gt;</code>.</p>
<p>As with <code>&lt;&lt;link&gt;&gt;</code> and <code>&lt;&lt;button&gt;&gt;</code>, <code>&lt;&lt;goto&gt;&gt;</code> can accept link markup as its argument:</p>
<pre><code>&lt;&lt;goto [[next]]&gt;&gt;
</code></pre>
<!-- ***************************************************************************
	User Input
**************************************************************************** -->
<h2 id="guide-harlowe-to-sugarcube-user-input"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-harlowe-to-sugarcube-user-input" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>User Input </span></h2>
<p>SugarCube's user input macros, like <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-textbox"><code>&lt;&lt;textbox&gt;&gt;</code></a>, cannot be nested inside a <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-set"><code>&lt;&lt;set&gt;&gt;</code></a> macro, as you might do with a <code>(prompt:)</code> and a <code>(set:)</code> in Harlowe.  Instead, the macro is passed a <em>receiver variable</em> which is set to the value input by the user.</p>
<p>For example, if you wanted to ask the user to enter a name, your code may look like this in Harlowe:</p>
<pre><code>(set: $name to (prompt: "What is your name?", "Frank"))
</code></pre>
<p>In SugarCube, you would likely want to use the <code>&lt;&lt;textbox&gt;&gt;</code> macro instead, and pass <code>$name</code> in as the receiving variable:</p>
<pre><code>&lt;label&gt;What is your name? &lt;&lt;textbox "$name" "Frank"&gt;&gt;&lt;/label&gt;
</code></pre>
<p>Harlowe's newer input macros, like <code>(dropdown:)</code> and <code>(cycling-link:)</code> use "bound" variables, which are similar in concept to SugarCube's receiver variables.</p>
<!-- ***************************************************************************
	Data Types
**************************************************************************** -->
<h2 id="guide-harlowe-to-sugarcube-data-types"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-harlowe-to-sugarcube-data-types" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Data Types </span></h2>
<p>Harlowe's implementation of data types differs significantly from SugarCube's.  A data type refers to the "type" of data a variable is holding, such as a number, a string, an array, or anything else.  Harlowe has stricter typing than SugarCube, requiring authors to call macros like <code>(str:)</code> or <code>(num:)</code> on variables to change their type.  SugarCube, like JavaScript, uses <em>dynamic</em> typing.</p>
<h3>Dynamic Typing</h3>
<p>SugarCube, like JavaScript, will try to make sense of expressions passed to it by <em>coercing</em> their values if necessary:</p>
<pre><code>&lt;&lt;set $number to 1&gt;&gt;
&lt;&lt;set $string to "2"&gt;&gt;
&lt;&lt;= $string + $number&gt;&gt; /* "21" */
</code></pre>
<p>In the above case, since the string value <code>"2"</code> cannot be added to a number value, the number value is <em>coerced</em> into a string, and the two strings are then <em>concatenated</em>.  In Harlowe, the same operation will yield an error:</p>
<pre><code>(set: $number to 1)
(set: $string to "2")
(print: $string + $number) &lt;!-- error! --&gt;
</code></pre>
<p>You <em>must</em> convert the values to the same type in Harlowe.  In SugarCube you <em>can</em> convert them if you need to.</p>
<p>In Harlowe:</p>
<pre><code>(set: $number to 1)
(set: $string to "2")
(print: $string + $number) &lt;!-- error! --&gt;
(print: $string + (str: $number)) &lt;!-- "21" --&gt;
(print: (num: $string) + $number) &lt;!-- 3 --&gt;
</code></pre>
<p>In SugarCube:</p>
<pre><code>&lt;&lt;set $number to 1&gt;&gt;
&lt;&lt;set $string to "2"&gt;&gt;
&lt;&lt;= $string + $number&gt;&gt; /* "21" */
&lt;&lt;= $string + String($number)&gt;&gt; /* "21" */
&lt;&lt;= Number($string) + $number&gt;&gt; /* 3 */
</code></pre>
<h3>Arrays, Datamaps, and Datasets</h3>
<p>Harlowe's arrays, datamaps, and datasets are functionally similar to JavaScript <code>Array</code>s, <code>Map</code>s, and <code>Set</code>s, but with a few key differences.  SugarCube requires authors to define and work with these data types using the standard JavaScript methods rather than providing macros for them.</p>
<p>Using an array in Harlowe:</p>
<pre><code>(set: $array to (a:))
(set: $array to it + (a: "something"))
(if: $array contains "something")[]
</code></pre>
<p>In SugarCube:</p>
<pre><code>&lt;&lt;set $array to []&gt;&gt;
&lt;&lt;run $array.push("something")&gt;&gt;
&lt;&lt;if $array.includes("something")&gt;&gt;&lt;&lt;/if&gt;&gt;
</code></pre>
<p>Using a datamap in Harlowe:</p>
<pre><code>(set: $map to (dm: "key", "value"))
(set: $map's key to "another value")
(if: $map contains key)[]
</code></pre>
<p>In SugarCube:</p>
<pre><code>&lt;&lt;set $map to new Map([["key", "value"]])&gt;&gt;
&lt;&lt;run $map.set("key", "another value")&gt;&gt;
&lt;&lt;if $map.has("key")&gt;&gt;&lt;&lt;/if&gt;&gt;
</code></pre>
<p>SugarCube also allows the use of JavaScript generic objects, which may be better in some situations than a map:</p>
<pre><code>&lt;&lt;set $object to { key : "value" }&gt;&gt;
&lt;&lt;set $object.key to "another value"&gt;&gt;
&lt;&lt;if $object.hasOwnProperty("key")&gt;&gt;&lt;&lt;/if&gt;&gt;
</code></pre>
<p>Another important difference in the way Harlowe handles its non-primitive data types like arrays, datamaps, and datasets is that they are <em>passed by value</em> rather than <em>passed by reference</em>.</p>
<p>Consider the following Harlowe code:</p>
<pre><code>(set: $player to (dm: "hp", 100, "mp", 50))
(set: $partyMember to $player)
(set: $partyMember's hp to it - 50)
(print: $player's hp) &lt;!-- 100 --&gt;
(print: $partyMember's hp) &lt;!-- 50 --&gt;
</code></pre>
<p>As you can see, Harlowe creates a deep copy/clone of its non-primitive data types each time they're modified.</p>
<p>In SugarCube, both variables would still point to the same underlying objectat least initially (see below):</p>
<pre><code>&lt;&lt;set $player to { hp : 100, mp : 50 }&gt;&gt;
&lt;&lt;set $partyMember to $player&gt;&gt;
&lt;&lt;set $partyMember.hp -= 50&gt;&gt;
$player.hp /* 50 */
$partyMember.hp /* 50 */
</code></pre>
<p>SugarCube does eventually clone its non-primitive data types as well, but does at the start of passage navigation, rather than each time they're modified.</p>

<!-- ***********************************************************************************************
	Guide: Test Mode
************************************************************************************************ -->
<h1 id="guide-test-mode"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-test-mode" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Guide: Test Mode </span></h1>
<h4>History:</h4>
<ul>
<li><code>v2.2.0</code>: Introduced.</li>
</ul>
<!-- ***************************************************************************
	Introduction
**************************************************************************** -->
<h2 id="guide-test-mode-introduction"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-test-mode-introduction" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Introduction </span></h2>
<p>In test mode, SugarCube will wrap all macros, and some non-macro markupe.g., link &amp; image markupwithin additional HTML elements, called "debug views" ("views" for short).  Views make their associated code visible, thus providing onscreen feedbackthey may also be hovered over which, generally, exposes additional information about the underlying code.</p>
<p role="note" class="warning"><b>Warning:</b>
Because of the additional HTML elements added by the debug views, some nested markup and selectors may be broken.  This only affects test mode.
</p>
<p role="note" class="tip"><b>Tip:</b>
In versions of SugarCube v2.23.0, the debugging interface offers additional tools, namely variable watches and arbitrary history navigation.
</p>
<!-- ***************************************************************************
	Enabling Test Mode
**************************************************************************** -->
<h2 id="guide-test-mode-enabling"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-test-mode-enabling" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Enabling Test Mode </span></h2>
<h3>Automatically</h3>
<h4>In Tweego</h4>
<p>To enable test mode, use the test option (<code>-t</code>, <code>--test</code>).</p>
<h4>In Twine&nbsp;2 (v2.2)</h4>
<p>To enable test mode from the <em>Stories</em> screen, click on the story's gear menu and select the <em>Test Story</em> menu item.</p>
<p>To enable test mode from the story editor/map screen, click on the <em><i class="icon bug"></i>Test</em> menu item (right side of the bottom bar).</p>
<p>To enable test mode from the story editor/map screen while starting at a specific passage, hover over a passage and select the <em><i class="icon play" title="Test story starting here" aria-label="Test story starting here"></i></em> menu item.</p>
<h4>In Twine&nbsp;2 (&lt;v2.2)</h4>
<p>To enable test mode from the <em>Stories</em> screen, click on the story's gear menu and select the <em>Test Play</em> menu item.</p>
<p>To enable test mode from the story editor/map screen, click on the <em><i class="icon bug"></i>Test</em> menu item (right side of the bottom bar).</p>
<p>To enable test mode from the story editor/map screen while starting at a specific passage, hover over a passage and select the <em><i class="icon bug" title="Test story starting here" aria-label="Test story starting here"></i></em> menu item.</p>
<h4>In Twine&nbsp;1</h4>
<p>To enable test mode while starting at a specific passage, right-click on a passage and select the <em>Test Play From Here</em> context menu item.</p>
<p role="note"><b>Note:</b>
Unfortunately, due to limitations in the current release of Twine&nbsp;1, the <em>Build</em> menu's <em>Test Play</em> menu item is not able to trigger test mode.  You may, however, simply use the <em>Test Play From Here</em> context menu item on the <code>Start</code> passage to achieve the same result.
</p>
<h3>Manually</h3>
<p>You may forcibly enable test mode manually by setting the <code>Config</code> object's <code>debug</code> property to <code>true</code>.  For example:</p>
<pre><code>Config.debug = true; // forcibly enable test mode
</code></pre>
<p role="note" class="see"><b>See:</b>
The <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-debug"><code>Config.debug</code> setting</a> for more information.
</p>
<!-- ***************************************************************************
	Debug Bar (v2.23.0)
**************************************************************************** -->
<h2 id="guide-test-mode-debug-bar"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-test-mode-debug-bar" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Debug Bar (v2.23.0) </span></h2>
<p>The debug bar (bottom right corner of the page) allows you to: watch the values of story and temporary variables, toggle the debug views, and jump to any moment/turn within the history.</p>
<p>The variable watch panel may be toggled via the <em>Watch&nbsp;<i class="icon toggle-off"></i></em> button.  To add a watch for a variable, type its name into the <em>Add</em> field and then either press enter/return or click the <em><i class="icon plus" title="Add watch" aria-label="Add watch"></i></em> buttonn.b. depending on the age of your browser, you may also see a list of all current variables when interacting with the <em>Add</em> field.  To delete a watch, click the <em><i class="icon cancel" title="Delete watch" aria-label="Delete watch"></i></em> button next to its name in the watch panel.  To add watches for all current variables, click the <em><i class="icon magic" title="Watch all" aria-label="Watch all"></i></em> button.  To delete all current watches, click the <em><i class="icon trash" title="Delete all" aria-label="Delete all"></i></em> button.</p>
<p>The debug views may be toggled via the <em>Views&nbsp;<i class="icon toggle-off"></i></em> button.</p>
<p>To jump to any moment/turn within the available history, select the moment/turn from the <em>Turn</em> select field.</p>
<!-- ***************************************************************************
	Debug Views (v2.22.0)
**************************************************************************** -->
<h2 id="guide-test-mode-debug-views"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-test-mode-debug-views" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Debug Views (v2.22.0) </span></h2>
<p>The debug views themselves may be toggled on and off (default: on) via the <em><i class="icon bug"></i>Debug View</em> button (top of the UI bar).</p>
<p>If you've removed/hidden the UI bar, a construct like the following will allow you to toggle the views on and off:</p>
<pre><code>&lt;&lt;button "Toggle Debug Views"&gt;&gt;&lt;&lt;script&gt;&gt;DebugView.toggle()&lt;&lt;/script&gt;&gt;&lt;&lt;/button&gt;&gt;
</code></pre>
<p role="note"><b>Note:</b>
That will only toggles the views, test mode must still be enabled first.
</p>

<!-- ***********************************************************************************************
	Guide: TypeScript
************************************************************************************************ -->
<h1 id="guide-typescript"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-typescript" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Guide: TypeScript </span></h1>
<p>TypeScript bindings for SugarCube APIs can found as the <a href="https://definitelytyped.org/">Definitely Typed</a> package: <code>@types/twine-sugarcube</code>.</p>
<p>To install the package via NPM, use the following command:</p>
<pre><code>npm install --save-dev @types/twine-sugarcube
</code></pre>

<!-- ***********************************************************************************************
	Guide: Installation
************************************************************************************************ -->
<h1 id="guide-installation"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-installation" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Guide: Installation </span></h1>
<p>This is a reference on how to install SugarCube in Tweego, Twine&nbsp;2, and Twine&nbsp;1/Twee.</p>
<p role="note"><b>Note (Twine&nbsp;2):</b>
Newer versions of Twine&nbsp;2 come bundled with a version of SugarCube v2, so you only need to read these instructions if you want to install a newer version of SugarCube v2 than is bundled or a non-standard release.
</p>
<!-- ***************************************************************************
	Local Installation For Tweego
**************************************************************************** -->
<h2 id="guide-installation-tweego"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-installation-tweego" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Local Install For Tweego </span></h2>
<p>See <a href="http://www.motoslave.net/tweego/docs/">Tweego's documentation</a> for more information.</p>
<!-- ***************************************************************************
	Local Installation For Twine 2
**************************************************************************** -->
<h2 id="guide-installation-twine2"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-installation-twine2" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Local Install For Twine&nbsp;2 </span></h2>
<p>There are two primary branches of Twine&nbsp;2 as far as SugarCube is concerned:</p>
<ul>
<li>Those that bundle SugarCube v2: Any series of Twine&nbsp;2 with a version 2.1.</li>
<li>Those that do not bundle SugarCube v2: Only the older Twine&nbsp;2.0 series.</li>
</ul>
<p>Regardless of the version of Twine&nbsp;2 you're using, follow these instructions to install a local copy of SugarCube v2:</p>
<ol>
<li>Download the current version of <a href="http://www.motoslave.net/sugarcube/2/#downloads">SugarCube v2 for Twine&nbsp;2</a>comes as a ZIP archive.  <strong>NOTE:</strong> There are separate downloads for Twine&nbsp;2.1 and Twine&nbsp;2.0, so you <em><strong>must</strong></em> ensure that you download the one that matches your version of Twine&nbsp;2 or you will likely run into issues.</li>
<li>Extract the archive to a safe location on your computer and make note of the path to it.  Make sure to keep the files together if you move them out of the included directory.</li>
<li>Launch Twine&nbsp;2.</li>
<li>Click on the <code>Formats</code> link in the Twine&nbsp;2 sidebar.</li>
<li>In the dialog that opens, click on the <code>Add a New Format</code> tab.</li>
<li>Finally, paste a <a href="http://en.wikipedia.org/wiki/File_URI_scheme">file URL</a> to the <code>format.js</code> file, based upon the path from step #2, into the textbox and click the <code>+Add</code> button (see below for examples).</li>
</ol>
<h3>UNIX (and similar) file URL examples</h3>
<p role="note"><b>Note:</b>
If constructing the file URL from a shell path, ensure that either it does not contain escapes or you properly convert them into the correct URL percent-encoded form.
</p>
<p>If the full path to the contents of the archive is something like:</p>
<pre><code>/home/soandso/Twine/StoryFormats/SugarCube-2/format.js
</code></pre>
<p>Then the file URL to it would be:</p>
<pre><code>file:///home/soandso/Twine/StoryFormats/SugarCube-2/format.js
</code></pre>
<h3>Windows file URL examples</h3>
<p>If the full path to the contents of the archive is something like:</p>
<pre><code>C:\Users\soandso\Documents\Twine\StoryFormats\SugarCube-2\format.js
</code></pre>
<p>Then the file URL to it would be (note the changed slashes):</p>
<pre><code>file:///C:/Users/soandso/Documents/Twine/StoryFormats/SugarCube-2/format.js
</code></pre>
<!-- ***************************************************************************
	Online Installation For Twine 2
**************************************************************************** -->
<h2 id="guide-installation-twine2-online"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-installation-twine2-online" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Online Install For Twine&nbsp;2 </span></h2>
<p>The online SugarCube install, delivered by the <a href="https://www.jsdelivr.com/">jsDelivr CDN</a>, supports only versions of Twine&nbsp;2 2.1.</p>
<p>Copy the following URL and paste it into the <em>Add a New Format</em> tab of the <em>Formats</em> menu, from Twine&nbsp;2's sidebar.</p>
<p><strong>URL:</strong> <a href="https://cdn.jsdelivr.net/gh/tmedwards/sugarcube-2/dist/format.js">https://cdn.jsdelivr.net/gh/tmedwards/sugarcube-2/dist/format.js</a></p>
<!-- ***************************************************************************
	Local Installation For Twine 1/Twee
**************************************************************************** -->
<h2 id="guide-installation-twine1-twee"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-installation-twine1-twee" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Local Install For Twine&nbsp;1/Twee </span></h2>
<p>Follow these instructions to install a local copy of SugarCube v2:</p>
<ol>
<li>Download the current version of <a href="http://www.motoslave.net/sugarcube/2/#downloads">SugarCube v2 for Twine&nbsp;1/Twee</a>comes as a ZIP archive.</li>
<li>Go to your Twine&nbsp;1/Twee installation directory and open the <code>targets</code> directory within.</li>
<li>Move the downloaded archive into the <code>targets</code> directory and extract it, included directory and all.</li>
</ol>
<p>If you followed the steps correctly, within Twine&nbsp;1/Twee's <code>targets</code> directory you should now have a <code>sugarcube-2</code> directory, which contains several filese.g., <code>header.html</code>, <code>sugarcube-2.py</code>, etc.</p>
<div role="note" class="warning"><b>Warning (Twine&nbsp;1):</b>
<p>
Due to a flaw in the current release of Twine&nbsp;1/Twee (<code>v1.4.2</code>), if you rename the directory included in the archive (or simply copy its contents to your current SugarCube v2 install), then you <strong><em>must</em></strong> ensure that the file with the extension <code>.py</code> (the story format's custom Twine&nbsp;1 Header class file) within is named the same as the directoryi.e., the name of the directory and <code>.py</code> file must match.
</p>
<p>
For example, if the name of SugarCube's directory is <code>sugarcube</code>, then the name of the <code>.py</code> file within must be <code>sugarcube.py</code>.  Similarly, if the directory is <code>sugarcube-2</code>, then the name of the <code>.py</code> file within must be <code>sugarcube-2.py</code>.  Etc.
</p>
<p>
The directory and <code>.py</code> file names within the archive available for download are already properly matchedas <code>sugarcube-2</code> and <code>sugarcube-2.py</code>and to avoid issues it recommended that you simply do not rename them.
</p>
</div>

<!-- ***********************************************************************************************
	Guide: Code Updates
************************************************************************************************ -->
<h1 id="guide-code-updates"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Guide: Code Updates<!-- legacy --><span id="guide-upgrading"></span><!-- /legacy --> </span></h1>
<p>This is a reference on how to update existing SugarCube code to work with newer versions of SugarCube.</p>
<p role="note"><b>Note:</b>
The majority of newer SugarCube versions do not have any changes that would require an update.  For those versions that do, the updates are normally completely elective and may be addressed at your leisure, or not at all.  Sometimes there are breaking changes, however, and these must be addressed immediately.
</p>
<!-- ***************************************************************************
	Updating to any version 2.30.0 from a lesser version
**************************************************************************** -->
<h2 id="guide-code-updates-2.30.0"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.30.0" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Updating to any version 2.30.0 from a lesser version </span></h2>
<p>All changes within this version are elective changes that you may address at your leisure.</p>
<h3><code>Config</code> API</h3>
<table>
	<thead>
		<tr>
			<th>Property</th>
			<th>Changes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>Config.saves.autosave</code></td>
			<td>This setting property has been updated to accept function values and its acceptance of string values has been deprecated.  String values will still be accepted for further releases of v2, however, switching to an array is recommendede.g., the string value <code>"autosave"</code> would become the array <code>["autosave"]</code>.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-saves-autosave"><code>Config.saves.autosave</code> property</a> for more information.</td>
		</tr>
	</tbody>
</table>
<!-- ***************************************************************************
	Updating to any version 2.29.0 from a lesser version
**************************************************************************** -->
<h2 id="guide-code-updates-2.29.0"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.29.0" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Updating to any version 2.29.0 from a lesser version </span></h2>
<p>All changes within this version are elective changes that you may address at your leisure.</p>
<h3><code>Dialog</code> API</h3>
<table>
	<thead>
		<tr>
			<th>Method</th>
			<th>Changes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>Dialog.addClickHandler()</code></td>
			<td>This method has been deprecated and should no longer be used.  The core of what it does is simply to wrap a call to <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-open"><code>Dialog.open()</code></a> within a call to <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-jquery-prototype-method-ariaclick"><code>&lt;jQuery&gt;.ariaClick()</code></a>, which can be done directly and with greater flexibility.</td>
		</tr>
	</tbody>
</table>
<h3>Macro library</h3>
<table>
	<thead>
		<tr>
			<th>Macro</th>
			<th>Changes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>&lt;&lt;track&gt;&gt;</code> <small>(of:&nbsp;<code>&lt;&lt;createplaylist&gt;&gt;</code>)</small></td>
			<td>The <code>&lt;&lt;createplaylist&gt;&gt;</code> macro's &lt;&lt;track&gt;&gt; child macro has had its <code>copy</code> keyword deprecated in favor of <code>own</code>.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-createplaylist"><code>&lt;&lt;createplaylist&gt;&gt;</code> macro</a> for more information.</td>
		</tr>
		<tr>
			<td><code>&lt;&lt;forget&gt;&gt;</code></td>
			<td>The <code>&lt;&lt;forget&gt;&gt;</code> macro has been deprecated in favor of the <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-forget"><code>forget()</code></a> function.</td>
		</tr>
		<tr>
			<td><code>&lt;&lt;remember&gt;&gt;</code></td>
			<td>The <code>&lt;&lt;remember&gt;&gt;</code> macro has been deprecated in favor of the <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-memorize"><code>memorize()</code></a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-recall"><code>recall()</code></a> functions.</td>
		</tr>
	</tbody>
</table>
<h3>Method library</h3>
<table>
	<thead>
		<tr>
			<th>Method</th>
			<th>Changes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>&lt;Array&gt;.flatten()</code></td>
			<td>This method has been deprecated in favor of the <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-flat"><code>&lt;Array&gt;.flat()</code></a> method.</td>
		</tr>
	</tbody>
</table>
<h3><code>State</code> API</h3>
<table>
	<thead>
		<tr>
			<th>Method</th>
			<th>Changes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>State.initPRNG()</code></td>
			<td>This method has been deprecated in favor of the <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-prng-init"><code>State.prng.init()</code></a> method.</td>
		</tr>
	</tbody>
</table>
<!-- ***************************************************************************
	Updating to any version 2.28.0 from a lesser version
**************************************************************************** -->
<h2 id="guide-code-updates-2.28.0"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.28.0" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Updating to any version 2.28.0 from a lesser version </span></h2>
<p>All changes within this version are elective changes that you may address at your leisure.</p>
<h3>Macro library</h3>
<table>
	<thead>
		<tr>
			<th>Macro</th>
			<th>Changes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>&lt;&lt;cacheaudio&gt;&gt;</code></td>
			<td>The <code>&lt;&lt;cacheaudio&gt;&gt;</code> macro's original optional format specifier syntax, <code>format:formatId;</code>, has been deprecated in favor of the new syntax, <code>formatId|</code>..</td>
		</tr>
	</tbody>
</table>
<!-- ***************************************************************************
	Updating to any version 2.20.0 from a lesser version
**************************************************************************** -->
<h2 id="guide-code-updates-2.20.0"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.20.0" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Updating to any version 2.20.0 from a lesser version </span></h2>
<p>All changes within this version are elective changes that you may address at your leisure.</p>
<h3>Method library</h3>
<table>
	<thead>
		<tr>
			<th>Method</th>
			<th>Changes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>Array.random()</code></td>
			<td>This method has been deprecated and should no longer be used.  In general, look to the <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-random"><code>&lt;Array&gt;.random()</code></a> method instead.  If you need a random member from an array-like object or iterable, use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from"><code>Array.from()</code></a> method to convert it to an array, then use <code>&lt;Array&gt;.random()</code>e.g., <code>Array.from(something).random()</code>.</td>
		</tr>
	</tbody>
</table>
<!-- ***************************************************************************
	Updating to any version 2.15.0 from a lesser version
**************************************************************************** -->
<h2 id="guide-code-updates-2.15.0"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.15.0" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Updating to any version 2.15.0 from a lesser version<!-- legacy --><span id="guide-upgrading-2.15.0"></span><!-- /legacy --> </span></h2>
<p>All changes within this version are elective changes that you may address at your leisure.</p>
<h3>Macro library</h3>
<table>
	<thead>
		<tr>
			<th>Macro</th>
			<th>Changes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>&lt;&lt;display&gt;&gt;</code></td>
			<td>The <code>&lt;&lt;display&gt;&gt;</code> macro has been deprecated in favor of the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-include"><code>&lt;&lt;include&gt;&gt;</code> macro</a>.</td>
		</tr>
	</tbody>
</table>
<!-- ***************************************************************************
	Updating to any version 2.10.0 from a lesser version
**************************************************************************** -->
<h2 id="guide-code-updates-2.10.0"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.10.0" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Updating to any version 2.10.0 from a lesser version<!-- legacy --><span id="guide-upgrading-2.10.0"></span><!-- /legacy --> </span></h2>
<p>All changes within this version are elective changes that you may address at your leisure.</p>
<h3>Method library</h3>
<table>
	<thead>
		<tr>
			<th>Method</th>
			<th>Changes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>&lt;Array&gt;.contains()</code></td>
			<td>The <code>&lt;Array&gt;.contains()</code> method has been deprecated in favor of the <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-includes"><code>&lt;Array&gt;.includes()</code></a> method.
			</td>
		</tr>
		<tr>
			<td><code>&lt;Array&gt;.containsAll()</code></td>
			<td>The <code>&lt;Array&gt;.containsAll()</code> method has been deprecated in favor of the <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-includesall"><code>&lt;Array&gt;.includesAll()</code></a> method.
			</td>
		</tr>
		<tr>
			<td><code>&lt;Array&gt;.containsAny()</code></td>
			<td>The <code>&lt;Array&gt;.containsAny()</code> method has been deprecated in favor of the <a href="https://www.motoslave.net/sugarcube/2/docs/#methods-array-prototype-method-includesany"><code>&lt;Array&gt;.includesAny()</code></a> method.
			</td>
		</tr>
	</tbody>
</table>
<h3><code>strings</code> object</h3>
<p>The <code>strings</code> API object has been replaced by the <code>l10nStrings</code> object.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-localization">Localization guide</a> for more information.</p>
<!-- ***************************************************************************
	Updating to any version 2.8.0 from a lesser version
**************************************************************************** -->
<h2 id="guide-code-updates-2.8.0"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.8.0" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Updating to any version 2.8.0 from a lesser version<!-- legacy --><span id="guide-upgrading-2.8.0"></span><!-- /legacy --> </span></h2>
<p>All changes within this version are elective changes that you may address at your leisure.</p>
<h3>Macro library</h3>
<table>
	<thead>
		<tr>
			<th>Macro</th>
			<th>Changes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>&lt;&lt;click&gt;&gt;</code></td>
			<td>The <code>&lt;&lt;click&gt;&gt;</code> macro has been deprecated in favor of the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-link"><code>&lt;&lt;link&gt;&gt;</code> macro</a>.</td>
		</tr>
		<tr>
			<td><code>&lt;&lt;playlist&gt;&gt;</code></td>
			<td>The <code>&lt;&lt;playlist&gt;&gt;</code> macro has had its argument list changed, for compatibility with <code>&lt;&lt;createplaylist&gt;&gt;</code>.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-playlist"><code>&lt;&lt;playlist&gt;&gt;</code> macro</a> for more information.</td>
		</tr>
		<tr>
			<td><code>&lt;&lt;setplaylist&gt;&gt;</code></td>
			<td>The <code>&lt;&lt;setplaylist&gt;&gt;</code> macro has been deprecated in favor of the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-createplaylist"><code>&lt;&lt;createplaylist&gt;&gt;</code> macro</a>.</td>
		</tr>
		<tr>
			<td><code>&lt;&lt;stopallaudio&gt;&gt;</code></td>
			<td>The <code>&lt;&lt;stopallaudio&gt;&gt;</code> macro has been deprecated in favor of <code>&lt;&lt;audio ":all" stop&gt;&gt;</code>.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#macros-macro-audio"><code>&lt;&lt;audio&gt;&gt;</code> macro</a> for more information.</td>
		</tr>
	</tbody>
</table>
<!-- ***************************************************************************
	Updating to any version 2.5.0 from a lesser version
**************************************************************************** -->
<h2 id="guide-code-updates-2.5.0"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.5.0" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Updating to any version 2.5.0 from a lesser version<!-- legacy --><span id="guide-upgrading-2.5.0"></span><!-- /legacy --> </span></h2>
<p>All changes within this version are elective changes that you may address at your leisure.</p>
<h3><code>config</code> API</h3>
<p>The <code>config</code> API has been renamed <code>Config</code> for better consistency with the other APIs.</p>
<h3><code>State</code> API</h3>
<p>Several <code>State</code> API methods have moved to the new <code>Engine</code> API.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api"><code>Engine</code> API</a> docs for more information.</p>
<table>
	<thead>
		<tr>
			<th>Old <code>State</code> method</th>
			<th>New <code>Engine</code> method</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>State.backward()</code></td>
			<td><code>Engine.backward()</code></td>
		</tr>
		<tr>
			<td><code>State.display()</code></td>
			<td><code>Engine.display()</code><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.5.0-fn1">1</a></td>
		</tr>
		<tr>
			<td><code>State.forward()</code></td>
			<td><code>Engine.forward()</code></td>
		</tr>
		<tr>
			<td><code>State.play()</code></td>
			<td><code>Engine.play()</code></td>
		</tr>
		<tr>
			<td><code>State.restart()</code></td>
			<td><code>Engine.restart()</code></td>
		</tr>
		<tr>
			<td><code>State.show()</code></td>
			<td><code>Engine.show()</code></td>
		</tr>
	</tbody>
</table>
<ol class="note">
<li id="guide-code-updates-2.5.0-fn1">While the <code>Engine.display()</code> static methods exists, it, like <code>State.display()</code> before it, is deprecated.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#engine-api-method-play"><code>Engine.play()</code> static method</a> for the replacement.  <b>NOTE:</b> Their parameters differ, so read the description of <code>Engine.play()</code> carefully.</li>
</ol>
<h3><code>UI</code> API</h3>
<p>Several <code>UI</code> API methods have moved to the new <code>Dialog</code> API.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api"><code>Dialog</code> API</a> docs for more information.</p>
<table>
	<thead>
		<tr>
			<th>Old <code>UI</code> method</th>
			<th>New <code>Dialog</code> method</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>UI.addClickHandler()</code></td>
			<td><code>Dialog.addClickHandler()</code></td>
		</tr>
		<tr>
			<td><code>UI.body()</code></td>
			<td><code>Dialog.body()</code></td>
		</tr>
		<tr>
			<td><code>UI.close()</code></td>
			<td><code>Dialog.close()</code></td>
		</tr>
		<tr>
			<td><code>UI.isOpen()</code></td>
			<td><code>Dialog.isOpen()</code></td>
		</tr>
		<tr>
			<td><code>UI.open()</code></td>
			<td><code>Dialog.open()</code></td>
		</tr>
		<tr>
			<td><code>UI.setup()</code></td>
			<td><code>Dialog.setup()</code></td>
		</tr>
	</tbody>
</table>
<!-- ***************************************************************************
	Updating to any version 2.0.0 from a lesser version
**************************************************************************** -->
<h2 id="guide-code-updates-2.0.0"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.0.0" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Updating to any version 2.0.0 from a lesser version<!-- legacy --><span id="guide-upgrading-2.0.0"></span><!-- /legacy --> </span></h2>
<p role="note" class="warning"><b>Warning:</b>
All changes within this version are <strong>breaking changes</strong> that you <strong><em>must</em></strong> address immediately.
</p>
<h3>HTML &amp; CSS</h3>
<p>The HTML &amp; CSS have undergone <em><strong>significant</strong></em> changes.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#html"><code>HTML</code></a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#css"><code>CSS</code></a> docs for more information.</p>
<h3>Special passages</h3>
<table>
	<thead>
		<tr>
			<th>Passage</th>
			<th>Changes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>MenuOptions</code></td>
			<td>The <code>MenuOptions</code> special passage has been removed.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.0.0-options">Options system section</a> for more information.</td>
		</tr>
		<tr>
			<td><code>MenuShare</code></td>
			<td>The <code>MenuShare</code> special passage has been removed.  Instead, use the <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storyshare"><code>StoryShare</code> special passage</a>.</td>
		</tr>
		<tr>
			<td><code>MenuStory</code></td>
			<td>The <code>MenuStory</code> special passage has been removed.  Instead, use the <a href="https://www.motoslave.net/sugarcube/2/docs/#special-passage-storymenu"><code>StoryMenu</code> special passage</a>.</td>
		</tr>
	</tbody>
</table>
<h3><code>config</code> object</h3>
<p>The <code>config</code> object has been renamed to <code>Config</code> and some of its properties have also changed.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api"><code>Config</code> API</a> docs for more information.</p>
<table>
	<thead>
		<tr>
			<th>Property</th>
			<th>Changes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>config.altPassageDescription</code></td>
			<td>Changed the <code>config.altPassageDescription</code> property to <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-descriptions"><code>Config.passages.descriptions</code></a>.</td>
		</tr>
		<tr>
			<td><code>config.disableHistoryControls</code></td>
			<td>Changed the <code>config.disableHistoryControls</code> property to <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-history-controls"><code>Config.history.controls</code></a>.  This change also inverted the meaning of the property, so take note of that.</td>
		</tr>
		<tr>
			<td><code>config.disableHistoryTracking</code></td>
			<td>Replaced the <code>config.disableHistoryTracking</code> property with <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-history-maxstates"><code>Config.history.maxStates</code></a>.  The new property works differently, so take note of that.</td>
		</tr>
		<tr>
			<td><code>config.displayPassageTitles</code></td>
			<td>Changed the <code>config.displayPassageTitles</code> property to <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-displaytitles"><code>Config.passages.displayTitles</code></a>.</td>
		</tr>
		<tr>
			<td><code>config.historyMode</code></td>
			<td>Removed the <code>config.historyMode</code> property.  It's unnecessary since there's now only one history mode in the engine.</td>
		</tr>
		<tr>
			<td><code>config.macros.disableIfAssignmentError</code></td>
			<td>Changed the <code>config.macros.disableIfAssignmentError</code> property to <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-macros-ifassignmenterror"><code>Config.macros.ifAssignmentError</code></a>.  This change also inverted the meaning of the property, so take note of that.</td>
		</tr>
		<tr>
			<td><code>config.passageTransitionOut</code></td>
			<td>Changed the <code>config.passageTransitionOut</code> property to <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-transitionout"><code>Config.passages.transitionOut</code></a>.  Additionally, it no longer accepts a boolean value, which has been replaced by the name of the animating property (necessitated by changes to browser handling of transition animations).</td>
		</tr>
		<tr>
			<td><code>config.startPassage</code></td>
			<td>Changed the <code>config.startPassage</code> property to <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-passages-start"><code>Config.passages.start</code></a>.</td>
		</tr>
		<tr>
			<td><code>config.updatePageElements</code></td>
			<td>Changed the <code>config.updatePageElements</code> property to <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-ui-updatestoryelements"><code>Config.ui.updateStoryElements</code></a>.</td>
		</tr>
	</tbody>
</table>
<h3>History object &amp; prototype (instance: <code>state</code>)</h3>
<p>The <code>History</code> API object has been renamed to <code>State</code> and some of its methods have also changed.  Furthermore, it is no longer instantiated into the legacy <code>state</code> objectwhich still exists, so legacy code will continue to work.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api"><code>State</code> API</a> docs for more information.</p>
<p>The <code>State.display()</code> methodformerly <code>state.display()</code>is no longer overridable, meaning it cannot be wrappede.g., the "StoryRegions" 3rd-party add-ons do this.  Instead, use <a href="https://www.motoslave.net/sugarcube/2/docs/#navigation-events-tasks">Navigation Events or Tasks</a>.</p>
<p>Calling the <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-prng-init"><code>State.prng.init()</code> method</a>formerly <code>History.initPRNG()</code>outside of story initialization will now throw an error.  It has always been required that the call happen during story initialization, the only change is the throwing of the error.</p>
<h3>Seedable pseudo-random number generator (PRNG)</h3>
<p><code>Math.random()</code> is no longer replaced by the integrated seedable PRNG when <code>State.prng.init()</code> is called.  Instead, use either the built-in functions <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-random"><code>random()</code></a> &amp; <a href="https://www.motoslave.net/sugarcube/2/docs/#functions-function-randomfloat"><code>randomFloat()</code></a> or the <a href="https://www.motoslave.net/sugarcube/2/docs/#state-api-method-random"><code>State.random()</code> method</a>, if you need direct access to the PRNGsince it returns a call to either <code>Math.random()</code> or the seedable PRNG, as appropriate.</p>
<h3>Macro system</h3>
<p>The <code>Macros</code> API object has been renamed to <code>Macro</code> and several of its methods have also changed, for better consistency with the other APIs.  Furthermore, it is no longer instantiated into the legacy <code>macros</code> objectwhich still exists, so SugarCube-compatible legacy macros will continue to work.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#macro-api"><code>Macro</code> API</a> docs for more information.</p>
<h3>Macro library</h3>
<table>
	<thead>
		<tr>
			<th>Macro</th>
			<th>Changes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>&lt;&lt;back&gt;&gt;</code> &amp; <code>&lt;&lt;return&gt;&gt;</code></td>
			<td>Replaced the ungainly link text syntax<code>&lt;&lt;back::linktext ""&gt;&gt;</code>/<code>&lt;&lt;return::linktext ""&gt;&gt;</code>with <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-localization"><code>l10nStrings</code> object</a> properties<code>l10nStrings.macroBackText</code> and <code>l10nStrings.macroReturnText</code>.</td>
		</tr>
		<tr>
			<td><code>&lt;&lt;if&gt;&gt;</code> &amp; <code>&lt;&lt;elseif&gt;&gt;</code></td>
			<td>The <code>&lt;&lt;if&gt;&gt;</code> macro will now, optionally, return an error if the JavaScript <code>=</code> assignment operator is used (default: enabled).  Configured via the <a href="https://www.motoslave.net/sugarcube/2/docs/#config-api-property-macros-ifassignmenterror"><code>Config.macros.ifAssignmentError</code> config property</a>.</td>
		</tr>
		<tr>
			<td>Options macros</td>
			<td>The various Options macros have been removed.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#guide-code-updates-2.0.0-options">Options system section</a> for more information.</td>
		</tr>
	</tbody>
</table>
<h3><span id="guide-code-updates-2.0.0-options">Options system</span></h3>
<p>The entire Options system<code>MenuOptions</code> special passage, <code>options</code> special variable, and associated macroshas been scrapped for numerous reasonsit was always a hack, required copious amounts of boilerplate code to be useful, etc.  It is replaced by the <code>Setting</code> API and <code>settings</code> special variable.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#setting-api"><code>Setting</code> API</a> docs for more information.</p>
<h3>Save system</h3>
<p>The <code>SaveSystem</code> API object has been renamed to <code>Save</code> and several of its methods have also changed, for better consistency with the other APIs.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#save-api"><code>Save</code> API</a> docs for more information.</p>
<h3>UI system</h3>
<p>The <code>UISystem</code> API object has been split into two APIs <code>Dialog</code> and <code>UI</code>, and some of its methods have also changed.  In particular, the parameter list for the <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api-method-setup"><code>Dialog.setup()</code> method</a> has changed.  See the <a href="https://www.motoslave.net/sugarcube/2/docs/#dialog-api"><code>Dialog</code> API</a> and <a href="https://www.motoslave.net/sugarcube/2/docs/#ui-api"><code>UI</code> API</a> docs for more information.</p>

<!-- ***********************************************************************************************
	Guide: Localization
************************************************************************************************ -->
<h1 id="guide-localization"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-localization" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Guide: Localization </span></h1>
<p>This is a reference for localizing SugarCube's default UI text, in general, and its <code>l10nStrings</code> object specifically.</p>
<p role="note"><b>Note:</b>
If you're simply looking to download ready-to-use localizations, see <a href="http://www.motoslave.net/sugarcube/2/#downloads">SugarCube's website</a> (under <em>Downloads &gt; Localizations</em>).
</p>
<h4>History:</h4>
<ul>
<li><code>v2.0.0</code>: Introduced.</li>
<li><code>v2.10.0</code>: Added <code>l10nStrings</code> object.  Deprecated <code>strings</code> object.</li>
</ul>
<h4>A note about <code>strings</code> vs. <code>l10nStrings</code></h4>
<p>Prior to SugarCube <code>v2.10.0</code>, the strings localization object was named <code>strings</code>.  The new <code>l10nStrings</code> object has a simpler, flatter, set of properties and better support for replacement strings.  Unfortunately, this means that the two objects are incompatible.</p>
<p>To ensure backwards compatibility of existing <code>strings</code> objects, if one exists within a project's scripts, the older object is mapped to the new <code>l10nStrings</code> object.</p>
<!-- ***************************************************************************
	Translation Notes
**************************************************************************** -->
<h2 id="guide-localization-translation-notes"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-localization-translation-notes" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Translation Notes </span></h2>
<p>The capitalization and punctuation used within the default replacement strings is deliberate, especially within the error and warning strings.  You would do well to keep your translations similar when possible.</p>
<p>Replacement patterns have the format <code>{NAME}</code>e.g., <code>{identity}</code>where NAME is the name of a property within either the <code>l10nStrings</code> object or, in a few cases, an object supplied locally where the string is usedthese instances will be commented.</p>
<p>By convention, properties starting with an underscoree.g., <code>_warningIntroLacking</code>are used as templates, only being included within other localized strings.  Feel free to add your own if that makes localization easiere.g., for gender, plurals, and whatnot.  As an example, the default replacement strings make use of this to handle various warning intros and outros.</p>
<p>In use, replacement patterns are replaced recursively, so replacement strings may contain patterns whose replacements contain other patterns.  Because replacement is recursive, care must be taken to ensure infinite loops are not createdthe system will detect an infinite loop and throw an error.</p>
<!-- ***************************************************************************
	Usage
**************************************************************************** -->
<h2 id="guide-localization-usage"><a href="https://www.motoslave.net/sugarcube/2/docs/#guide-localization-usage" class="permalink" title="Permanent link" aria-label="Permanent link"></a>&nbsp;<span>Usage </span></h2>
<p>Properties on the strings localization object (<code>l10nStrings</code>) should be set within your project's JavaScript section (Twine&nbsp;2: the Story JavaScript; Twine&nbsp;1/Twee: a <code>script</code>-tagged passage) to override the defaults.</p>
<p>For the template that should be used as the basis of localizations, see the <a href="https://github.com/tmedwards/sugarcube-2/tree/develop/locale/"><code>locale/l10n-template.js</code> file @github.com</a>.</p>
<h3>Examples</h3>
<pre><code>// Changing the project's reported identity to "story"
l10nStrings.identity = "story";

// Changing the text of all dialog OK buttons to "Eeyup"
l10nStrings.ok = "Eeyup";

// Localizing the title of the Restart dialog (n.b. machine translations, for example only)
l10nStrings.restartTitle = "Neustart";  // German (de)
l10nStrings.restartTitle = "Reiniciar"; // Spanish (es)
</code></pre>
<!-- ******************************************************************************************* -->
<div aria-hidden="true">&nbsp;</div>


</body></html>